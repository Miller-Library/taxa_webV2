[
  {
    "objectID": "content/Option2final.html",
    "href": "content/Option2final.html",
    "title": "Option 2",
    "section": "",
    "text": "Tiktoken Splitter\nOpenAI Embeddings\nFAISS\nContextual Compress\nRetrievalQA\nConversationalRetrievalQA\nMemory\nimport pandas as pd\nimport os\nimport openai\nimport sys, pathlib, fitz\nfrom langchain.chains import LLMChain\nfrom langchain.chains.question_answering import load_qa_chain\nfrom langchain.chains import RetrievalQA\nfrom langchain.chains import ConversationalRetrievalChain\nfrom langchain.document_loaders import PyMuPDFLoader\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain.text_splitter import TokenTextSplitter\nfrom langchain.embeddings.openai  import OpenAIEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.retrievers import ContextualCompressionRetriever\nfrom langchain.retrievers.document_compressors import LLMChainExtractor\nfrom langchain.retrievers.document_compressors import LLMChainFilter\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.memory import VectorStoreRetrieverMemory\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain import PromptTemplate\nfrom langchain.chains.qa_with_sources import load_qa_with_sources_chain\nfrom langchain.chains.conversational_retrieval.prompts import CONDENSE_QUESTION_PROMPT\n# from langchain.prompts.chat import (\n#     ChatPromptTemplate,\n#     SystemMessagePromptTemplate,\n#     AIMessagePromptTemplate,\n#     HumanMessagePromptTemplate,\n# )\n# from langchain.schema import AIMessage, HumanMessage, SystemMessage\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv()) # read local .env file\n\nopenai.api_key  = os.environ['OPENAI_API_KEY']\n# Helper function for printing docs\n\ndef pretty_print_docs(docs):\n    print(f\"\\n{'-' * 100}\\n\".join([f\"Document {i+1}:\\n\\n\" + d.page_content for i, d in enumerate(docs)]))",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option2final.html#remove-citation-pages",
    "href": "content/Option2final.html#remove-citation-pages",
    "title": "Option 2",
    "section": "Remove Citation Pages",
    "text": "Remove Citation Pages\nFrom our Option 1 experiment, we noticed the responses and source documents were derived by the reference pages and non relevant graphs in the appendix. Luckily, the appendix is always after the reference so I create this simple function to drop the first page of references as well as all subsequent pages.\n\nThis saves tokens and we dont need to process irrelevant text\nRemoves the risk of generating irrelevant data\n\n\ndef has_citations(page_text):\n    # List of variations of \"citations\" to check for\n    citation_variations = [\"Citations\", \"Literature Cited\", \"Literature Citations\"]\n\n    for variation in citation_variations:\n        if variation in page_text:\n            return True\n    return False\n\ndef remove_citation_pages(pdf_path):\n    doc = fitz.open(pdf_path)\n    non_citation_pages = []\n\n    for page_num in range(doc.page_count):\n        page = doc[page_num]\n        page_text = page.get_text()\n\n        if not has_citations(page_text):\n            non_citation_pages.append(page_num)\n\n    # Create a new PDF with only non-citation pages\n    new_pdf = fitz.open()\n    for page_num in non_citation_pages:\n        new_pdf.insert_pdf(doc, from_page=page_num, to_page=page_num)\n\n    return new_pdf\n\n\ninput_pdf_path = './hms/fhl_2014_Charifson_34622 (1).pdf'\n\n# Create a new PDF with citation pages removed\nnew_pdf = remove_citation_pages(input_pdf_path)\n\n# Save the new PDF to 'output.pdf'\noutput_pdf_path = 'output.pdf'\nnew_pdf.save(output_pdf_path)\nnew_pdf.close()",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option2final.html#extract-text-from-the-new-pdf-file-w-reference-pages-removed",
    "href": "content/Option2final.html#extract-text-from-the-new-pdf-file-w-reference-pages-removed",
    "title": "Option 2",
    "section": "Extract text from the new PDF file w/ reference pages removed",
    "text": "Extract text from the new PDF file w/ reference pages removed\n\ndef extract_text_from_pdf(pdf_path):\n    doc = fitz.open(pdf_path)\n    text = \"\"\n    for page in doc:\n        text += page.get_text()\n    doc.close()\n    return text\n\n# Replace 'output.pdf' with the path to the PDF you created with citation pages removed\nnew_pdf_path = 'output.pdf'\n\n# Extract text from the new PDF\nnew_pdf_text = extract_text_from_pdf(new_pdf_path)\n\n# Now you can manipulate the extracted text or perform any other actions as needed\n# For example, you can print the extracted text:\nprint(new_pdf_text)\n\nCharifson 1 \n \nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \nDifferences in Chela Size. \n \nDavid Charifson1,2 \n \nMarine Invertebrate Zoology \nSummer 2014 \n \n \n \n \n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \n \n \n \n \nContact information: \nDavid Charifson \nDepartment of Ecology and Evolution \nStony Brook University \n650 Life Sciences Building \nStony Brook, NY 11794-5245 \nDavid.charifson@stonybrook.edu  \n \n \n \n \nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \npredation, sexual dimorphism, character displacement  \n \n \nCharifson 2 \n \nAbstract: \n \nThe relationship between propus size and use of snails as prey in sympatric populations \nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \nwidth increases with body size in a predictable manner in male and female crabs of both species. \nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \nno character displacement in this trait. Both species of crabs showed a strong feeding preference \nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \ndue to the ease of consumption. There were no differences in snail consumption rates between \nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \nindividual crabs.  \n \nIntroduction: \n \nA multitude of species coexist in the marine intertidal environment. Closely related \nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \nconsiderable habitat overlap between these two species; the underside of a single rock may have \nCharifson 3 \n \nroughly equal abundances of the two crab species (personal observation). The size of the chela \nmay differ, which could allow the crabs to differentiate in food resource utilization. \nBoth species are omnivores that eat algae and small invertebrates, including snails \n(Behrens Yamada and Boulding 1996). The two shore crab species are known to eat Littorina \nsitkana (Philippi 1846) and Littorina scutulata (Gould 1849), which also occur in the rocky \nintertidal zone (Behrens Yamada and Boulding 1996). Li. scutulata moves upshore in response \nto the presence of H. nudus and crushed conspecifics, where H. nudus density is lower (Keppel \nand Scrosati 2004). This suggests that H. nudus represents an ecologically significant predation \nthreat to littorines.  \n \nThe thick shelled littorines are difficult prey for both H. nudus and H. oregonensis as \nneither crab species is a molluscivore specialists; they typically scrape or pick algae and softer \ninvertebrates off rocks using their chelae (Behrens Yamada and Boulding 1996). Behrens \nYamada and Boulding (1998) found that large H. nudus were capable of consuming Li. sitkana \nthat were less than 8 mm in length, but had only a 37% success rate of consuming snails with \nlengths between 5.5-7 mm .  \nI sought to investigate differences in propus size between between males and females of \nthese two crab species. The size of the propus of the chela is positively correlated with the \namount of force that can be produced due to greater musculature (Behrens Yamada and Boulding \n1998). A significant difference in propus size between the two species would suggest that further \ntesting of character displacement may be warranted. A disparity in propus size to body size \nbetween male and female crabs might result in different feeding rates and shell breaking \ncapabilities. I devised a test of preference by varying snail shell strength within the same size \nclass. The snail species Li. scutulata and Lacuna vincta (Montagu 1803) are both in the family \nCharifson 4 \n \nLittorinidae and have similar shell shape but different shell thickness. Lacuna vincta has a \nthinner, more fragile shell and is likely to be preferred as prey by shore crabs. I also hypothesize \nthat, if chela size is held constant, female crabs will have greater snail consumption rates than \nmale crabs. Female crabs with claws equivalent to males have a larger body mass,are likely to \nhave greater metabolic need, and are less easily satiated. \n \nStudy System: \n \nAll specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock. These closely related \ncrabs are morphologically similar, but can be distinguished by the presence of purple spots on \nthe cheliped of H. nudus and abundant setae on the pereopods of H. oregonensis (Kozloff 1987). \nLacuna vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \ncollected from the rocky intertidal zone of Fourth of July Beach.  \n \nMaterials and Methods: \nMorphometrics \n \nMale and females of H. oregonensis and H. nudus were measured with digital calipers \n(0.1 mm). Each crab was measured for carapace width, propal height and propal width. Carapace \nwidth was taken at the widest part of the carapace. Propal height was measured at the highest \nvertical distance along the propus. Propal width was measured perpendicular to propal height, \nfrom the left to right sides of the propus. All claw measurements were made on the left cheliped. \nCharifson 5 \n \nIf there was a size disparity between the left and right claws due to regeneration of a lost claw, \nthe crab was excluded from the study. Ratios of carapace width:propal height (CW:PH) and \ncarapace width:propal width (CW:PW) were calculated.  \n \nCrab Feeding Preference \n \nThree female (Fe1, Fe2, Fe3) and three male (Ma1, Ma2, Ma3) crabs of H. nudus with \npropal heights between 5-6 mm were placed in small flow-through containers. Five L. scutulata \nand five L. vincta with shell lengths between 4-6 mm were added to each container. The ranges \nof crab propal height and snail shell length were chosen based on prior studies to ensure that the \ncrabs were capable of feeding on the hard-shelled L. scutulata (Behrens Yamada and Boulding \n1998). H. oregonensis was excluded due to the rarity of female crabs of that species within the \nrange of appropriate propal heights. After approximately 15 hours the number of L. scutulata and \nL. vincta consumed was counted. Three trials were conducted for each crab. \nSnail Consumption by Hemigrapsus nudus \n \nThe crabs from the preference experiment were given five of each snail in each trial. \nAfter 1.5 to 3 hours the number of snails consumed was counted and converted to a consumption \nrate (snails consumed/hour). A total of eight feeding trials were conducted.  \n \nStatistical Analysis \n \nFor the morphometric analysis, crabs were divided into four groups based on sex and \nspecies. Standardized major axis regression was used to determine the relationship between crab \nmorphometric parameters. Arcsin transformations were used to correct for non-normality (Sokol \nand Rohlf 2011). Differences in CW:PH and CW:PW were analyzed using a two-way ANOVA \nCharifson 6 \n \nwith factors: Sex and Species. Prey selection by H. nudus was analyzed using G-tests for each \nindividual that consumed snails. An one-way ANOVA was used to determine differences in snail \nconsumption rates by H. nudus.  \n \nResults: \nMorphometrics: \n \nCarapace width was a good predictor of both propal height (Figure 1, Table 1A) and \npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \nless variation in the relationship between carapace width and propal height than with propal \nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \nrespectively.  \n \nCrab Feeding Preference:  \n \nExpected values for both the number of L. scutulata and L. vincta consumed for the G-\ntest are 0.5 multiplied by the total number of snails consumed by each individual crab. G-tests \nfor individual H. nudus that eat snails were all significant at p &lt; 0.001 with 1 degree of freedom \n(See Table 2 for statistical summary). The three crabs that did not eat either L. scutulata or L. \nvincta could not be tested for feeding preference.  \nCharifson 7 \n \n \nSnail Consumption by Hemigrapsus nudus \n \nNo significant difference in crab feeding rate (snails consumed/hour) was found (F2, 21 = \n2.52, p = 0.104) among individual H. nudus that fed on snails during the course of the \nconsumption experiment (Figure 5). Fe2  ate snails at a rate of 0.59±0.53 snails/hour (variance is \nstandard deviation), Ma1 feeding rate was 0.24±0.31 snails/hour, and Ma2 had a feeding rate of \n0.80±0.38 snails/hour. Individuals Fe1, Fe3 and Ma3 did not consume any snails during the \ncourse of the experiment.  \n \nDiscussion: \n \nA few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus \nand Hemigrapsus orogenensis. The variance in propal height or propal width explained by \ncarapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for \npropal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela \nsize parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width \nrespectively. The R2 values for propal width regressed against carapace width were consistently \nlower than propal height regressed against carapace width across species and sexes (Table 1). In \ngeneral the ability of carapace width to explain the variance in chela size parameters (i.e.: R2 \nvalues) was greater in females of both crab species (Table 1, Figures 1 and 2). Males may have \nmore variation in claw size due to trade-offs between claw size and factors like feeding \nefficiency or resource allocation. Trade-offs relating to chela size are found in fiddler crabs, \nwhich exhibit extreme sexual dimorphism. Fiddler crabs have a trade-off between the intrasexual \ncompetition and intersexual signaling functions of the dimorphic claw (Swanson et al. 2013). \nCharifson 8 \n \nThis is not to say that the particular trade-offs in fiddler crabs case are analogous to that of \nHemigrapsus, since both claws in the two shore crabs in this study are used in feeding.  \nSexual dimorphism in chela size, which is readily apparent to the eye in both \nHemigrapsus nudus and Hemigrapsus oregonensis, was detected statistically (Figures 3 and 4). \nThe two-way ANOVA with factors sex and species did not show a significant species effect, \nsuggesting that the claws of both shore crabs produce roughly the same force and are \nfunctionally equivalent (Behrens Yamada and Boulding 1998). The lack of morphological \ndifference in the size of the chelae between the crab species removes the possibility of character \ndisplacement in the trait. It should be noted that this study was not designed to test for character \ndisplacement, but to determine if this would be an interesting question for future investigations. \nTo make a compelling case for character displacement it is necessary to compare multiple \nsympatric and allopatric populations with similar abiotic and biotic conditions (Stuart and Losos \n2013). Also it must be demonstrated that the trait differs due to genetic differences between \nsympatric and allopatric populations, that the differences between the populations are not due to \nspecies sorting, that the morphological trait is correlated to differences in resource use between \nthe two sympatric species, and that the similar phenotype in allopatric populations compete for \nthe same resources (Stuart and Losos 2013). The tendency of H. nudus to occupy the upper \nintertidal zone (Sliger 1987), despite considerable overlap with H. oregonensis, may provide \nenough differential resource use to prevent exclusion in sympatry. Desiccation tolerance may be \na better trait to test for character displacement in these shore crabs.  \nH. nudus males and females clearly preferred to eat the thinner shelled Lacuna vincta \n(Table 2). During the course of the feeding preference experiment all the crabs that ate snails \nconsumed L. vincta exclusively. However, one Littorina scutuala was eaten by H. nudus when \nCharifson 9 \n \ndetermining consumption rates. The six crabs were chosen because their claws were of \nappropriate size to eat littorines with shell length between 4-6 mm, yet only half of the crabs ate \nthese snails. This could be due to insufficient time to acclimate H. nudus to lab conditions and \npossibly reduced feeding associated with molting. Male snow crabs, Chionoecetes opilio, were \nshown to cease feeding 3-6 weeks before and 3-4 weeks after molting (O’Halloran and O’Dor \n1988).  \nIt was my original intention to test for sex differences in consumption rates, but this was \nnot possible as I could not collect many crabs of the appropriate claw size for gastropod feeding \nand many of the crabs I did collect did not feed. There were no statistically significant \ndifferences in consumption rates (snails eaten/hour) among the three feeding H. nudus. These \nindividuals had highly variable feeding rates, mostly due to trials in which the crab did not feed. \nSylvia Behrens Yamada and Elizabeth Boulding (1998) found that H. nudus consumed 1.8 \nLittorina. sitkana/individual crab/day. In my study crabs fed on 13.03 Lacuna vincta/individual \ncrab/ day. The greater consumption rate in my study is likely due to the easily breakable shells of \nLa. vincta.  \nThe findings of this study suggest that there is no potential for character displacement of \nchela size in the sympatric H. nudus and H. oregonensis. This leaves the question of species co-\noccurrence open to other possibilities. H. nudus has a strong preference for La. vincta, but it \nseems as if there have been no studies that show predation on La. vincta in the field. It should be \nnoted that H. nudus and La. vincta usually occupy different portions of the intertidal and may \nhave little contact with each other, unlike the relationship between H. nudus and Li. scutulata. \nThere is some potential for overlap in the winter when La. vincta migrates up shore. Although no \ndifferences in consumption rates between male and female H. nudus were found, this might be \nCharifson 10 \n \ndue to logistical issues surrounding the experimental design and little replication. Future studies \nshould include more crabs, the exclusion of non-feeding crabs, and trial periods with longer time \nintervals. Additionally, any subsequent study should utilize multivariate and geometric \nmorphometric methods to quantify claw shape instead of using ratios, as two similar ratios may \nhave different shape.  \n \nAcknowledgements: \n \nI would like to thank Dianna Padilla, Michael LaBarbera, and Kevin Turner for advice \nrelating to the experimental design of this study. I would also like to thank the director and staff \nof Friday Harbor Laboratories for use of facilities and permission to collect organisms. Friday \nHarbor Laboratories, The Libbie Hyman Scholarship, Society for Integrative and Comparative \nBiology, and the Stony Brook Department of Ecology and Evolution provided financial support \nand have my gratitude.  \n \n \n \n \n \n \n \n \n \n \nCharifson 12 \n \nSwanson, B. O., George, M. N., Anderson, S. T., and Christy, J. H. 2013. Evolutionary variation\n \nin the mechanics of fiddler crab claws. BMC Evolutionary Biology 13: 137. \n \n \n \n \n \n \n \n \n \nCharifson 13 \n \nTable 1: SMA regressions of carapace width and propus measures.  \nA) The relationship between carapace width and propal height. x is carapace width and y is \npropal height. B) The relationship between carapace width and propal height. x is carapace width \nand y is propal width.  \n \n \n \nSMA Regression  \n \nA \n \nN \nCarapace Width vs Propal Height  \nR2 \n \nFemale H. nudus \n13 \ny = 0.273*x - 0.678 \n0.976 \n \nMale H. nudus \n13 \ny = 0.311*x - 1.385 \n0.868 \n \nFemale H. oregonensis \n9 \ny = 0.351*x - 0.833 \n0.894 \n \nMale H. oregonensis \n14 \ny = 0.39*x - 1.149 \n0.693 \n \n \n \n \n \n \n \n \nSMA Regression  \n \nB \n \nN \nCarapace Width vs Propal Width  \nR2 \n \nFemale H. nudus \n13 \ny = 0.157*x - 0.386 \n0.927 \n \nMale H. nudus \n13 \ny = 0.209*x - 1.288 \n0.859 \n \nFemale H. oregonensis \n9 \ny = 0.175*x + 0.037 \n0.724 \n \nMale H. oregonensis \n14 \ny = 0.244*x - 0.688 \n0.534 \n \n \nCharifson 14 \n \nTable 2: Size and prey preference in H. nudus.  \nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \nfor preference. \nIndividual \nCarapace \nWidth (mm) \nPropal \nHeight (mm) \nNumber of \nLacuna vincta \nconsumed \nNumber of \nLittorina scutulata \nconsumed \n \nG \n \np-value \nFe1 \n23.6 \n5.9 \n0 \n0 \nNT \n \nFe2 \n23.1 \n5.5 \n15 \n0 \n20.8 \np &lt; 0.001 \nFe3 \n20.6 \n5 \n0 \n0 \nNT \n \nMa1 \n19.1 \n5.4 \n14 \n0 \n19.4 \np &lt; 0.001 \nMa2 \n18.4 \n5.4 \n15 \n0 \n20.8 \np &lt; 0.001 \nMa3 \n20.1 \n6 \n0 \n0 \nNT \n \n \n \n \nCharifson 15 \n \n \nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \nC) Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 16 \n \n \nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 17 \n \n \nFigure 3: Differences in propal height:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \nError bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \n0.3 \n0.35 \nH. nudus \nH. oregonensis \nPropal Height:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 18 \n \n \nFigure 4: Differences in propal width:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \n0.01). Error bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \nH. nudus \nH. oregonensis \nPropal Widtht:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 19 \n \n \nFigure 5: Consumption rates by individual H. nudus.  \nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \nthe mean.  \n  \n0 \n0.1 \n0.2 \n0.3 \n0.4 \n0.5 \n0.6 \n0.7 \n0.8 \n0.9 \n1 \nFe1 \nFe2 \nFe3 \nMa1 \nMa2 \nMa3 \nMean Consumption Rate  \n(Snails Consumed/Hour) \nIndividual H. nudus \n\n\n\n\n# Read in some Data\nloader = PyMuPDFLoader(\"hms/fhl_2014_Charifson_34622 (1).pdf\")\n\n# Now taht we have our PDF document loaded into a loader object, we move onto text splitters\npages = loader.load_and_split()\n\n\n# with open(\"hms/kr111tr5711.txt\",  encoding=\"utf8\") as f:\n#     text_file = f.read()",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option2final.html#tiktoken-splitter",
    "href": "content/Option2final.html#tiktoken-splitter",
    "title": "Option 2",
    "section": "Tiktoken Splitter",
    "text": "Tiktoken Splitter\ntiktoken is a fast byte pair encoding (BPE) tokenizer created by OpenAI.\nWe can use it to estimate tokens used. It will probably be more accurate for the OpenAI models.\n\nHow the text is split: by character passed in\nHow the chunk size is measured: by tiktoken tokenizer\n\nModels don’t see text like humans, instead they see a sequence of numbers (known as tokens). Byte pair encoding (BPE) is a way of converting text into tokens. It has a couple desirable properties:\n\nIt’s reversible and lossless, so you can convert tokens back into the original text\nIt works on arbitrary text, even text that is not in the tokeniser’s training data\nIt compresses the text: the token sequence is shorter than the bytes corresponding to the original text. On average, in practice, each token corresponds to about 4 bytes.\nIt attempts to let the model see common subwords. For instance, “ing” is a common subword in English, so BPE encodings will often split “encoding” into tokens like “encod” and “ing” (instead of e.g. “enc” and “oding”). Because the model will then see the “ing” token again and again in different contexts, it helps models generalise and better understand grammar.\n\nAttributeError: ‘str’ object has no attribute ’page_content\ndocs2 = tk_text_splitter.split_text(text_file) –&gt; tk_text_splitter.create_documents(text_file)\n\n#load a tiktoken splitter directly\nfrom langchain.text_splitter import TokenTextSplitter\n\ntk_text_splitter = TokenTextSplitter(chunk_size = 200, chunk_overlap = 0)\n\ndocs2 = tk_text_splitter.split_documents(pages)\n\nprint(docs2[0])\n\npage_content='Charifson 1 \\n \\nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \\nDifferences in Chela Size. \\n \\nDavid Charifson1,2 \\n \\nMarine Invertebrate Zoology \\nSummer 2014 \\n \\n \\n \\n \\n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \\n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \\n \\n \\n \\n \\nContact information: \\nDavid Charifson \\nDepartment of Ecology and Evolution \\nStony Brook University \\n650 Life Sciences Building \\nStony Brook, NY 11794-5245 \\nDavid.charifson@stonybrook.edu  \\n \\n \\n \\n \\nKeywords: Hemig' metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 0, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}\n\n\n\n#Initialize Embeddings\nembeddings = OpenAIEmbeddings()",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option2final.html#faiss-vectorstore",
    "href": "content/Option2final.html#faiss-vectorstore",
    "title": "Option 2",
    "section": "FAISS Vectorstore",
    "text": "FAISS Vectorstore\nFaiss is a library for efficient similarity search and clustering of dense vectors. It contains algorithms that search in sets of vectors of any size, up to ones that possibly do not fit in RAM. It also contains supporting code for evaluation and parameter tuning.\nTo retrieve text, there are two search types you can choose:\n\nsearch_type=“similarity” uses similarity search in the retriever object where it selects text chunk vectors that are most similar to the question vector.\nsearch_type=“mmr” uses the maximum marginal relevance search where it optimizes for similarity to query AND diversity among selected documents.\n\nIn our case, we wouldnt want to much diversity in our documents as we want the most accurate information. K = 3 returns the 3 most relevant documents.\nAs you will see, there are some inconsistencies in K as some returned 1, 2, or more than 3 relevant documents.\n\nvector_store = FAISS.from_documents(docs2, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option2final.html#custom-prompts",
    "href": "content/Option2final.html#custom-prompts",
    "title": "Option 2",
    "section": "Custom Prompts",
    "text": "Custom Prompts\nYou can pass in custom prompts to do question answering. These prompts are the same prompts as you can pass into the base question answering chain\n\n# Build prompt\ntemplate = \"\"\"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer. Use three sentences maximum. Keep the answer as concise as possible. \nAvoid pulling context from the literature cited section starting on page 10\n{context}\nQuestion: {question}\nHelpful Answer:\"\"\"\nQA_CHAIN_PROMPT = PromptTemplate.from_template(template)",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option2final.html#conversationalretrievalchain-similarity-search-w-conversationbuffermemory",
    "href": "content/Option2final.html#conversationalretrievalchain-similarity-search-w-conversationbuffermemory",
    "title": "Option 2",
    "section": "ConversationalRetrievalChain Similarity Search w/ ConversationBufferMemory",
    "text": "ConversationalRetrievalChain Similarity Search w/ ConversationBufferMemory\n\ntk_text_splitter = TokenTextSplitter(chunk_size = 800, chunk_overlap = 50)\n\ndocs3 = tk_text_splitter.split_text(new_pdf_text)\n\n\nvector_store2 = FAISS.from_texts(docs3, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})\n\n\nllm = ChatOpenAI(temperature=0, model_name='gpt-3.5-turbo')\n\ncompressor = LLMChainExtractor.from_llm(llm)\n\ncompression_retriever2 = ContextualCompressionRetriever(base_compressor = compressor,base_retriever=vector_store2)\n\n\ncustom_template = \"\"\"Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question. Please use a maximum of 4 sentences. If you do not know the answer reply with 'I am sorry'.\n1. SPECIES NAME: The scientific name (species name) of any plant, animal, fungus, alga or bacterium consists of two Latinized words. The first word is the name of the genus to which the organism belongs. The second word is the specific epithet or specific term of the species. Together, the genus plus the specific epithet make up the species name. The species name and scientific name are synonyms.\n2. HABITAT: A species habitat can be seen as the physical manifestation of its ecological niche.\n3. LOC: Name of any geographic location, like cities, countries, continents, districts etc.\n\nExamples:\n\n1. Sentence: Strongylocentrotus fransiscanus and S. purpuratus were obtained from the subtidal and intertidal regions, respectively, of Monterey Bay.\n\"Output: {{'SPECIES NAME': ['Strongylocentrotus fransiscanus', 'S. purpuratus'], 'HABITAT': ['subtidal', 'intertidal'], 'LOC': ['Monterey Bay']}}\n\n2. Sentence: Cucumaria curata and C. pseudocurata live and feed in the hydrodynamically stressful environment of exposed intertidal areas.\nOutput: {{'SPECIES NAME': ['Cucumaria curata', 'C. pseudocurata'], 'HABITAT': ['exposed intertidal'], 'LOC': ['None']}}\\n\"\n\nChat History:\n{chat_history}\nFollow Up Input: {question}\ninputVariables: [\"context\", \"question\", \"chat_history\"]\n\"\"\"\n\n\nCUSTOM_QUESTION_PROMPT = PromptTemplate.from_template(custom_template)\n\n\n# We can now create a memory object, which is necessary to track the\n# inputs/outputs and hold a conversation.\n\n\nfrom langchain.memory import ConversationBufferMemory\nmemory = ConversationBufferMemory(llm=llm, input_key='question', output_key='answer', memory_key=\"chat_history\", return_messages=True)\n\n\n# We now initialize the ConversationalRetrievalChain\n\n\nqa_chain_2 = ConversationalRetrievalChain.from_llm(ChatOpenAI(), \n                                                 compression_retriever2,\n                                                 memory = memory,\n                                                 return_source_documents = True,\n                                                 condense_question_prompt = CUSTOM_QUESTION_PROMPT)\n                                                \n\n\nquery = \"What is this paper about?\"\nquery1a = \"What were the significant findings on the relationship mentioned?\"\nquery2 = \"Summarize the paper concisely with reference to materials and methods.\"\nquery3 = \"Write a one sentence summary of the purpose of the paper\"\nquery4 = \"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\"\nquery5 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\nquery6 = \"What are the scientific names of the collected species mentioned in this paper?\"\nquery6a = \"Were there other species collected?\"\nquery7 = \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nquery7a = \"Please list the species collected based on their scientific names along with location of collection.\"\nquery8 = \"Can you give a more specific location?\"\nquery9 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nquery10 = \"In what habitat were the species found?\"\nquery10a = \"Can you give a more specific location of the habitat such as formal name of said location?\"\nquery11 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper?\"\n\n\nchat_history = []\n\n\nresult1a = qa_chain_2({\"question\": query, \"chat_history\": chat_history})\n\n\n#\"What is this paper about?\"\nresult1a[\"answer\"]\n\n'This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.'\n\n\n\nresult1a[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={}),\n Document(page_content='The relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \\nwidth increases with body size in a predictable manner in male and female crabs of both species. \\nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \\nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \\nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \\nno character displacement in this trait. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.', metadata={})]\n\n\n\nresult1a[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False)]\n\n\n\nresult1b = qa_chain_2({\"question\": query, \"chat_history\": chat_history})\n\n\n# What were the significant findings on the relationship mentioned\nresult1b[\"answer\"]\n\n'The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.'\n\n\n\nresult1b[\"source_documents\"]\n\n[Document(page_content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={}),\n Document(page_content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={}),\n Document(page_content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. It investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={})]\n\n\n\nresult1b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False)]\n\n\n\nresult2b = qa_chain_2({\"question\": query2, \"chat_history\": chat_history})\n\n\n#\"Summarize the paper concisely with reference to materials and methods.\"\n\nresult2b[\"answer\"]\n\n'The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.'\n\n\n\nresult2b[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n\\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \\nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.', metadata={})]\n\n\n\nresult2b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='Summarize the paper concisely with reference to materials and methods.', additional_kwargs={}, example=False),\n AIMessage(content='The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.', additional_kwargs={}, example=False)]\n\n\n\nresult3b = qa_chain_2({\"question\": query3, \"chat_history\": chat_history})\n\n\n#\"Write a one sentence summary of the purpose of the paper\"\n\nresult3b[\"answer\"]\n\n'Based on the provided context, it is not possible to determine the purpose or main objective of the paper.'\n\n\n\nresult3b[\"source_documents\"]\n\n[Document(page_content='Table 1: SMA regressions of carapace width and propus measures.  \\nA) The relationship between carapace width and propal height. x is carapace width and y is \\npropal height. B) The relationship between carapace width and propal height. x is carapace width \\nand y is propal width.', metadata={})]\n\n\n\nresult3b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='Summarize the paper concisely with reference to materials and methods.', additional_kwargs={}, example=False),\n AIMessage(content='The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.', additional_kwargs={}, example=False),\n HumanMessage(content='Write a one sentence summary of the purpose of the paper', additional_kwargs={}, example=False),\n AIMessage(content='Based on the provided context, it is not possible to determine the purpose or main objective of the paper.', additional_kwargs={}, example=False)]\n\n\n\nresult4b = qa_chain_2({\"question\": query4, \"chat_history\": chat_history})\n\n\n#\"Terms that may be used to identify an observation include “in the field”, \n#“this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”,\n#“harvested”, “found”, etc. Does the paper include one or more observations?\"\n\nresult4b[\"answer\"]\n\n'Yes, the paper includes multiple observations.'\n\n\n\nresult4b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='There were no detectible difference in chela size between H. nudus and H. oregonensis. Both species of crabs showed a strong feeding preference for the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata. There were no differences in snail consumption rates between male and female H. nudus of similar propal heights.', metadata={})]\n\n\n\nresult5b = qa_chain_2({\"question\": query5, \"chat_history\": chat_history})\n\n\n#\"Does this paper contain observational or experimental research conducted in the natural environment \n#or with organisms collected in nature?\"\n\nresult5b[\"answer\"]\n\n'Based on the given context, it appears that the research described in the paper involves observational research conducted in the natural environment. The researchers collected snails from different locations in the natural habitat and observed the feeding preferences of the crabs in their natural environment.'\n\n\n\nresult5b[\"source_documents\"]\n\n[Document(page_content='The relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={})]\n\n\n\nresult6b = qa_chain_2({\"question\": query6, \"chat_history\": chat_history})\n\n\n# \"What are the scientific names of the collected species mentioned in this paper?\"\n\nresult6b[\"answer\"]\n\n'The scientific names of the collected species mentioned in the paper are as follows:\\n\\n- Lacuna vincta\\n- Littorina scutulata\\n- Hemigrapsus nudus\\n- Hemigrapsus oregonensis'\n\n\n\nresult6b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Hemigrapsus nudus, Hemigrapsus oregonensis, Littorina scutulata, Lacuna vincta', metadata={})]\n\n\n\nresult7b = qa_chain_2({\"question\": query7, \"chat_history\": chat_history})\n\n\n#\"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nresult7b[\"answer\"]\n\n'Yes, the paper mentions the locations where the species were collected. Lacuna vincta was collected at False Bay and Dead Man Cove, while Littorina scutulata was collected from the rocky intertidal zone of Fourth of July Beach.'\n\n\n\nresult7b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Both species of crabs showed a strong feeding preference for the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely due to the ease of consumption.', metadata={})]\n\n\n\nresult7c = qa_chain_2({\"question\": query7a, \"chat_history\": chat_history})\n\n\n# \"Can you give a more specific location?\"\n\nresult7c[\"answer\"]\n\n'- Lacuna vincta: collected at False Bay and Dead Man Cove.\\n- Littorina scutulata: collected from the rocky intertidal zone of Fourth of July Beach.\\n- Hemigrapsus nudus and Hemigrapsus oregonensis: The specific locations of collection are not mentioned in the given context.'\n\n\n\nresult8b = qa_chain_2({\"question\": query8, \"chat_history\": chat_history})\n\n\nresult8b[\"answer\"]\n\n'Yes, the una vincta gastropods were collected at False Bay and Dead Man Cove, while the Littorina scutulata gastropods were collected from the rocky intertidal zone of Fourth of July Beach.'\n\n\n\nresult8b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={})]\n\n\n\nresult9b = qa_chain_2({\"question\": query9, \"chat_history\": chat_history})\n\n\n# \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nresult9b[\"answer\"]\n\n'Yes, there are coordinate locations given in latitude/longitude.'\n\n\n\nresult9b[\"source_documents\"]\n\n[]\n\n\n\nresult10b = qa_chain_2({\"question\": query10, \"chat_history\": chat_history})\n\n\n#  \"In what habitat were the species found?\"\nresult10b[\"answer\"]\n\n'The species were found in the rocky intertidal zone and adjacent intertidal areas of False Bay, Dead Man Cove, Fourth of July Beach, and the intertidal adjacent to the Friday Harbor Laboratories dock on San Juan Island, Washington.'\n\n\n\nresult10b[\"source_documents\"]\n\n[Document(page_content='There is still considerable habitat overlap between these two species; the underside of a single rock may have roughly equal abundances of the two crab species (personal observation).', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='All specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \\nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \\ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock.', metadata={})]\n\n\n\nresult10c = qa_chain_2({\"question\": query10a, \"chat_history\": chat_history})\n\n\n# \"Can you give a more specific location of the habitat such as formal name of said location?\"\nresult10c[\"answer\"]\n\n'Yes, the specific locations mentioned in the context are False Bay, Dead Man Cove, and Fourth of July Beach, all of which are on San Juan Island, Washington. There is no mention of a formal name for these locations.'\n\n\n\nresult10c[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='All specimens were collected on San Juan Island, Washington. Two shore crabs (clade: Brachyura: Family Grapsidae), Hemigrapsus oregonensis and Hemigrapsus nudus were collected in the intertidal adjacent to the Friday Harbor Laboratories dock.', metadata={})]\n\n\n\nresult11b = qa_chain_2({\"question\": query11, \"chat_history\": chat_history})\n\n\n# \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\nresult11b[\"answer\"]\n\n'Yes, the paper mentions the year as \"Summer 2014\". However, it does not provide specific dates or times for when the species were collected or observed.'\n\n\n\nresult11b['source_documents']\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Summer 2014', metadata={})]\n\n\n\nresult12b = qa_chain_2({\"question\": query12, \"chat_history\": chat_history})\n\n\nresult12b[\"answer\"]\n\n'Yes, there are figures and tables in the paper. Specifically, there are Figure 1, Table 1A, Figure 2, Table 1B, Figure 3, and Figure 4.'\n\n\n\n#  \"Are there any maps, figures, tables or diagrams in the paper?\"\nresult12b[\"source_documents\"]\n\n[Document(page_content='Figure 1, Table 1A, Figure 2, Table 1B, Figure 3, Figure 4', metadata={}),\n Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n\\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.', metadata={})]",
    "crumbs": [
      "Option 2 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html",
    "href": "content/Option1.html",
    "title": "Option 1",
    "section": "",
    "text": "SentenceTransformers Splitter\nSentenceTransformerEmbeddings\nAnnoy\nMultiQueryRetriever\nRetrievalQA with “Reduce”\nRetrievalQA with “Re-rank”\nRetrievalQA with “Stuff” and memory\nMemory\nimport pandas as pd\nimport os\nimport openai\nimport logging\nimport sys, pathlib, fitz\nfrom typing import List\nfrom langchain import LLMChain\nfrom pydantic import BaseModel, Field\nfrom langchain.prompts import PromptTemplate\nfrom langchain.output_parsers import PydanticOutputParser\nfrom langchain.text_splitter import SentenceTransformersTokenTextSplitter\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain.embeddings import SentenceTransformerEmbeddings\nfrom langchain.embeddings import HuggingFaceEmbeddings\nfrom langchain.retrievers.multi_query import MultiQueryRetriever\nfrom langchain.chains import RetrievalQA\nfrom langchain.chains import ConversationalRetrievalChain\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain.document_loaders import PyMuPDFLoader\nfrom langchain.vectorstores import Annoy\nfrom langchain.chat_models import ChatOpenAI\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv()) # read local .env file\n\nopenai.api_key  = os.environ['OPENAI_API_KEY']\n# os.environ[\"OPENAI_API_KEY\"] = \"\"\n# Helper function for printing docs\n\ndef pretty_print_docs(docs):\n    print(f\"\\n{'-' * 100}\\n\".join([f\"Document {i+1}:\\n\\n\" + d.page_content for i, d in enumerate(docs)]))",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html#extract-text-from-a-pymupdf",
    "href": "content/Option1.html#extract-text-from-a-pymupdf",
    "title": "Option 1",
    "section": "Extract text from a PyMuPDF",
    "text": "Extract text from a PyMuPDF\nAccording to LangChain, PyMuPDFLoader is the fastest PDF parsing option and contains detailed metadata about the PDF and its pages, as well as returns one document per page.\n\n# Read in some Data\nloader = PyMuPDFLoader(\"hms/fhl_2014_Charifson_34622 (1).pdf\")\n\n# Now that we have our PDF document loaded into a loader object, we move onto text splitters\npages = loader.load()\n\n\nlen(pages)\n\n19",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html#text-splitters",
    "href": "content/Option1.html#text-splitters",
    "title": "Option 1",
    "section": "Text Splitters",
    "text": "Text Splitters\nThe concept of text splitters revolves around the need to break down long pieces of text into smaller, meaningful chunks.\nThe goal is to split the text in a way that keeps semantically related pieces together, with th definition of “semantically related depending on the specific type of text being processed.\nLanguage models have a token limit. You should not exceed the token limit. When you split your text into chunks it is therefore a good idea to count the number of tokens. There are many tokenizers. When you count tokens in your text you should use the same tokenizer as used in the language model.\nText splitter allow customization:\n\nChunk_size parameter determines the number of text inputs that will be grouped together as a single request or chunk. This parameter allows you to control the granularity of the chnks and how much text is processed together at once.\nChunk_overlap parameter refers to the maximum overlap between consecutive chunks. By overlap inclusion, the TextSplitter ensures that is a continuity and context maintained between the chunks i.e. preserves the flow of information and avoids abrupt transitions between chunks.\n\n\nSentenceTransformers\nThe SentenceTransformersTokenTextSplitter is a specialized text splitter for use with the sentence-transformer models. The default behaviour is to split the text into chunks that fit the token window of the sentence transformer model that you would like to use.\n\ntext_splitter = SentenceTransformersTokenTextSplitter(chunk_size=1000,chunk_overlap=20, length_function = len)\n\n\ndocs = text_splitter.split_documents(pages)\n\n\nlen(docs)\n\n28\n\n\n\ndocs[0].metadata\n\n{'source': 'hms/fhl_2014_Charifson_34622 (1).pdf',\n 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf',\n 'page': 0,\n 'total_pages': 19,\n 'format': 'PDF 1.5',\n 'title': '',\n 'author': 'David',\n 'subject': '',\n 'keywords': '',\n 'creator': 'Microsoft® Office Word 2007',\n 'producer': 'Microsoft® Office Word 2007',\n 'creationDate': \"D:20140723120649-04'00'\",\n 'modDate': \"D:20140723120649-04'00'\",\n 'trapped': ''}",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html#text-embedding",
    "href": "content/Option1.html#text-embedding",
    "title": "Option 1",
    "section": "Text embedding",
    "text": "Text embedding\nEmbeddings create a vector representation of a piece of text. This is useful because it means we can think about text in the vector space, and do things like semantic search where we look for pieces of text that are most similar in the vector space.\nSentenceTransformers embeddings are called using the HuggingFaceEmbeddings integration. We have also added an alias for SentenceTransformerEmbeddings for users who are more familiar with directly using that package.\nSentenceTransformers is a python package that can generate text and image embeddings, originating from Sentence-BERT\n\nembeddings = SentenceTransformerEmbeddings()\n\n\nAnnoy\nAnnoy (Approximate Nearest Neighbors Oh Yeah) is a C++ library with Python bindings to search for points in space that are close to a given query point. It also creates large read-only file-based data structures that are mmapped into memory so that many processes may share the same data.\nNOTE: Annoy is read-only - once the index is built you cannot add any more emebddings! If you want to progressively add new entries to your VectorStore then better choose an alternative!\n\nvs2 = Annoy.from_documents(docs, embeddings)\n\n\nquery = \"what is the paper about?\"\n\n\n#the score is a distance metric, so lower is better\n\nvs2.similarity_search_with_score(query, k=3)\n\n[(Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3306306600570679),\n (Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3383784294128418),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3411223888397217)]\n\n\n\nquery2 = \"What are the scientific names of the species mentioned in this paper?\"\n\n\nvs2.similarity_search_with_score(query2, k=3)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0272287130355835),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1021348237991333),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1077861785888672)]\n\n\n\nquery3 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\n\n\nvs2.similarity_search_with_score(query3, k=3)\n\n[(Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.056341290473938),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0581932067871094),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.070095419883728)]\n\n\n\nquery4 = \"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations? \"\n\n\nvs2.similarity_search_with_score(query4, k=4)\n\n[(Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2470710277557373),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2504805326461792),\n (Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.272005558013916),\n (Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2738001346588135)]\n\n\n\nquery5 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\n\nvs2.similarity_search_with_score(query5, k=4)\n\n[(Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.056341290473938),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0581932067871094),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.070095419883728),\n (Document(page_content='charifson 10 due to logistical issues surrounding the experimental design and little replication. future studies should include more crabs, the exclusion of non - feeding crabs, and trial periods with longer time intervals. additionally, any subsequent study should utilize multivariate and geometric morphometric methods to quantify claw shape instead of using ratios, as two similar ratios may have different shape. acknowledgements : i would like to thank dianna padilla, michael labarbera, and kevin turner for advice relating to the experimental design of this study. i would also like to thank the director and staff of friday harbor laboratories for use of facilities and permission to collect organisms. friday harbor laboratories, the libbie hyman scholarship, society for integrative and comparative biology, and the stony brook department of ecology and evolution provided financial support and have my gratitude.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 9, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1006144285202026)]\n\n\n\nquery6= \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\n\nvs2.similarity_search_with_score(query6, k=4)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.018962025642395),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.073420524597168),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1218184232711792),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1521369218826294)]\n\n\n\nquery7 = \"In what habitat were the species found?\"\n\nvs2.similarity_search_with_score(query7, k=4)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9531382322311401),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9748102426528931),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.044095516204834),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0802817344665527)]\n\n\n\nquery8 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\nvs2.similarity_search_with_score(query8, k=4)\n\n[(Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0603522062301636),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0874381065368652),\n (Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1357213258743286),\n (Document(page_content='charifson 18 figure 4 : differences in propal width : carapace width ratio between sex and species. the sex factor was statistically significant ( f1, 45 = 103. 8. p &lt; 0. 001 ), while the species factor was insignificant ( f1, 45 = 0. 09, p = 0. 764 ). there was a significant interaction ( f1, 45 = 7. 19, p = 0. 01 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 h. nudus h. oregonensis propal widtht : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 17, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1512439250946045)]\n\n\n\nquery9 = \"Can you give a more specific location?\"\n\nvs2.similarity_search_with_score(query9, k=4)\n\n[(Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2532789707183838),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3255820274353027),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.362636685371399),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3639099597930908)]\n\n\n\nquery10 = \"In what habitat were the species found?\"\n\nvs2.similarity_search_with_score(query10, k=4)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9531382322311401),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9748102426528931),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.044095516204834),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0802817344665527)]\n\n\n\nquery11 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\n\nvs2.similarity_search_with_score(query11, k=4)\n\n[(Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2676454782485962),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3674745559692383),\n (Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3696166276931763),\n (Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.381576418876648)]\n\n\n\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper??\"\n\nvs2.similarity_search_with_score(query12, k=4)\n\n[(Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3229398727416992),\n (Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3319050073623657),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3328725099563599),\n (Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3340879678726196)]",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html#map-refine-document-chain",
    "href": "content/Option1.html#map-refine-document-chain",
    "title": "Option 1",
    "section": "Map Refine Document Chain",
    "text": "Map Refine Document Chain\nThe refine documents chain constructs a response by looping over the input documents and iteratively updating its answer. For each document, it passes all non-document inputs, the current document, and the latest intermediate answer to an LLM chain to get a new answer.\nSince the Refine chain only passes a single document to the LLM at a time, it is well-suited for tasks that require analyzing more documents than can fit in the model’s context. The obvious tradeoff is that this chain will make far more LLM calls than, for example, the Stuff documents chain. There are also certain tasks which are difficult to accomplish iteratively. For example, the Refine chain can perform poorly when documents frequently cross-reference one another or when a task requires detailed information from many documents.\n\nllm = ChatOpenAI()\n\n\nqa_refine = RetrievalQA.from_chain_type(llm =llm, chain_type = \"refine\", \n                                        retriever = vs2.as_retriever(),\n                                       return_source_documents = True\n                                       )\n\n\nquery = \"what is this paper about?\"\n\n#This format when we include return_source_documents\nresult = qa_refine({\"query\": query})\n\nWARNING:langchain.llms.base:Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.&lt;locals&gt;._completion_with_retry in 4.0 seconds as it raised Timeout: Request timed out: HTTPSConnectionPool(host='api.openai.com', port=443): Read timed out. (read timeout=600).\n\n\n\nresult[\"result\"]\n\n'Based on the additional context provided, it appears that the paper focuses on analyzing the consumption rates of individual H. nudus (Hermit crabs) and comparing the mean consumption rates between female and male crabs. The study includes data from eight trials, involving three female crabs (fe1 to fe3) and three male crabs (ma1 to ma3). The paper investigates whether there are differences in consumption rates among individuals that consumed snails and those that did not. The authors report the mean consumption rates along with the standard error of the mean and conduct statistical analysis, including a comparison of consumption rates between snail-consuming individuals.'\n\n\n\nresult[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery2 =\"Write a one sentence summary of the purpose of the paper\"\n\nresult2 = qa_refine({\"query\": query2})\n\n\nresult2[\"result\"]\n\n'The purpose of the paper is to analyze the differences in propal width: carapace width ratio between sexes and species of crabs, determining the statistical significance of these factors and the interaction between them using a two-way ANOVA.'\n\n\n\nresult2[\"source_documents\"]\n\n[Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 18 figure 4 : differences in propal width : carapace width ratio between sex and species. the sex factor was statistically significant ( f1, 45 = 103. 8. p &lt; 0. 001 ), while the species factor was insignificant ( f1, 45 = 0. 09, p = 0. 764 ). there was a significant interaction ( f1, 45 = 7. 19, p = 0. 01 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 h. nudus h. oregonensis propal widtht : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 17, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery4 = \"Summarize the paper concisely with reference to materials and methods.\"\n\nresult4 = qa_refine({\"query\": query4})\n\n\nresult4[\"result\"]\n\n\"Based on the additional context provided, the paper utilized SMA regressions to examine the correlation between carapace width and propal height in different groups (female and male) of two species (H. nudus and H. oregonensis). The relationship between carapace width and propal height is illustrated in Figure 1 of Charifson's study, which includes a line of best fit derived from the SMA regression. Descriptive statistics for each group can be found in Table 1a. However, no specific information about the materials and methods used in the study is provided in the given context.\"\n\n\n\nresult4[\"source_documents\"]\n\n[Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery5=\"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\"\nresult5 = qa_refine({\"query\": query5})\n\n\nresult5[\"result\"]\n\n'The additional context provided does not directly relate to the presence of observations in the paper. Therefore, the original answer remains applicable. The paper includes observations related to the consumption rates of H. nudus crabs.'\n\n\n\nresult5[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery6 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\n\n\nresult6 = qa_refine({\"query\": query6})\n\n\nresult6[\"result\"]\n\n'Based on the additional context provided, it is clear that the paper contains experimental research conducted in the natural environment or with organisms collected in nature. The author mentions logistical issues with the experimental design, the need for more replication, and the inclusion of more crabs. The acknowledgments also mention the permission to collect organisms, indicating that the study involved collecting organisms from the natural environment.'\n\n\n\nresult6[\"source_documents\"]\n\n[Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 10 due to logistical issues surrounding the experimental design and little replication. future studies should include more crabs, the exclusion of non - feeding crabs, and trial periods with longer time intervals. additionally, any subsequent study should utilize multivariate and geometric morphometric methods to quantify claw shape instead of using ratios, as two similar ratios may have different shape. acknowledgements : i would like to thank dianna padilla, michael labarbera, and kevin turner for advice relating to the experimental design of this study. i would also like to thank the director and staff of friday harbor laboratories for use of facilities and permission to collect organisms. friday harbor laboratories, the libbie hyman scholarship, society for integrative and comparative biology, and the stony brook department of ecology and evolution provided financial support and have my gratitude.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 9, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery7= \"What are the scientific names of the species mentioned in this paper?\"\n\n\nresult7 = qa_refine({\"query\": query7})\n\n\nresult7[\"result\"]\n\n'Based on the additional context provided, the paper mentions two species:\\n\\n1. H. nudus (scientific name: Hemigrapsus nudus)\\n   - Female H. nudus\\n   - Male H. nudus\\n\\n2. H. oregonensis (scientific name: Hemigrapsus oregonensis)\\n   - Female H. oregonensis\\n   - Male H. oregonensis'\n\n\n\nresult7[\"source_documents\"]\n\n[Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query7)\n\n\nquery8 = \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\n\n\nresult8 = qa_refine({\"query\": query8})\n\n\nresult8[\"result\"]\n\n'The new context provided does not mention the locations where the species were observed or collected. Therefore, the original answer remains the same. The paper does not mention the specific locations where the species were observed or collected.'\n\n\n\nresult8[\"source_documents\"]\n\n[Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery8b = \"Can you give a more specific location of where this study took place?\"\n\n\nresult8b = qa_refine({\"query\": query8b})\n\n\nresult8b[\"result\"]\n\n'Thank you for providing the additional context. However, the given information still does not specify the specific location where the study on regression analyses of carapace width and propus measures for different species of crabs (H. nudus and H. oregonensis) took place.'\n\n\n\nresult8b[\"source_documents\"]\n\n[Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query8)\n\n\nquery9 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\n\n\nresult9 = qa_refine({\"query\": query9})\n\n\nresult9[\"result\"]\n\n'Apologies for the confusion, but even with the additional context, there are no specific coordinate locations mentioned in the provided text. The text seems to revolve around analyzing differences in cw:ph and cw:pw using a two-way ANOVA. Therefore, there are still no coordinate locations given in latitude/longitude.'\n\n\n\nresult9[\"source_documents\"]\n\n[Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query9)\n\n\nquery10 = \"In what habitat were the species found?\"\n\n\nresult10 = qa_refine({\"query\": query10})\n\n\nresult10[\"result\"]\n\n'The new context provided does not mention any specific habitat information for the species. Therefore, the original answer still stands as the most accurate response. Based on the information provided in the original question and the absence of additional details in the new context, it is not possible to determine the specific habitat where the mentioned species are found.'\n\n\n\nresult10[\"source_documents\"]\n\n[Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query10)\n\n\nquery11 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\n\nresult11 = qa_refine({\"query\": query11})\n\n\nresult11[\"result\"]\n\n'Based on the new context provided, the paper does mention the propal width: carapace width ratio between sexes and species. However, there is still no mention of a specific year, date, or time when the species were collected or observed.'\n\n\n\nresult11[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 18 figure 4 : differences in propal width : carapace width ratio between sex and species. the sex factor was statistically significant ( f1, 45 = 103. 8. p &lt; 0. 001 ), while the species factor was insignificant ( f1, 45 = 0. 09, p = 0. 764 ). there was a significant interaction ( f1, 45 = 7. 19, p = 0. 01 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 h. nudus h. oregonensis propal widtht : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 17, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query11)\n\n\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper?\"\n\n\nresult12 = qa_refine({\"query\": query12})\n\n\nresult12[\"result\"]\n\n'Based on the new context provided, there is no mention of any additional maps, tables, or diagrams in the paper. Therefore, the original answer remains unchanged.'\n\n\n\nresult12[\"source_documents\"]\n\n[Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query12)",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html#pass-in-chat-history",
    "href": "content/Option1.html#pass-in-chat-history",
    "title": "Option 1",
    "section": "Pass in Chat History",
    "text": "Pass in Chat History\n\nqa_conversational2 = ConversationalRetrievalChain.from_llm(ChatOpenAI(temperature=0), vs2.as_retriever())\n\n\nchat_history = []\nresult = qa_conversational2({\"question\": query, \"chat_history\": chat_history})\n\n\nresult[\"answer\"]\n\n'Based on the provided context, the paper appears to be about various analyses and measurements related to carapace width and propus measures in different species of crabs (H. nudus and H. oregonensis). It also includes information on consumption rates of snails by individual H. nudus crabs.'\n\n\n\nresult[\"chat_history\"]\n\n[]\n\n\n\nchat_history = [(query, result[\"answer\"])]\n\nresult_conversational2 = qa_conversational2({\"question\": query, \"chat_history\": chat_history})\n\n\nresult_conversational2[\"answer\"]\n\n'The main topic of this paper is the relationship between carapace width and propus measures in H. nudus and H. oregonensis crabs.'\n\n\n\nresult_conversational2[\"chat_history\"]\n\n[('what is this paper about?',\n  'Based on the provided context, the paper appears to be about various analyses and measurements related to carapace width and propus measures in different species of crabs (H. nudus and H. oregonensis). It also includes information on consumption rates of snails by individual H. nudus crabs.')]",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Option1.html#return-source-documents",
    "href": "content/Option1.html#return-source-documents",
    "title": "Option 1",
    "section": "Return Source Documents",
    "text": "Return Source Documents\n\nqa_conversational3 = ConversationalRetrievalChain.from_llm(ChatOpenAI(temperature=0), vs2.as_retriever(), return_source_documents=True)\n\n\n\n\nchat_history = []\nresult = qa_conversational3({\"question\": query, \"chat_history\": chat_history})\n\n\nresult[\"answer\"]\n\n'Based on the provided context, the paper appears to be about various analyses and measurements related to carapace width and propus measures in different species of crabs (H. nudus and H. oregonensis). It also includes information on consumption rates of snails by individual H. nudus crabs.'\n\n\n\nresult[\"chat_history\"]\n\n[]\n\n\n\nresult['source_documents'][0]\n\nDocument(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult2 = qa_conversational3({\"question\": query2, \"chat_history\": chat_history})\n\n\nresult2[\"answer\"]\n\n'The purpose of the paper is to analyze the relationship between carapace width and propal height/width in different species and sexes of crabs.'\n\n\n\nresult2[\"chat_history\"]\n\n[]\n\n\n\nresult2[\"source_documents\"][0]\n\nDocument(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult3 = qa_conversational3({\"question\": query3, \"chat_history\": chat_history})\n\n\nresult3[\"answer\"]\n\n'The author of the paper is not mentioned in the given context.'\n\n\n\nresult4 = qa_conversational3({\"question\": query4, \"chat_history\": chat_history})\n\n\nresult4[\"answer\"]\n\n'The paper analyzed the relationship between carapace width and propal height and width in different species of Hemigrapsus crabs. The authors used a two-way ANOVA to compare the differences in carapace width to propal height and width. They performed SMA regressions to determine the relationship between carapace width and propal height and width in female and male H. nudus and H. oregonensis crabs. The results were presented in tables and figures, showing the line of best fit and descriptive statistics for each species and gender.'\n\n\n\nresult4[\"source_documents\"][0]\n\nDocument(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult5 = qa_conversational3({\"question\": query5, \"chat_history\": chat_history})\n\n\nresult5[\"answer\"]\n\n'Based on the provided context, it is not clear whether the paper includes one or more specific observations.'\n\n\n\nresult5[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nresult6 = qa_conversational3({\"question\": query6, \"chat_history\": chat_history})\n\n\nresult6[\"answer\"]\n\n'Based on the given context, it appears that the research described in the paper is experimental research conducted in the natural environment with organisms collected in nature. The acknowledgements section mentions the permission to collect organisms and the use of facilities at Friday Harbor Laboratories.'\n\n\n\nresult6[\"chat_history\"]\n\n[]\n\n\n\nresult6[\"source_documents\"][0]\n\nDocument(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult7 = qa_conversational3({\"question\": query7, \"chat_history\": chat_history})\n\n\nresult7[\"answer\"]\n\n'The scientific names of the species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis.'\n\n\n\nresult7[\"source_documents\"][0]\n\nDocument(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult8 = qa_conversational3({\"question\": query8, \"chat_history\": chat_history})\n\n\nresult8[\"answer\"]\n\n'No, the paper does not mention specific locations where the species were observed or collected.'\n\n\n\nresult8[\"source_documents\"][0]\n\nDocument(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult9 = qa_conversational3({\"question\": query9, \"chat_history\": chat_history})\n\n\nresult9['answer']\n\n'No, there are no coordinate locations given in latitude/longitude in the provided context.'\n\n\n\nresult9[\"source_documents\"][0]\n\nDocument(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult10 = qa_conversational3({\"question\": query10, \"chat_history\": chat_history})\n\n\nresult10[\"answer\"]\n\n'The species were found in water and in finer sediment.'\n\n\n\nresult10[\"source_documents\"][0]\n\nDocument(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult11 = qa_conversational3({\"question\": query11, \"chat_history\": chat_history})\n\n\nresult11[\"answer\"]\n\n'No, the paper does not mention a year, date, or time that species were collected or observed.'\n\n\n\nresult11[\"source_documents\"][0]\n\nDocument(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult12 = qa_conversational3({\"question\": query12, \"chat_history\": chat_history})\n\n\nresult12[\"answer\"]\n\n'Yes, there are figures in the paper. Figure 1 shows the relationship between carapace width and propal height in different species and genders of Hemigrapsus crabs. Figure 2 shows the relationship between carapace width and propal width in the same species and genders. There are also tables mentioned in the text, such as Table 1a and Table 1b, which provide descriptive statistics for the figures.'\n\n\n\nresult12[\"source_documents\"][0]\n\nDocument(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})",
    "crumbs": [
      "Option 1 Notebook"
    ]
  },
  {
    "objectID": "content/Text_Difference_Checker.html",
    "href": "content/Text_Difference_Checker.html",
    "title": "Script to read in directories (folders) for each paper",
    "section": "",
    "text": "Inspiration for this notebook: https://medium.com/@zhangkd5/a-tutorial-for-difflib-a-powerful-python-standard-library-to-compare-textual-sequences-096d52b4c843\n\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the text files\npath_to_file_a = '0003_bv172tc9618_0003_print.txt'\npath_to_file_b = '0003_bv172tc9618_0003_print.txt'\n\n# Read the contents of the files\nwith open(path_to_file_a, 'r', encoding='utf-8') as file:\n    a = file.read()\n\nwith open(path_to_file_b, 'r', encoding='utf-8') as file:\n    b = file.read()\n\n# Calculate the similarity ratio using SequenceMatcher\nseq_match = SequenceMatcher(None, a, b)\nratio = seq_match.ratio()\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Generate the HTML diff\nhtml_diff = d.make_file(a.splitlines(), b.splitlines())\n\n# Add the similarity ratio to the HTML diff\nratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio:.2f}&lt;/h2&gt;\\n\" + html_diff\n\n# Save the diff to an HTML file\nwith open('0003_bv172tc9618_0003_print_verify.html', 'w', encoding='utf-8') as f:\n    f.write(ratio_html)\n\n\nScript to read in directories (folders) for each paper\n\nimport os\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the directories\npath_to_folder_a = './PrintModelText/PrintModelText/zz472cp8582_jpg/txt'\npath_to_folder_b = './PrivateModel_V3/PrivateModel_V3/zz472cp8582_jpg_v3/txt'\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Get the list of files in each directory\nfiles_a = sorted(os.listdir(path_to_folder_a))\nfiles_b = sorted(os.listdir(path_to_folder_b))\n\n# Ensure both directories have the same number of files\nif len(files_a) != len(files_b):\n    print(\"Error: The directories do not contain the same number of files.\")\n    exit() # exits program is both directories dont have the same number of files\n\n# Compare each pair of files\nfor file_a, file_b in zip(files_a, files_b):\n    # Read the contents of the files\n    with open(os.path.join(path_to_folder_a, file_a), 'r', encoding='utf-8') as fa:\n        a = fa.read()\n    \n    with open(os.path.join(path_to_folder_b, file_b), 'r', encoding='utf-8') as fb:\n        b = fb.read()\n    \n    # Calculate the similarity ratio using SequenceMatcher\n    seq_match = SequenceMatcher(None, a, b)\n    ratio = seq_match.ratio() #calculates the similarity ratios between a & b\n    ratio_percentage = ratio * 100\n    \n    # Generate the HTML diff report on the differences. splitlines() is used to split the content into individual lines\n    html_diff = d.make_file(a.splitlines(), b.splitlines())\n    \n    # Add the similarity ratio to the HTML diff. Ratio is formatted to two decimal places\n    ratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio_percentage:.2f}%&lt;/h2&gt;\\n\" + html_diff\n    \n    # Define the output file name\n    output_file_name = os.path.splitext(file_a)[0] + '_diff.html'\n    \n    # Save the diff to an HTML file\n    with open(output_file_name, 'w', encoding='utf-8') as f:\n        f.write(ratio_html)\n    \n    print(f\"Processed: {output_file_name}\")\n\nprint(\"All files have been processed.\")\n\nProcessed: 0001_zz472cp8582_0001_diff.html\nProcessed: 0002_zz472cp8582_0002_diff.html\nProcessed: 0003_zz472cp8582_0003_diff.html\nProcessed: 0004_zz472cp8582_0004_diff.html\nProcessed: 0005_zz472cp8582_0005_diff.html\nProcessed: 0006_zz472cp8582_0006_diff.html\nProcessed: 0007_zz472cp8582_0007_diff.html\nProcessed: 0008_zz472cp8582_0008_diff.html\nProcessed: 0009_zz472cp8582_0009_diff.html\nProcessed: 0010_zz472cp8582_0010_diff.html\nProcessed: 0011_zz472cp8582_0011_diff.html\nProcessed: 0012_zz472cp8582_0012_diff.html\nProcessed: 0013_zz472cp8582_0013_diff.html\nProcessed: 0014_zz472cp8582_0014_diff.html\nProcessed: 0015_zz472cp8582_0015_diff.html\nProcessed: 0016_zz472cp8582_0016_diff.html\nProcessed: 0017_zz472cp8582_0017_diff.html\nAll files have been processed.\n\n\n\n\nScript to print out Similarity Ratio (%) for each page per paper\n\nimport os\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the directories\npath_to_folder_a = './PrintModelText/PrintModelText/bv172tc9618_jpg/txt'\npath_to_folder_b = './PrivateModel_V3/PrivateModel_V3/bv172tc9618_jpg_v3/txt'\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Get the list of files in each directory\nfiles_a = sorted(os.listdir(path_to_folder_a))\nfiles_b = sorted(os.listdir(path_to_folder_b))\n\n# Ensure both directories have the same number of files\nif len(files_a) != len(files_b):\n    print(\"Error: The directories do not contain the same number of files.\")\n    exit()\n\n# Store results for the table\nresults = []\n\n# Compare each pair of files\nfor file_a, file_b in zip(files_a, files_b):\n    # Read the contents of the files\n    with open(os.path.join(path_to_folder_a, file_a), 'r', encoding='utf-8') as fa:\n        a = fa.read()\n    \n    with open(os.path.join(path_to_folder_b, file_b), 'r', encoding='utf-8') as fb:\n        b = fb.read()\n    \n    # Calculate the similarity ratio using SequenceMatcher\n    seq_match = SequenceMatcher(None, a, b)\n    ratio = seq_match.ratio()\n    ratio_percentage = ratio * 100\n    \n    # Generate the HTML diff\n    html_diff = d.make_file(a.splitlines(), b.splitlines())\n    \n    # Add the similarity ratio to the HTML diff\n    ratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio_percentage:.2f}%&lt;/h2&gt;\\n\" + html_diff\n    \n    # Define the output file name\n    output_file_name = os.path.splitext(file_a)[0] + '_comp.html'\n    \n    # Save the diff to an HTML file\n    with open(output_file_name, 'w', encoding='utf-8') as f:\n        f.write(ratio_html)\n    \n    # Print out the processed file\n    print(f\"Processed: {output_file_name}\")\n    \n    # Append the result to the list\n    file_base_name = os.path.splitext(file_a)[0]\n    results.append((file_base_name, ratio_percentage))\n\nprint(\"All files have been processed.\")\n\n# Print out the table\nprint(\"\\nComparison Results:\")\nprint(f\"{'File Name and Page Number':&lt;30} {'Similarity Ratio (%)':&lt;20}\")\nprint(\"=\" * 50)\nfor result in results:\n    print(f\"{result[0]:&lt;30} {result[1]:&lt;20.2f}\")\n\n\nProcessed: 0001_bv172tc9618_0001_comp.html\nProcessed: 0002_bv172tc9618_0002_comp.html\nProcessed: 0003_bv172tc9618_0003_comp.html\nProcessed: 0004_bv172tc9618_0004_comp.html\nProcessed: 0005_bv172tc9618_0005_comp.html\nProcessed: 0006_bv172tc9618_0006_comp.html\nProcessed: 0007_bv172tc9618_0007_comp.html\nProcessed: 0008_bv172tc9618_0008_comp.html\nProcessed: 0009_bv172tc9618_0009_comp.html\nProcessed: 0010_bv172tc9618_0010_comp.html\nProcessed: 0011_bv172tc9618_0011_comp.html\nProcessed: 0012_bv172tc9618_0012_comp.html\nProcessed: 0013_bv172tc9618_0013_comp.html\nProcessed: 0014_bv172tc9618_0014_comp.html\nAll files have been processed.\n\nComparison Results:\nFile Name and Page Number      Similarity Ratio (%)\n==================================================\n0001_bv172tc9618_0001          15.33               \n0002_bv172tc9618_0002          8.80                \n0003_bv172tc9618_0003          19.17               \n0004_bv172tc9618_0004          37.14               \n0005_bv172tc9618_0005          9.09                \n0006_bv172tc9618_0006          39.30               \n0007_bv172tc9618_0007          4.11                \n0008_bv172tc9618_0008          27.47               \n0009_bv172tc9618_0009          3.04                \n0010_bv172tc9618_0010          11.35               \n0011_bv172tc9618_0011          8.27                \n0012_bv172tc9618_0012          50.11               \n0013_bv172tc9618_0013          21.28               \n0014_bv172tc9618_0014          44.60",
    "crumbs": [
      "Text Checker Outputs",
      "difflib Transkribus Output Text Checker Notebook"
    ]
  },
  {
    "objectID": "content/code.html",
    "href": "content/code.html",
    "title": "Rendering with Code",
    "section": "",
    "text": "You can have code (R, Python or Julia) in your qmd file. You will need to have these installed on your local computer, but presumably you do already if you are adding code to your qmd files.\nx &lt;- c(5, 15, 25, 35, 45, 55)\ny &lt;- c(5, 20, 14, 32, 22, 38)\nlm(x ~ y)\n\n\nCall:\nlm(formula = x ~ y)\n\nCoefficients:\n(Intercept)            y  \n      1.056        1.326"
  },
  {
    "objectID": "content/code.html#modify-the-github-action",
    "href": "content/code.html#modify-the-github-action",
    "title": "Rendering with Code",
    "section": "Modify the GitHub Action",
    "text": "Modify the GitHub Action\nYou will need to change the GitHub Action in .github/workflows to install these and any needed packages in order for GitHub to be able to render your webpage. The GitHub Action install R since I used that in code.qmd. If you use Python or Julia instead, then you will need to update the GitHub Action to install those.\nIf getting the GitHub Action to work is too much hassle (and that definitely happens), you can alway render locally and publish to the gh-pages branch. If you do this, make sure to delete or rename the GitHub Action to something like\nrender-and-publish.old_yml\nso GitHub does not keep trying to run it. Nothing bad will happen if you don’t do this, but if you are not using the action (because it keeps failing), then you don’t need GitHub to run it."
  },
  {
    "objectID": "content/code.html#render-locally-and-publish-to-gh-pages-branch",
    "href": "content/code.html#render-locally-and-publish-to-gh-pages-branch",
    "title": "Rendering with Code",
    "section": "Render locally and publish to gh-pages branch",
    "text": "Render locally and publish to gh-pages branch\nTo render locally and push up to the gh-pages branch, open a terminal window and then cd to the directory with the Quarto project. Type this in the terminal:\nquarto render gh-pages"
  },
  {
    "objectID": "content/experiments.html",
    "href": "content/experiments.html",
    "title": "experiments",
    "section": "",
    "text": "Code\npip install pandas",
    "crumbs": [
      "Experiments"
    ]
  },
  {
    "objectID": "content/experiments.html#getting-to-know-llms-and-langchain",
    "href": "content/experiments.html#getting-to-know-llms-and-langchain",
    "title": "experiments",
    "section": "Getting to know LLMs and LangChain",
    "text": "Getting to know LLMs and LangChain\nA foundational element of using LangChain as a wrapper for large language models (LLMs) like GPT4 is the prompt. A prompt in the LLM context is just like a prompt in the usual context: it’s a thoughtfully designed question meant to elicit a response. If you want to use an LLM to explore text, it is critically important to design an effective prompt that will help the model generate accurate and helpful responses. We are exploring the use of LLMs to help us “read” undergraduate student research papers in marine science and figure out if the paper contains a species occurrence. That is, did the student observe or collect a given species at a given place during the course of their research? If they did, that kind of information is a species occurrence (species + place + date).\nTo explore the potential for using LLMs in this work, we selected a few online tools that are designed to help the user ask questions about text provided to the application. We picked a few student papers at random (all open access) and iterated on a series of questions to learn how to engineer prompts that might give us the information we need to determine if a paper includes a species occurrence. This was our process and what we found.",
    "crumbs": [
      "Experiments"
    ]
  },
  {
    "objectID": "content/experiments.html#tools-we-tried",
    "href": "content/experiments.html#tools-we-tried",
    "title": "experiments",
    "section": "Tools we tried",
    "text": "Tools we tried\n\nChat My Data 📝 ChatPDF 📝 Ask My PDF\n\nChat My Data\nChatPDF\nAsk My PDF\n\nThe first question we gave to each chat tool was, “What is this paper about?”",
    "crumbs": [
      "Experiments"
    ]
  },
  {
    "objectID": "content/experiments.html#testing-architectures",
    "href": "content/experiments.html#testing-architectures",
    "title": "experiments",
    "section": "Testing Architectures",
    "text": "Testing Architectures\nHaving experimented with prompts across some pre-made conversational tools, the next step is to explore different combinations of tools/methods for 1. Load, 2. Transform (Text splitting), 3. Embed, 4. Store, 5. Retrieve (Vector store query). We came up with four main options (below) with some possible variations (see the yellow arrows).\n\n\nCode\nneato`\ndigraph {\n    nodesep=0.5;\n    labelloc = \"b\"\n    fontname = Arial\n    node [\n        shape = rectangle\n        width = 1.5\n        color= lightgray\n        style = filled\n        fontname=\"Helvetica,Arial,sans-serif\"\n    ]\n    edge [\n    len = 2 \n    penwidth = 1.5 \n    arrowhead=open\n    color= darkgray\n\n  ]\n    start = regular\n    normalize = 0\n\n    subgraph cluster_0 {\n        style=filled;\n        color= deepskyblue;\n        node [style=filled,color=white];\n        SentenceTransformers -&gt; SentenceTransformerEmbeddings -&gt; Annoy -&gt; MultiQueryRetriever;\n        label = \"Option #1\";\n    }\n\n    subgraph cluster_1 {\n        style=filled;\n        color= yellowgreen;\n        node [style=filled,color=white];\n        TikToken -&gt; OpenAIEmbeddings -&gt; FAISS -&gt; ContextualCompression;\n        label = \"Option #2\";\n    }\n\nsubgraph cluster_2 {\n        style=filled;\n        color= orange;\n        node [style=filled,color=white];\n        NLTK -&gt; LlamaCCP -&gt; Chroma -&gt; ChromaSelfQuerying;\n        label = \"Option #3\";\n    }\n\nsubgraph cluster_3 {\n        style=filled;\n        color= deeppink;\n        node [style=filled,color=white];\n        SpaCY -&gt; SpaCYEmbeddings -&gt; Chroma2 -&gt; ChromaSelfQuerying2;\n        label = \"Option #4\";\n    }\n\nsubgraph cluster_4 {\n        margin=40\n        style=filled;\n        color= gray;\n        node [style=filled,color=white];\n        rankdir=LR;\n        Stuffing, Refine, MapReduce, MapReRank;\n    }\n\n\n    source -&gt; PyMuPDF;\n  PyMuPDF -&gt; SentenceTransformers;\n  PyMuPDF -&gt; TikToken;\n  PyMuPDF -&gt; NLTK;\n  PyMuPDF -&gt; SpaCY;\n  MultiQueryRetriever -&gt; Stuffing [color = lightblue]\n  MultiQueryRetriever -&gt; Refine [color = lightblue]\n  MultiQueryRetriever -&gt; MapReduce [color = lightblue]\n  MultiQueryRetriever -&gt; MapReRank [color = lightblue]\n  ContextualCompression -&gt; Stuffing [color = lightblue]\n  ContextualCompression -&gt; Refine [color = lightblue]\n  ContextualCompression -&gt; MapReduce [color = lightblue]\n  ContextualCompression -&gt; MapReRank [color = lightblue]\n  ChromaSelfQuerying -&gt; Stuffing [color = lightblue]\n  ChromaSelfQuerying -&gt; Refine [color = lightblue]\n  ChromaSelfQuerying -&gt; MapReduce [color = lightblue]\n  ChromaSelfQuerying -&gt; MapReRank [color = lightblue]\n  ChromaSelfQuerying2 -&gt; Stuffing [color = lightblue]\n  ChromaSelfQuerying2 -&gt; Refine [color = lightblue]\n  ChromaSelfQuerying2 -&gt; MapReduce [color = lightblue]\n  ChromaSelfQuerying2 -&gt; MapReRank [color = lightblue]\n    FAISS -&gt; MultiQueryRetriever [color = yellow]\n  Annoy -&gt; ContextualCompression [color = yellow]\n  LlamaCCP -&gt; FAISS [color = yellow]\n  OpenAIEmbeddings -&gt; Annoy [color = yellow] \n\n    source [shape=Msquare];\n}\n`\n\n\n\n\n\n\n\n\n\nCode\nneato = require(\"@observablehq/graphviz@0.2\")",
    "crumbs": [
      "Experiments"
    ]
  },
  {
    "objectID": "content/pytesseract.html",
    "href": "content/pytesseract.html",
    "title": "PyTesseract",
    "section": "",
    "text": "The “Citation variations” approach is yielding about a 20% failure rate, mostly due to OCR errors that throw off the text-matching to citation terms. We discussed the idea of starting with images and trying to optimize the OCR results, rather than reverse engineer fixes to deal with poor OCR. As a result, we decided to use OpenCV to enhance the OCR’d student papers in hopes to increase the detection of citation pages leading to proper removal prior to the ingestion process.\nOpenCV (Open Computer Vision Library) is an open source library of programming functions aimed for real-time computer vision. CV tasks include methods for acquiring, processing and analyzing digital images and extraction of data to produce numerical or symbolic information. Alex has not used OpenCV before so he read up on the documentation and went through the OpenCV Bootcamp , a 3-hr course on how to manipulate images and videos, and detect objects and faces.\nOptical Character Recognition (OCR) is a foundational technology behind the conversion of typed, handwritten, or printed text from images into machine-encoded text. OCR transforms a 2D image of text (machine or hand-written) from its image form into a machine-readable text. The OCR process generally consists of several sub-processes:\nPre-processing of image Text Localization Character Segmentation Character Recognition Post Processing\nThere are alot of OCR software available but one of the most popular is Tesseract. Python Tesseract (Pytesseract) is a Python library that serves as a wrapper for Google’s Tesseract-OCR engine. Essentially, it allows developers to use Tesseract’s OCR engine via Python.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#motivation-for-pytesseract-approach",
    "href": "content/pytesseract.html#motivation-for-pytesseract-approach",
    "title": "PyTesseract",
    "section": "",
    "text": "The “Citation variations” approach is yielding about a 20% failure rate, mostly due to OCR errors that throw off the text-matching to citation terms. We discussed the idea of starting with images and trying to optimize the OCR results, rather than reverse engineer fixes to deal with poor OCR. As a result, we decided to use OpenCV to enhance the OCR’d student papers in hopes to increase the detection of citation pages leading to proper removal prior to the ingestion process.\nOpenCV (Open Computer Vision Library) is an open source library of programming functions aimed for real-time computer vision. CV tasks include methods for acquiring, processing and analyzing digital images and extraction of data to produce numerical or symbolic information. Alex has not used OpenCV before so he read up on the documentation and went through the OpenCV Bootcamp , a 3-hr course on how to manipulate images and videos, and detect objects and faces.\nOptical Character Recognition (OCR) is a foundational technology behind the conversion of typed, handwritten, or printed text from images into machine-encoded text. OCR transforms a 2D image of text (machine or hand-written) from its image form into a machine-readable text. The OCR process generally consists of several sub-processes:\nPre-processing of image Text Localization Character Segmentation Character Recognition Post Processing\nThere are alot of OCR software available but one of the most popular is Tesseract. Python Tesseract (Pytesseract) is a Python library that serves as a wrapper for Google’s Tesseract-OCR engine. Essentially, it allows developers to use Tesseract’s OCR engine via Python.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#purpose-of-h-in-fastnlmeansdenoising",
    "href": "content/pytesseract.html#purpose-of-h-in-fastnlmeansdenoising",
    "title": "PyTesseract",
    "section": "Purpose of h in fastNlMeansDenoising:",
    "text": "Purpose of h in fastNlMeansDenoising:\nHigher Values of h: Increase the amount of noise that is removed. Risk of removing more details from the image, which can cause blurring or loss of important features like edges or text.\nLower Values of h: Keep more details intact. Less aggressive noise removal, which may leave some noise in the image.\nExplanation: The fastNlMeansDenoising() function is based on the Non-Local Means (NL-Means) algorithm, which removes noise by averaging similar pixels in a neighborhood. The h parameter controls how much weight is given to similar pixels when averaging.\n\nSmall h values focus more on retaining the original pixel values, which may not be enough to remove noise.\nLarge h values smooth the image more aggressively to reduce noise but can also blur fine details, especially in images with text.\n\nTypical Usage: For scanned documents or images with text, you might start with a moderate h value (e.g., 10-20). You can adjust it based on the quality of the input and the desired level of denoising.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#purpose-of-templatewindowsize",
    "href": "content/pytesseract.html#purpose-of-templatewindowsize",
    "title": "PyTesseract",
    "section": "Purpose of templateWindowSize:",
    "text": "Purpose of templateWindowSize:\nPurpose: This parameter defines the size of the window around each pixel that will be used to find similar patches in the image for denoising.\nExplanation: The algorithm looks at a small square neighborhood around each pixel, called the “template window.” This window is used as a reference to find similar patches in a larger area (defined by searchWindowSize).\nValue: It must be an odd number, like 7, 9, 11, etc. A typical default value is 7.\nEffect:\nSmaller templateWindowSize (e.g., 7): Focuses on a smaller area around each pixel. This is faster but might not be as accurate in removing noise in larger areas. Larger templateWindowSize (e.g., 21): Considers a larger neighborhood for similarity comparison. This can improve denoising, especially for large-scale noise, but is computationally more expensive.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#purpose-of-searchwindowsize",
    "href": "content/pytesseract.html#purpose-of-searchwindowsize",
    "title": "PyTesseract",
    "section": "Purpose of searchWindowSize:",
    "text": "Purpose of searchWindowSize:\nPurpose: This parameter defines the size of the window where the algorithm searches for similar patches to the reference patch (defined by templateWindowSize).\nExplanation: After selecting the template window, the algorithm looks for similar patches within a larger search window. The size of this search window determines how far the algorithm will look to find similar regions.\nValue: It must be an odd number, like 21, 31, 41, etc. A typical default value is 21.\nEffect:\nSmaller searchWindowSize (e.g., 21): Limits the search to a smaller area around the pixel. This is faster but may miss similar patches further away. Larger searchWindowSize (e.g., 31 or 41): Allows searching in a wider area for similar patches, which can improve noise removal, especially in textured regions, but it is slower.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#following-outputs-of-pytesseract-ocr-notebook",
    "href": "content/pytesseract.html#following-outputs-of-pytesseract-ocr-notebook",
    "title": "PyTesseract",
    "section": "Following outputs of PyTesseract OCR Notebook",
    "text": "Following outputs of PyTesseract OCR Notebook\nWe are looking at the effects of modifying the parameters h (regulating filter strength), templateWindowSize (size in pixels of the window used to compute the weighted average for a given pixel), and searchWindowSize (Size in pixels of the window used to search for similar patches). Below are papers with each of the parameters printed on the output. The left is the original OCR’d image and right is the newly OCR’d output.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#bg870mr8040",
    "href": "content/pytesseract.html#bg870mr8040",
    "title": "PyTesseract",
    "section": "bg870mr8040",
    "text": "bg870mr8040",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#bj170wc5114_",
    "href": "content/pytesseract.html#bj170wc5114_",
    "title": "PyTesseract",
    "section": "bj170wc5114_",
    "text": "bj170wc5114_",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#ch792bx6307-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#ch792bx6307-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "ch792bx6307; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "ch792bx6307; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#ch792bx6307-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#ch792bx6307-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "ch792bx6307; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "ch792bx6307; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#ch792bx6307-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#ch792bx6307-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "ch792bx6307; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "ch792bx6307; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#cj258ns3486-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#cj258ns3486-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "cj258ns3486; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "cj258ns3486; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#cj258ns3486-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#cj258ns3486-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "cj258ns3486; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "cj258ns3486; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#cj258ns3486-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#cj258ns3486-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "cj258ns3486; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "cj258ns3486; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#dj224jp8743-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#dj224jp8743-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "dj224jp8743; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "dj224jp8743; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#dj224jp8743-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#dj224jp8743-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "dj224jp8743; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "dj224jp8743; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#dj224jp8743-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#dj224jp8743-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "dj224jp8743; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "dj224jp8743; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#dq995jh3669-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#dq995jh3669-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "dq995jh3669; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "dq995jh3669; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#dq995jh3669-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#dq995jh3669-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "dq995jh3669; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "dq995jh3669; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#dq995jh3669-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#dq995jh3669-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "dq995jh3669; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "dq995jh3669; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#fy246vw6211-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#fy246vw6211-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "fy246vw6211; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "fy246vw6211; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#fy246vw6211-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#fy246vw6211-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "fy246vw6211; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "fy246vw6211; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#fy246vw6211-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#fy246vw6211-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "fy246vw6211; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "fy246vw6211; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#gp441gd9761-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#gp441gd9761-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "gp441gd9761; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "gp441gd9761; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#gp441gd9761-h-25-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#gp441gd9761-h-25-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "gp441gd9761; h = 25, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "gp441gd9761; h = 25, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#gp441gd9761-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#gp441gd9761-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "gp441gd9761; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "gp441gd9761; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#gx021jv8425-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#gx021jv8425-h-10-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "gx021jv8425; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "gx021jv8425; h = 10, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#gx021jv8425-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#gx021jv8425-h-15-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "gx021jv8425; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "gx021jv8425; h = 15, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/pytesseract.html#gx021jv8425-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "href": "content/pytesseract.html#gx021jv8425-h-20-templatewindowsize-7-default-searchwindowsize-21-default",
    "title": "PyTesseract",
    "section": "gx021jv8425; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "text": "gx021jv8425; h = 20, templateWindowSize = 7 (default) & searchWindowSize = 21 (default)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers"
    ]
  },
  {
    "objectID": "content/add-content.html",
    "href": "content/add-content.html",
    "title": "Customize",
    "section": "",
    "text": "Edit the qmd or md files in the content folder. qmd files can include code (R, Python, Julia) and lots of Quarto markdown bells and whistles (like call-outs, cross-references, auto-citations and much more).\nEach page should start with\n---\ntitle: your title\n---\nand the first header will be the 2nd level, so ##. Note, there are situations where you leave off\n---\ntitle: your title\n---\nand start the qmd file with a level header #, but if using the default title yaml (in the --- fence) is a good habit since it makes it easy for Quarto convert your qmd file to other formats (like into a presentation)."
  },
  {
    "objectID": "content/add-content.html#edit-and-add-your-pages",
    "href": "content/add-content.html#edit-and-add-your-pages",
    "title": "Customize",
    "section": "",
    "text": "Edit the qmd or md files in the content folder. qmd files can include code (R, Python, Julia) and lots of Quarto markdown bells and whistles (like call-outs, cross-references, auto-citations and much more).\nEach page should start with\n---\ntitle: your title\n---\nand the first header will be the 2nd level, so ##. Note, there are situations where you leave off\n---\ntitle: your title\n---\nand start the qmd file with a level header #, but if using the default title yaml (in the --- fence) is a good habit since it makes it easy for Quarto convert your qmd file to other formats (like into a presentation)."
  },
  {
    "objectID": "content/add-content.html#add-your-pages-the-project",
    "href": "content/add-content.html#add-your-pages-the-project",
    "title": "Customize",
    "section": "Add your pages the project",
    "text": "Add your pages the project\n\nAdd the files to _quarto.yml"
  },
  {
    "objectID": "content/rmarkdown.html",
    "href": "content/rmarkdown.html",
    "title": "R Markdown",
    "section": "",
    "text": "You can include R Markdown files in your project."
  },
  {
    "objectID": "content/rmarkdown.html#r-markdown",
    "href": "content/rmarkdown.html#r-markdown",
    "title": "R Markdown",
    "section": "R Markdown",
    "text": "R Markdown\nThis is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see http://rmarkdown.rstudio.com.\nWhen you click the Knit button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:\n\nsummary(cars)\n\n     speed           dist       \n Min.   : 4.0   Min.   :  2.00  \n 1st Qu.:12.0   1st Qu.: 26.00  \n Median :15.0   Median : 36.00  \n Mean   :15.4   Mean   : 42.98  \n 3rd Qu.:19.0   3rd Qu.: 56.00  \n Max.   :25.0   Max.   :120.00"
  },
  {
    "objectID": "content/rmarkdown.html#including-plots",
    "href": "content/rmarkdown.html#including-plots",
    "title": "R Markdown",
    "section": "Including Plots",
    "text": "Including Plots\nYou can also embed plots, for example:\n\n\n\n\n\n\n\n\n\nNote that the echo = FALSE parameter was added to the code chunk to prevent printing of the R code that generated the plot."
  },
  {
    "objectID": "content/rendering.html",
    "href": "content/rendering.html",
    "title": "Rendering",
    "section": "",
    "text": "The repo includes a GitHub Action that will render (build) the website automatically when you make changes to the files. It will be pushed to the gh-pages branch.\nBut when you are developing your content, you will want to render it locally."
  },
  {
    "objectID": "content/rendering.html#step-1.-make-sure-you-have-a-recent-rstudio",
    "href": "content/rendering.html#step-1.-make-sure-you-have-a-recent-rstudio",
    "title": "Rendering",
    "section": "Step 1. Make sure you have a recent RStudio",
    "text": "Step 1. Make sure you have a recent RStudio\nHave you updated RStudio since about August 2022? No? Then update to a newer version of RStudio. In general, you want to keep RStudio updated and it is required to have a recent version to use Quarto."
  },
  {
    "objectID": "content/rendering.html#step-2.-clone-and-create-rstudio-project",
    "href": "content/rendering.html#step-2.-clone-and-create-rstudio-project",
    "title": "Rendering",
    "section": "Step 2. Clone and create RStudio project",
    "text": "Step 2. Clone and create RStudio project\nFirst, clone the repo onto your local computer. How? You can click File &gt; New Project and then select “Version Control”. Paste in the url of the repository. That will clone the repo on to your local computer. When you make changes, you will need to push those up."
  },
  {
    "objectID": "content/rendering.html#step-3.-render-within-rstudio",
    "href": "content/rendering.html#step-3.-render-within-rstudio",
    "title": "Rendering",
    "section": "Step 3. Render within RStudio",
    "text": "Step 3. Render within RStudio\nRStudio will recognize that this is a Quarto project by the presence of the _quarto.yml file and will see the “Build” tab. Click the “Render website” button to render to the _site folder.\nPreviewing: You can either click index.html in the _site folder and specify “preview in browser” or set up RStudio to preview to the viewer panel. To do the latter, go to Tools &gt; Global Options &gt; R Markdown. Then select “Show output preview in: Viewer panel”."
  },
  {
    "objectID": "architectures.html",
    "href": "architectures.html",
    "title": "Architecture options for taxa",
    "section": "",
    "text": "Optional Architectures\nThese are some of the options we want to try out and compare. The yellow lines indicate possible alternates.\n\nneato`\ndigraph {\n    labelloc = \"b\"\n    fontname = Arial\n    node [\n        shape = rectangle\n        width = 1.5\n        color= lightgray\n        style = filled\n        fontname=\"Helvetica,Arial,sans-serif\"\n    ]\n    edge [\n    len = 2 \n    penwidth = 1.5 \n    arrowhead=open\n    color= darkgray\n  ]\n    start = regular\n    normalize = 0\n\n    subgraph cluster_0 {\n        style=filled;\n        color= deepskyblue;\n        node [style=filled,color=white];\n        SentenceTransformers -&gt; SentenceTransformerEmbeddings -&gt; Annoy -&gt; MultiQueryRetriever;\n        label = \"Option #1\";\n    }\n\n    subgraph cluster_1 {\n        style=filled;\n        color= yellowgreen;\n        node [style=filled,color=white];\n        TikToken -&gt; OpenAIEmbeddings -&gt; FAISS -&gt; ContextualCompression;\n        label = \"Option #2\";\n    }\n\nsubgraph cluster_2 {\n        style=filled;\n        color= orange;\n        node [style=filled,color=white];\n        NLTK -&gt; LlamaCCP -&gt; Pinecone -&gt; PineconeSelfQuerying;\n        label = \"Option #3\";\n    }\n\nsubgraph cluster_3 {\n        style=filled;\n        color= deeppink;\n        node [style=filled,color=white];\n        SpaCY -&gt; SpaCYEmbeddings -&gt; Chroma -&gt; ChromaSelfQuerying;\n        label = \"Option #4\";\n    }\n\n\n    source -&gt; PyMuPDF;\n  PyMuPDF -&gt; SentenceTransformers;\n  PyMuPDF -&gt; TikToken;\n  PyMuPDF -&gt; NLTK;\n  PyMuPDF -&gt; SpaCY;\n    FAISS -&gt; MultiQueryRetriever [color = yellow]\n  Annoy -&gt; ContextualCompression [color = yellow]\n  LlamaCCP -&gt; FAISS [color = yellow]\n  LlamaCCP -&gt; Chroma [color = yellow] \n  SpaCYEmbeddings -&gt; Pinecone [color = yellow] \n  OpenAIEmbeddings -&gt; Annoy [color = yellow] \n\n    source [shape=Msquare];\n}\n`\n\n\n\n\n\n\n\nneato = require(\"@observablehq/graphviz@0.2\")"
  },
  {
    "objectID": "Text Difference Checker.html",
    "href": "Text Difference Checker.html",
    "title": "Script to read in directories (folders) for each paper",
    "section": "",
    "text": "Inspiration for this notebook: https://medium.com/@zhangkd5/a-tutorial-for-difflib-a-powerful-python-standard-library-to-compare-textual-sequences-096d52b4c843\n\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the text files\npath_to_file_a = '0003_bv172tc9618_0003_print.txt'\npath_to_file_b = '0003_bv172tc9618_0003_print.txt'\n\n# Read the contents of the files\nwith open(path_to_file_a, 'r', encoding='utf-8') as file:\n    a = file.read()\n\nwith open(path_to_file_b, 'r', encoding='utf-8') as file:\n    b = file.read()\n\n# Calculate the similarity ratio using SequenceMatcher\nseq_match = SequenceMatcher(None, a, b)\nratio = seq_match.ratio()\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Generate the HTML diff\nhtml_diff = d.make_file(a.splitlines(), b.splitlines())\n\n# Add the similarity ratio to the HTML diff\nratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio:.2f}&lt;/h2&gt;\\n\" + html_diff\n\n# Save the diff to an HTML file\nwith open('0003_bv172tc9618_0003_print_verify.html', 'w', encoding='utf-8') as f:\n    f.write(ratio_html)\n\n\nScript to read in directories (folders) for each paper\n\nimport os\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the directories\npath_to_folder_a = './PrintModelText/PrintModelText/zz472cp8582_jpg/txt'\npath_to_folder_b = './PrivateModel_V3/PrivateModel_V3/zz472cp8582_jpg_v3/txt'\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Get the list of files in each directory\nfiles_a = sorted(os.listdir(path_to_folder_a))\nfiles_b = sorted(os.listdir(path_to_folder_b))\n\n# Ensure both directories have the same number of files\nif len(files_a) != len(files_b):\n    print(\"Error: The directories do not contain the same number of files.\")\n    exit() # exits program is both directories dont have the same number of files\n\n# Compare each pair of files\nfor file_a, file_b in zip(files_a, files_b):\n    # Read the contents of the files\n    with open(os.path.join(path_to_folder_a, file_a), 'r', encoding='utf-8') as fa:\n        a = fa.read()\n    \n    with open(os.path.join(path_to_folder_b, file_b), 'r', encoding='utf-8') as fb:\n        b = fb.read()\n    \n    # Calculate the similarity ratio using SequenceMatcher\n    seq_match = SequenceMatcher(None, a, b)\n    ratio = seq_match.ratio() #calculates the similarity ratios between a & b\n    ratio_percentage = ratio * 100\n    \n    # Generate the HTML diff report on the differences. splitlines() is used to split the content into individual lines\n    html_diff = d.make_file(a.splitlines(), b.splitlines())\n    \n    # Add the similarity ratio to the HTML diff. Ratio is formatted to two decimal places\n    ratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio_percentage:.2f}%&lt;/h2&gt;\\n\" + html_diff\n    \n    # Define the output file name\n    output_file_name = os.path.splitext(file_a)[0] + '_diff.html'\n    \n    # Save the diff to an HTML file\n    with open(output_file_name, 'w', encoding='utf-8') as f:\n        f.write(ratio_html)\n    \n    print(f\"Processed: {output_file_name}\")\n\nprint(\"All files have been processed.\")\n\nProcessed: 0001_zz472cp8582_0001_diff.html\nProcessed: 0002_zz472cp8582_0002_diff.html\nProcessed: 0003_zz472cp8582_0003_diff.html\nProcessed: 0004_zz472cp8582_0004_diff.html\nProcessed: 0005_zz472cp8582_0005_diff.html\nProcessed: 0006_zz472cp8582_0006_diff.html\nProcessed: 0007_zz472cp8582_0007_diff.html\nProcessed: 0008_zz472cp8582_0008_diff.html\nProcessed: 0009_zz472cp8582_0009_diff.html\nProcessed: 0010_zz472cp8582_0010_diff.html\nProcessed: 0011_zz472cp8582_0011_diff.html\nProcessed: 0012_zz472cp8582_0012_diff.html\nProcessed: 0013_zz472cp8582_0013_diff.html\nProcessed: 0014_zz472cp8582_0014_diff.html\nProcessed: 0015_zz472cp8582_0015_diff.html\nProcessed: 0016_zz472cp8582_0016_diff.html\nProcessed: 0017_zz472cp8582_0017_diff.html\nAll files have been processed.\n\n\n\n\nScript to print out Similarity Ratio (%) for each page per paper\n\nimport os\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the directories\npath_to_folder_a = './PrintModelText/PrintModelText/bv172tc9618_jpg/txt'\npath_to_folder_b = './PrivateModel_V3/PrivateModel_V3/bv172tc9618_jpg_v3/txt'\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Get the list of files in each directory\nfiles_a = sorted(os.listdir(path_to_folder_a))\nfiles_b = sorted(os.listdir(path_to_folder_b))\n\n# Ensure both directories have the same number of files\nif len(files_a) != len(files_b):\n    print(\"Error: The directories do not contain the same number of files.\")\n    exit()\n\n# Store results for the table\nresults = []\n\n# Compare each pair of files\nfor file_a, file_b in zip(files_a, files_b):\n    # Read the contents of the files\n    with open(os.path.join(path_to_folder_a, file_a), 'r', encoding='utf-8') as fa:\n        a = fa.read()\n    \n    with open(os.path.join(path_to_folder_b, file_b), 'r', encoding='utf-8') as fb:\n        b = fb.read()\n    \n    # Calculate the similarity ratio using SequenceMatcher\n    seq_match = SequenceMatcher(None, a, b)\n    ratio = seq_match.ratio()\n    ratio_percentage = ratio * 100\n    \n    # Generate the HTML diff\n    html_diff = d.make_file(a.splitlines(), b.splitlines())\n    \n    # Add the similarity ratio to the HTML diff\n    ratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio_percentage:.2f}%&lt;/h2&gt;\\n\" + html_diff\n    \n    # Define the output file name\n    output_file_name = os.path.splitext(file_a)[0] + '_comp.html'\n    \n    # Save the diff to an HTML file\n    with open(output_file_name, 'w', encoding='utf-8') as f:\n        f.write(ratio_html)\n    \n    # Print out the processed file\n    print(f\"Processed: {output_file_name}\")\n    \n    # Append the result to the list\n    file_base_name = os.path.splitext(file_a)[0]\n    results.append((file_base_name, ratio_percentage))\n\nprint(\"All files have been processed.\")\n\n# Print out the table\nprint(\"\\nComparison Results:\")\nprint(f\"{'File Name and Page Number':&lt;30} {'Similarity Ratio (%)':&lt;20}\")\nprint(\"=\" * 50)\nfor result in results:\n    print(f\"{result[0]:&lt;30} {result[1]:&lt;20.2f}\")\n\n\nProcessed: 0001_bv172tc9618_0001_comp.html\nProcessed: 0002_bv172tc9618_0002_comp.html\nProcessed: 0003_bv172tc9618_0003_comp.html\nProcessed: 0004_bv172tc9618_0004_comp.html\nProcessed: 0005_bv172tc9618_0005_comp.html\nProcessed: 0006_bv172tc9618_0006_comp.html\nProcessed: 0007_bv172tc9618_0007_comp.html\nProcessed: 0008_bv172tc9618_0008_comp.html\nProcessed: 0009_bv172tc9618_0009_comp.html\nProcessed: 0010_bv172tc9618_0010_comp.html\nProcessed: 0011_bv172tc9618_0011_comp.html\nProcessed: 0012_bv172tc9618_0012_comp.html\nProcessed: 0013_bv172tc9618_0013_comp.html\nProcessed: 0014_bv172tc9618_0014_comp.html\nAll files have been processed.\n\nComparison Results:\nFile Name and Page Number      Similarity Ratio (%)\n==================================================\n0001_bv172tc9618_0001          15.33               \n0002_bv172tc9618_0002          8.80                \n0003_bv172tc9618_0003          19.17               \n0004_bv172tc9618_0004          37.14               \n0005_bv172tc9618_0005          9.09                \n0006_bv172tc9618_0006          39.30               \n0007_bv172tc9618_0007          4.11                \n0008_bv172tc9618_0008          27.47               \n0009_bv172tc9618_0009          3.04                \n0010_bv172tc9618_0010          11.35               \n0011_bv172tc9618_0011          8.27                \n0012_bv172tc9618_0012          50.11               \n0013_bv172tc9618_0013          21.28               \n0014_bv172tc9618_0014          44.60"
  },
  {
    "objectID": "Text Checker/Convert Html Output to JPG for Github Repo.html",
    "href": "Text Checker/Convert Html Output to JPG for Github Repo.html",
    "title": "TAXA Project",
    "section": "",
    "text": "import os\nimport imgkit\n\n# Path to wkhtmltoimage executable\nconfig = imgkit.config(wkhtmltoimage='C:/Program Files/wkhtmltopdf/bin/wkhtmltoimage.exe')\n\ndef convert_html_to_jpg(directory):\n    if not os.path.exists(directory):\n        print(f\"Directory {directory} does not exist.\")\n        return\n\n    files = [f for f in os.listdir(directory) if f.endswith('.html')]\n\n    if not files:\n        print(f\"No HTML files found in directory {directory}.\")\n        return\n\n    for file in files:\n        html_path = os.path.join(directory, file)\n        jpg_path = os.path.join(directory, f\"{os.path.splitext(file)[0]}.jpg\")\n        \n        try:\n            imgkit.from_file(html_path, jpg_path, config=config)\n            print(f\"Converted {file} to {jpg_path}\")\n        except Exception as e:\n            print(f\"Failed to convert {file}: {e}\")\n\n# Example usage\ndirectory_path = './Outputs/zz472cp8582_jpg'\nconvert_html_to_jpg(directory_path)\n\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0001_zz472cp8582_0001_diff.html to ./Outputs/zz472cp8582_jpg\\0001_zz472cp8582_0001_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0002_zz472cp8582_0002_diff.html to ./Outputs/zz472cp8582_jpg\\0002_zz472cp8582_0002_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0003_zz472cp8582_0003_diff.html to ./Outputs/zz472cp8582_jpg\\0003_zz472cp8582_0003_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0004_zz472cp8582_0004_diff.html to ./Outputs/zz472cp8582_jpg\\0004_zz472cp8582_0004_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0005_zz472cp8582_0005_diff.html to ./Outputs/zz472cp8582_jpg\\0005_zz472cp8582_0005_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0006_zz472cp8582_0006_diff.html to ./Outputs/zz472cp8582_jpg\\0006_zz472cp8582_0006_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0007_zz472cp8582_0007_diff.html to ./Outputs/zz472cp8582_jpg\\0007_zz472cp8582_0007_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0008_zz472cp8582_0008_diff.html to ./Outputs/zz472cp8582_jpg\\0008_zz472cp8582_0008_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0009_zz472cp8582_0009_diff.html to ./Outputs/zz472cp8582_jpg\\0009_zz472cp8582_0009_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0010_zz472cp8582_0010_diff.html to ./Outputs/zz472cp8582_jpg\\0010_zz472cp8582_0010_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0011_zz472cp8582_0011_diff.html to ./Outputs/zz472cp8582_jpg\\0011_zz472cp8582_0011_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0012_zz472cp8582_0012_diff.html to ./Outputs/zz472cp8582_jpg\\0012_zz472cp8582_0012_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0013_zz472cp8582_0013_diff.html to ./Outputs/zz472cp8582_jpg\\0013_zz472cp8582_0013_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0014_zz472cp8582_0014_diff.html to ./Outputs/zz472cp8582_jpg\\0014_zz472cp8582_0014_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0015_zz472cp8582_0015_diff.html to ./Outputs/zz472cp8582_jpg\\0015_zz472cp8582_0015_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0016_zz472cp8582_0016_diff.html to ./Outputs/zz472cp8582_jpg\\0016_zz472cp8582_0016_diff.jpg\nLoading page (1/2)\nRendering (2/2)                                                    \nDone                                                               \nConverted 0017_zz472cp8582_0017_diff.html to ./Outputs/zz472cp8582_jpg\\0017_zz472cp8582_0017_diff.jpg"
  },
  {
    "objectID": "Option #2 Experiment/Option #2A Refinement.html",
    "href": "Option #2 Experiment/Option #2A Refinement.html",
    "title": "ConversationalRetrievalChain + VectorStoreRetrieverMemory",
    "section": "",
    "text": "import pandas as pd\nimport os\nimport openai\nimport sys, pathlib, fitz\nimport re\nfrom langchain.chains import ConversationalRetrievalChain\nfrom langchain.document_loaders import PyMuPDFLoader\nfrom langchain.text_splitter import TokenTextSplitter\nfrom langchain.embeddings.openai  import OpenAIEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.retrievers import ContextualCompressionRetriever\nfrom langchain.retrievers.document_compressors import LLMChainExtractor\nfrom langchain.retrievers.document_compressors import LLMChainFilter\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain import PromptTemplate\nfrom langchain.chains.conversational_retrieval.prompts import CONDENSE_QUESTION_PROMPT\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv()) # read local .env file\n\nopenai.api_key  = os.environ['OPENAI_API_KEY']\ndef has_citations(page_text):\n    # List of variations of \"citations\" to check for\n    citation_variations = [\"Citations\", \"Literature Cited\", \"Literature Citations\"]\n\n    for variation in citation_variations:\n        if variation in page_text:\n            return True\n    return False\n\ndef remove_citation_pages(pdf_path):\n    doc = fitz.open(pdf_path)\n    non_citation_pages = []\n\n    for page_num in range(doc.page_count):\n        page = doc[page_num]\n        page_text = page.get_text()\n\n        if not has_citations(page_text):\n            non_citation_pages.append(page_num)\n\n    # Create a new PDF with only non-citation pages\n    new_pdf = fitz.open()\n    for page_num in non_citation_pages:\n        new_pdf.insert_pdf(doc, from_page=page_num, to_page=page_num)\n\n    return new_pdf\n\n\ninput_pdf_path = './hms/fhl_2014_Charifson_34622 (1).pdf'\n\n# Create a new PDF with citation pages removed\nnew_pdf = remove_citation_pages(input_pdf_path)\n\n# Save the new PDF to 'output.pdf'\noutput_pdf_path = 'output.pdf'\nnew_pdf.save(output_pdf_path)\n# new_pdf.close()\ndef extract_text_from_pdf(pdf_path):\n    doc = fitz.open(pdf_path)\n    text = \"\"\n    for page in doc:\n        text += page.get_text()\n    doc.close()\n    return text\n\n# Replace 'output.pdf' with the path to the PDF you created with citation pages removed\nnew_pdf_path = 'output.pdf'\n\n# Extract text from the new PDF\nnew_pdf_text = extract_text_from_pdf(new_pdf_path)\n\n# Now you can manipulate the extracted text or perform any other actions as needed\n# For example, you can print the extracted text:\nprint(new_pdf_text)\n\nCharifson 1 \n \nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \nDifferences in Chela Size. \n \nDavid Charifson1,2 \n \nMarine Invertebrate Zoology \nSummer 2014 \n \n \n \n \n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \n \n \n \n \nContact information: \nDavid Charifson \nDepartment of Ecology and Evolution \nStony Brook University \n650 Life Sciences Building \nStony Brook, NY 11794-5245 \nDavid.charifson@stonybrook.edu  \n \n \n \n \nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \npredation, sexual dimorphism, character displacement  \n \n \nCharifson 2 \n \nAbstract: \n \nThe relationship between propus size and use of snails as prey in sympatric populations \nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \nwidth increases with body size in a predictable manner in male and female crabs of both species. \nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \nno character displacement in this trait. Both species of crabs showed a strong feeding preference \nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \ndue to the ease of consumption. There were no differences in snail consumption rates between \nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \nindividual crabs.  \n \nIntroduction: \n \nA multitude of species coexist in the marine intertidal environment. Closely related \nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \nconsiderable habitat overlap between these two species; the underside of a single rock may have \nCharifson 3 \n \nroughly equal abundances of the two crab species (personal observation). The size of the chela \nmay differ, which could allow the crabs to differentiate in food resource utilization. \nBoth species are omnivores that eat algae and small invertebrates, including snails \n(Behrens Yamada and Boulding 1996). The two shore crab species are known to eat Littorina \nsitkana (Philippi 1846) and Littorina scutulata (Gould 1849), which also occur in the rocky \nintertidal zone (Behrens Yamada and Boulding 1996). Li. scutulata moves upshore in response \nto the presence of H. nudus and crushed conspecifics, where H. nudus density is lower (Keppel \nand Scrosati 2004). This suggests that H. nudus represents an ecologically significant predation \nthreat to littorines.  \n \nThe thick shelled littorines are difficult prey for both H. nudus and H. oregonensis as \nneither crab species is a molluscivore specialists; they typically scrape or pick algae and softer \ninvertebrates off rocks using their chelae (Behrens Yamada and Boulding 1996). Behrens \nYamada and Boulding (1998) found that large H. nudus were capable of consuming Li. sitkana \nthat were less than 8 mm in length, but had only a 37% success rate of consuming snails with \nlengths between 5.5-7 mm .  \nI sought to investigate differences in propus size between between males and females of \nthese two crab species. The size of the propus of the chela is positively correlated with the \namount of force that can be produced due to greater musculature (Behrens Yamada and Boulding \n1998). A significant difference in propus size between the two species would suggest that further \ntesting of character displacement may be warranted. A disparity in propus size to body size \nbetween male and female crabs might result in different feeding rates and shell breaking \ncapabilities. I devised a test of preference by varying snail shell strength within the same size \nclass. The snail species Li. scutulata and Lacuna vincta (Montagu 1803) are both in the family \nCharifson 4 \n \nLittorinidae and have similar shell shape but different shell thickness. Lacuna vincta has a \nthinner, more fragile shell and is likely to be preferred as prey by shore crabs. I also hypothesize \nthat, if chela size is held constant, female crabs will have greater snail consumption rates than \nmale crabs. Female crabs with claws equivalent to males have a larger body mass,are likely to \nhave greater metabolic need, and are less easily satiated. \n \nStudy System: \n \nAll specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock. These closely related \ncrabs are morphologically similar, but can be distinguished by the presence of purple spots on \nthe cheliped of H. nudus and abundant setae on the pereopods of H. oregonensis (Kozloff 1987). \nLacuna vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \ncollected from the rocky intertidal zone of Fourth of July Beach.  \n \nMaterials and Methods: \nMorphometrics \n \nMale and females of H. oregonensis and H. nudus were measured with digital calipers \n(0.1 mm). Each crab was measured for carapace width, propal height and propal width. Carapace \nwidth was taken at the widest part of the carapace. Propal height was measured at the highest \nvertical distance along the propus. Propal width was measured perpendicular to propal height, \nfrom the left to right sides of the propus. All claw measurements were made on the left cheliped. \nCharifson 5 \n \nIf there was a size disparity between the left and right claws due to regeneration of a lost claw, \nthe crab was excluded from the study. Ratios of carapace width:propal height (CW:PH) and \ncarapace width:propal width (CW:PW) were calculated.  \n \nCrab Feeding Preference \n \nThree female (Fe1, Fe2, Fe3) and three male (Ma1, Ma2, Ma3) crabs of H. nudus with \npropal heights between 5-6 mm were placed in small flow-through containers. Five L. scutulata \nand five L. vincta with shell lengths between 4-6 mm were added to each container. The ranges \nof crab propal height and snail shell length were chosen based on prior studies to ensure that the \ncrabs were capable of feeding on the hard-shelled L. scutulata (Behrens Yamada and Boulding \n1998). H. oregonensis was excluded due to the rarity of female crabs of that species within the \nrange of appropriate propal heights. After approximately 15 hours the number of L. scutulata and \nL. vincta consumed was counted. Three trials were conducted for each crab. \nSnail Consumption by Hemigrapsus nudus \n \nThe crabs from the preference experiment were given five of each snail in each trial. \nAfter 1.5 to 3 hours the number of snails consumed was counted and converted to a consumption \nrate (snails consumed/hour). A total of eight feeding trials were conducted.  \n \nStatistical Analysis \n \nFor the morphometric analysis, crabs were divided into four groups based on sex and \nspecies. Standardized major axis regression was used to determine the relationship between crab \nmorphometric parameters. Arcsin transformations were used to correct for non-normality (Sokol \nand Rohlf 2011). Differences in CW:PH and CW:PW were analyzed using a two-way ANOVA \nCharifson 6 \n \nwith factors: Sex and Species. Prey selection by H. nudus was analyzed using G-tests for each \nindividual that consumed snails. An one-way ANOVA was used to determine differences in snail \nconsumption rates by H. nudus.  \n \nResults: \nMorphometrics: \n \nCarapace width was a good predictor of both propal height (Figure 1, Table 1A) and \npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \nless variation in the relationship between carapace width and propal height than with propal \nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \nrespectively.  \n \nCrab Feeding Preference:  \n \nExpected values for both the number of L. scutulata and L. vincta consumed for the G-\ntest are 0.5 multiplied by the total number of snails consumed by each individual crab. G-tests \nfor individual H. nudus that eat snails were all significant at p &lt; 0.001 with 1 degree of freedom \n(See Table 2 for statistical summary). The three crabs that did not eat either L. scutulata or L. \nvincta could not be tested for feeding preference.  \nCharifson 7 \n \n \nSnail Consumption by Hemigrapsus nudus \n \nNo significant difference in crab feeding rate (snails consumed/hour) was found (F2, 21 = \n2.52, p = 0.104) among individual H. nudus that fed on snails during the course of the \nconsumption experiment (Figure 5). Fe2  ate snails at a rate of 0.59±0.53 snails/hour (variance is \nstandard deviation), Ma1 feeding rate was 0.24±0.31 snails/hour, and Ma2 had a feeding rate of \n0.80±0.38 snails/hour. Individuals Fe1, Fe3 and Ma3 did not consume any snails during the \ncourse of the experiment.  \n \nDiscussion: \n \nA few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus \nand Hemigrapsus orogenensis. The variance in propal height or propal width explained by \ncarapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for \npropal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela \nsize parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width \nrespectively. The R2 values for propal width regressed against carapace width were consistently \nlower than propal height regressed against carapace width across species and sexes (Table 1). In \ngeneral the ability of carapace width to explain the variance in chela size parameters (i.e.: R2 \nvalues) was greater in females of both crab species (Table 1, Figures 1 and 2). Males may have \nmore variation in claw size due to trade-offs between claw size and factors like feeding \nefficiency or resource allocation. Trade-offs relating to chela size are found in fiddler crabs, \nwhich exhibit extreme sexual dimorphism. Fiddler crabs have a trade-off between the intrasexual \ncompetition and intersexual signaling functions of the dimorphic claw (Swanson et al. 2013). \nCharifson 8 \n \nThis is not to say that the particular trade-offs in fiddler crabs case are analogous to that of \nHemigrapsus, since both claws in the two shore crabs in this study are used in feeding.  \nSexual dimorphism in chela size, which is readily apparent to the eye in both \nHemigrapsus nudus and Hemigrapsus oregonensis, was detected statistically (Figures 3 and 4). \nThe two-way ANOVA with factors sex and species did not show a significant species effect, \nsuggesting that the claws of both shore crabs produce roughly the same force and are \nfunctionally equivalent (Behrens Yamada and Boulding 1998). The lack of morphological \ndifference in the size of the chelae between the crab species removes the possibility of character \ndisplacement in the trait. It should be noted that this study was not designed to test for character \ndisplacement, but to determine if this would be an interesting question for future investigations. \nTo make a compelling case for character displacement it is necessary to compare multiple \nsympatric and allopatric populations with similar abiotic and biotic conditions (Stuart and Losos \n2013). Also it must be demonstrated that the trait differs due to genetic differences between \nsympatric and allopatric populations, that the differences between the populations are not due to \nspecies sorting, that the morphological trait is correlated to differences in resource use between \nthe two sympatric species, and that the similar phenotype in allopatric populations compete for \nthe same resources (Stuart and Losos 2013). The tendency of H. nudus to occupy the upper \nintertidal zone (Sliger 1987), despite considerable overlap with H. oregonensis, may provide \nenough differential resource use to prevent exclusion in sympatry. Desiccation tolerance may be \na better trait to test for character displacement in these shore crabs.  \nH. nudus males and females clearly preferred to eat the thinner shelled Lacuna vincta \n(Table 2). During the course of the feeding preference experiment all the crabs that ate snails \nconsumed L. vincta exclusively. However, one Littorina scutuala was eaten by H. nudus when \nCharifson 9 \n \ndetermining consumption rates. The six crabs were chosen because their claws were of \nappropriate size to eat littorines with shell length between 4-6 mm, yet only half of the crabs ate \nthese snails. This could be due to insufficient time to acclimate H. nudus to lab conditions and \npossibly reduced feeding associated with molting. Male snow crabs, Chionoecetes opilio, were \nshown to cease feeding 3-6 weeks before and 3-4 weeks after molting (O’Halloran and O’Dor \n1988).  \nIt was my original intention to test for sex differences in consumption rates, but this was \nnot possible as I could not collect many crabs of the appropriate claw size for gastropod feeding \nand many of the crabs I did collect did not feed. There were no statistically significant \ndifferences in consumption rates (snails eaten/hour) among the three feeding H. nudus. These \nindividuals had highly variable feeding rates, mostly due to trials in which the crab did not feed. \nSylvia Behrens Yamada and Elizabeth Boulding (1998) found that H. nudus consumed 1.8 \nLittorina. sitkana/individual crab/day. In my study crabs fed on 13.03 Lacuna vincta/individual \ncrab/ day. The greater consumption rate in my study is likely due to the easily breakable shells of \nLa. vincta.  \nThe findings of this study suggest that there is no potential for character displacement of \nchela size in the sympatric H. nudus and H. oregonensis. This leaves the question of species co-\noccurrence open to other possibilities. H. nudus has a strong preference for La. vincta, but it \nseems as if there have been no studies that show predation on La. vincta in the field. It should be \nnoted that H. nudus and La. vincta usually occupy different portions of the intertidal and may \nhave little contact with each other, unlike the relationship between H. nudus and Li. scutulata. \nThere is some potential for overlap in the winter when La. vincta migrates up shore. Although no \ndifferences in consumption rates between male and female H. nudus were found, this might be \nCharifson 10 \n \ndue to logistical issues surrounding the experimental design and little replication. Future studies \nshould include more crabs, the exclusion of non-feeding crabs, and trial periods with longer time \nintervals. Additionally, any subsequent study should utilize multivariate and geometric \nmorphometric methods to quantify claw shape instead of using ratios, as two similar ratios may \nhave different shape.  \n \nAcknowledgements: \n \nI would like to thank Dianna Padilla, Michael LaBarbera, and Kevin Turner for advice \nrelating to the experimental design of this study. I would also like to thank the director and staff \nof Friday Harbor Laboratories for use of facilities and permission to collect organisms. Friday \nHarbor Laboratories, The Libbie Hyman Scholarship, Society for Integrative and Comparative \nBiology, and the Stony Brook Department of Ecology and Evolution provided financial support \nand have my gratitude.  \n \n \n \n \n \n \n \n \n \n \nCharifson 12 \n \nSwanson, B. O., George, M. N., Anderson, S. T., and Christy, J. H. 2013. Evolutionary variation\n \nin the mechanics of fiddler crab claws. BMC Evolutionary Biology 13: 137. \n \n \n \n \n \n \n \n \n \nCharifson 13 \n \nTable 1: SMA regressions of carapace width and propus measures.  \nA) The relationship between carapace width and propal height. x is carapace width and y is \npropal height. B) The relationship between carapace width and propal height. x is carapace width \nand y is propal width.  \n \n \n \nSMA Regression  \n \nA \n \nN \nCarapace Width vs Propal Height  \nR2 \n \nFemale H. nudus \n13 \ny = 0.273*x - 0.678 \n0.976 \n \nMale H. nudus \n13 \ny = 0.311*x - 1.385 \n0.868 \n \nFemale H. oregonensis \n9 \ny = 0.351*x - 0.833 \n0.894 \n \nMale H. oregonensis \n14 \ny = 0.39*x - 1.149 \n0.693 \n \n \n \n \n \n \n \n \nSMA Regression  \n \nB \n \nN \nCarapace Width vs Propal Width  \nR2 \n \nFemale H. nudus \n13 \ny = 0.157*x - 0.386 \n0.927 \n \nMale H. nudus \n13 \ny = 0.209*x - 1.288 \n0.859 \n \nFemale H. oregonensis \n9 \ny = 0.175*x + 0.037 \n0.724 \n \nMale H. oregonensis \n14 \ny = 0.244*x - 0.688 \n0.534 \n \n \nCharifson 14 \n \nTable 2: Size and prey preference in H. nudus.  \nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \nfor preference. \nIndividual \nCarapace \nWidth (mm) \nPropal \nHeight (mm) \nNumber of \nLacuna vincta \nconsumed \nNumber of \nLittorina scutulata \nconsumed \n \nG \n \np-value \nFe1 \n23.6 \n5.9 \n0 \n0 \nNT \n \nFe2 \n23.1 \n5.5 \n15 \n0 \n20.8 \np &lt; 0.001 \nFe3 \n20.6 \n5 \n0 \n0 \nNT \n \nMa1 \n19.1 \n5.4 \n14 \n0 \n19.4 \np &lt; 0.001 \nMa2 \n18.4 \n5.4 \n15 \n0 \n20.8 \np &lt; 0.001 \nMa3 \n20.1 \n6 \n0 \n0 \nNT \n \n \n \n \nCharifson 15 \n \n \nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \nC) Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 16 \n \n \nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 17 \n \n \nFigure 3: Differences in propal height:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \nError bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \n0.3 \n0.35 \nH. nudus \nH. oregonensis \nPropal Height:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 18 \n \n \nFigure 4: Differences in propal width:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \n0.01). Error bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \nH. nudus \nH. oregonensis \nPropal Widtht:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 19 \n \n \nFigure 5: Consumption rates by individual H. nudus.  \nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \nthe mean.  \n  \n0 \n0.1 \n0.2 \n0.3 \n0.4 \n0.5 \n0.6 \n0.7 \n0.8 \n0.9 \n1 \nFe1 \nFe2 \nFe3 \nMa1 \nMa2 \nMa3 \nMean Consumption Rate  \n(Snails Consumed/Hour) \nIndividual H. nudus"
  },
  {
    "objectID": "Option #2 Experiment/Option #2A Refinement.html#tiktoken-splitter",
    "href": "Option #2 Experiment/Option #2A Refinement.html#tiktoken-splitter",
    "title": "ConversationalRetrievalChain + VectorStoreRetrieverMemory",
    "section": "Tiktoken Splitter",
    "text": "Tiktoken Splitter\ntiktoken is a fast byte pair encoding (BPE) tokenizer created by OpenAI.\nWe can use it to estimate tokens used. It will probably be more accurate for the OpenAI models.\n\nHow the text is split: by character passed in\nHow the chunk size is measured: by tiktoken tokenizer\n\nModels don’t see text like humans, instead they see a sequence of numbers (known as tokens). Byte pair encoding (BPE) is a way of converting text into tokens. It has a couple desirable properties:\n\nIt’s reversible and lossless, so you can convert tokens back into the original text\nIt works on arbitrary text, even text that is not in the tokeniser’s training data\nIt compresses the text: the token sequence is shorter than the bytes corresponding to the original text. On average, in practice, each token corresponds to about 4 bytes.\nIt attempts to let the model see common subwords. For instance, “ing” is a common subword in English, so BPE encodings will often split “encoding” into tokens like “encod” and “ing” (instead of e.g. “enc” and “oding”). Because the model will then see the “ing” token again and again in different contexts, it helps models generalise and better understand grammar.\n\n\ntk_text_splitter = TokenTextSplitter(chunk_size = 800, chunk_overlap = 50)\n\ndocs = tk_text_splitter.split_text(new_pdf_text)\n\n\n#Initialize Embeddings\nembeddings = OpenAIEmbeddings()"
  },
  {
    "objectID": "Option #2 Experiment/Option #2A Refinement.html#faiss-vectorstore",
    "href": "Option #2 Experiment/Option #2A Refinement.html#faiss-vectorstore",
    "title": "ConversationalRetrievalChain + VectorStoreRetrieverMemory",
    "section": "FAISS Vectorstore",
    "text": "FAISS Vectorstore\nFaiss is a library for efficient similarity search and clustering of dense vectors. It contains algorithms that search in sets of vectors of any size, up to ones that possibly do not fit in RAM. It also contains supporting code for evaluation and parameter tuning.\n\nvector_store = FAISS.from_texts(docs, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})"
  },
  {
    "objectID": "Option #2 Experiment/Option #2A Refinement.html#contextual-compression",
    "href": "Option #2 Experiment/Option #2A Refinement.html#contextual-compression",
    "title": "ConversationalRetrievalChain + VectorStoreRetrieverMemory",
    "section": "Contextual compression",
    "text": "Contextual compression\nOne challenge with retrieval is that usually you don’t know the specific queries your document storage system will face when you ingest data into the system. This means that the information most relevant to a query may be buried in a document with a lot of irrelevant text. Passing that full document through your application can lead to more expensive LLM calls and poorer responses.\nContextual compression is meant to fix this. The idea is simple: instead of immediately returning retrieved documents as-is, you can compress them using the context of the given query, so that only the relevant information is returned. “Compressing” here refers to both compressing the contents of an individual document and filtering out documents wholesale.\nTo use the Contextual Compression Retriever, you’ll need:\n\na base Retriever\na Document Compressor\n\nThe Contextual Compression Retriever passes queries to the base Retriever, takes the initial documents and passes them through the Document Compressor. The Document Compressor takes a list of Documents and shortens it by reducing the contents of Documents or dropping Documents altogether.\n\nAdding contextual compression with an LLMChainExtractor\nWe wraped our base retriever with a ContextualCompressionRetriever. We’ll add an LLMChainExtractor, which will iterate over the initially returned documents and extract from each only the content that is relevant to the query.\n\nllm = ChatOpenAI(temperature=0, model_name='gpt-3.5-turbo')\n\ncompressor = LLMChainExtractor.from_llm(llm)\n\ncompression_retriever = ContextualCompressionRetriever(base_compressor = compressor,base_retriever=vector_store)"
  },
  {
    "objectID": "Option #2 Experiment/Option #2A Refinement.html#prompting",
    "href": "Option #2 Experiment/Option #2A Refinement.html#prompting",
    "title": "ConversationalRetrievalChain + VectorStoreRetrieverMemory",
    "section": "Prompting",
    "text": "Prompting\n\ncustom_template = \"\"\"Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question. Please use a maximum of 4 sentences. If you do not know the answer reply with 'I am sorry'.\n\n1. SPECIES NAME: The scientific name (species name) of any plant, animal, fungus, alga or bacterium consists of two Latinized words. The first word is the name of the genus to which the organism belongs. The second word is the specific epithet or specific term of the species. Together, the genus plus the specific epithet make up the species name. The species name and scientific name are synonyms.\n2. HABITAT: A species habitat can be seen as the physical manifestation of its ecological niche.\n3. LOC: Name of any geographic location, like cities, countries, continents, districts etc.\n\nExamples:\n\n1. Sentence: Strongylocentrotus fransiscanus and S. purpuratus were obtained from the subtidal and intertidal regions, respectively, of Monterey Bay.\n\"Output: {{'SPECIES NAME': ['Strongylocentrotus fransiscanus', 'S. purpuratus'], 'HABITAT': ['subtidal', 'intertidal'], 'LOC': ['Monterey Bay']}}\n\n2. Sentence: Cucumaria curata and C. pseudocurata live and feed in the hydrodynamically stressful environment of exposed intertidal areas.\nOutput: {{'SPECIES NAME': ['Cucumaria curata', 'C. pseudocurata'], 'HABITAT': ['exposed intertidal'], 'LOC': ['None']}}\\n\"\n\nChat History:\n{chat_history}\nFollow Up Input: {question}\n\"\"\"\n\n\nCUSTOM_QUESTION_PROMPT = PromptTemplate.from_template(custom_template)\n\n\nmemory = VectorStoreRetrieverMemory(\nmemory_key=\"chat_history\",\nreturn_docs=True,\nretriever=vector_store,\nreturn_messages=True)\n\n\n#Formats the chat history string\ndef get_chat_history(inputs) -&gt; str:\n    res = []\n    for human, ai in inputs:\n        res.append(f\"Human:{human}\\nAI:{ai}\")\n    return \"\\n\".join(res)\n\n\nqa_chain = ConversationalRetrievalChain.from_llm(ChatOpenAI(), \n                                                 compression_retriever,\n                                                 memory = memory,\n                                                 return_source_documents = True,\n                                                 condense_question_prompt = CUSTOM_QUESTION_PROMPT,\n                                                 get_chat_history = get_chat_history)\n                                                \n\n\nquery = \"What is this paper about?\"\nquery1a = \"What were the significant findings on the relationship mentioned?\"\nquery2 = \"Summarize the paper concisely with reference to materials and methods.\"\nquery3 = \"Write a one sentence summary of the purpose of the paper\"\nquery4 = \"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\"\nquery5 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\nquery6 = \"What are the scientific names of the collected species mentioned in this paper?\"\nquery6a = \"Where were the species collected?\"\nquery7 = \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nquery7a = \"Please list the species collected based on their scientific names along with location of collection.\"\nquery8 = \"Can you give a more specific location?\"\nquery9 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nquery10 = \"In what habitat were the species found?\"\nquery10a = \"Can you give a more specific location of the habitat such as formal name of said location?\"\nquery11 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper?\"\n\n\nchat_history = []\n\n\nresult1= qa_chain({\"question\": query, \"chat_history\": chat_history})\n\nC:\\Users\\aclao89\\AppData\\Local\\anaconda3\\lib\\site-packages\\langchain\\chains\\llm.py:275: UserWarning: The predict_and_parse method is deprecated, instead pass an output parser directly to LLMChain.\n  warnings.warn(\n\n\n\nresult1[\"answer\"]\n\n'The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.'\n\n\n\nresult1[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='A multitude of species coexist in the marine intertidal environment. Closely related \\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\nCharifson 3 \\n \\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\nmay differ, which could allow the crabs to differentiate in food resource utilization.', metadata={}),\n Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={})]\n\n\n\nresult1[\"chat_history\"]\n\n[Document(page_content='8 \\n0.9 \\n1 \\nFe1 \\nFe2 \\nFe3 \\nMa1 \\nMa2 \\nMa3 \\nMean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus \\n', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \\nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.  \\n \\nCrab Feeding Preference:  \\n \\nExpected values for both the number of L. scutulata and L. vincta consumed for the G-\\ntest are 0.5 multiplied by the total number of snails consumed by each individual crab. G-tests \\nfor individual H. nudus that eat snails were all significant at p &lt; 0.001 with 1 degree of freedom \\n(See Table 2 for statistical summary). The three crabs that did not eat either L. scutulata or L. \\nvincta could not be tested for feeding preference.  \\nCharifson 7 \\n \\n \\nSnail Consumption by Hemigrapsus nudus \\n \\nNo significant difference in crab feeding rate (snails consumed/hour) was found (F2, 21 = \\n2.52, p = 0.104) among individual H. nudus that fed on snails during the course of the \\nconsumption experiment (Figure 5). Fe2  ate snails at a rate of 0.59±0.53 snails/hour (variance is \\nstandard deviation), Ma1 feeding rate was 0.24±0.31 snails/hour, and Ma2 had a feeding rate of \\n0.80±0.38 snails/hour. Individuals Fe1, Fe3 and Ma3 did not consume any snails during the \\ncourse of the experiment.  \\n \\nDiscussion: \\n \\nA few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus \\nand Hemigrapsus orogenensis. The variance in propal height or propal width explained by \\ncarapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for \\npropal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela \\nsize parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width \\nrespectively. The R2 values for propal width regressed against carapace width were consistently \\nlower than propal height regressed against carapace width across species and sexes (Table 1). In \\ngeneral the ability of carapace width to explain the variance in chela size parameters (i.', metadata={}),\n Document(page_content='Charifson 1 \\n \\nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \\nDifferences in Chela Size. \\n \\nDavid Charifson1,2 \\n \\nMarine Invertebrate Zoology \\nSummer 2014 \\n \\n \\n \\n \\n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \\n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \\n \\n \\n \\n \\nContact information: \\nDavid Charifson \\nDepartment of Ecology and Evolution \\nStony Brook University \\n650 Life Sciences Building \\nStony Brook, NY 11794-5245 \\nDavid.charifson@stonybrook.edu  \\n \\n \\n \\n \\nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \\npredation, sexual dimorphism, character displacement  \\n \\n \\nCharifson 2 \\n \\nAbstract: \\n \\nThe relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \\nwidth increases with body size in a predictable manner in male and female crabs of both species. \\nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \\nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \\nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \\nno character displacement in this trait. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.  \\n \\nIntroduction: \\n \\nA multitude of species coexist in the marine intertidal environment. Closely related \\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\nCharifson 3 \\n \\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\nmay differ, which could allow the crabs to differentiate in food resource utilization. \\nBoth species are omnivores that eat algae and small invertebrates, including snails \\n(Behrens Yamada and', metadata={})]\n\n\n\nresult1a = qa_chain({\"question\": query1a, \"chat_history\": chat_history})\n\n\nresult1a[\"answer\"]\n\n'The significant findings on the relationship between carapace width and propal height and width in Hemigrapsus are as follows:\\n\\n1. Carapace width was a good predictor of both propal height and propal width in female and male H. oregonensis and H. nudus.\\n\\n2. There was less variation in the relationship between carapace width and propal height than with propal width.\\n\\n3. A significant effect for sex was found for both carapace width:propal height (CW:PH) and carapace width:propal width (CW:PW). \\n\\n4. There was no significant difference between Hemigrapsus species for CW:PH and CW:PW.\\n\\n5. A significant sex*species interaction was detected for both CW:PH and CW:PW.'\n\n\n\nresult1a[\"source_documents\"]\n\n[Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.', metadata={}),\n Document(page_content='Table 1: SMA regressions of carapace width and propus measures.  \\nA) The relationship between carapace width and propal height. x is carapace width and y is \\npropal height. B) The relationship between carapace width and propal height. x is carapace width \\nand y is propal width.  \\n\\nSMA Regression  \\n\\nA \\n\\nN \\nCarapace Width vs Propal Height  \\nR2 \\n\\nFemale H. nudus \\n13 \\ny = 0.273*x - 0.678 \\n0.976 \\n\\nMale H. nudus \\n13 \\ny = 0.311*x - 1.385 \\n0.868 \\n\\nFemale H. oregonensis \\n9 \\ny = 0.351*x - 0.833 \\n0.894 \\n\\nMale H. oregonensis \\n14 \\ny = 0.39*x - 1.149 \\n0.693 \\n\\nSMA Regression  \\n\\nB \\n\\nN \\nCarapace Width vs Propal Width  \\nR2 \\n\\nFemale H. nudus \\n13 \\ny = 0.157*x - 0.386 \\n0.927 \\n\\nMale H. nudus \\n13 \\ny = 0.209*x - 1.288 \\n0.859 \\n\\nFemale H. oregonensis \\n9 \\ny = 0.175*x + 0.037 \\n0.724 \\n\\nMale H. oregonensis \\n14 \\ny = 0.244*x - 0.688 \\n0.534 \\n\\nTable 2: Size and prey preference in H. nudus.  \\nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \\nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \\nfor preference. \\nIndividual \\nCarapace \\nWidth (mm) \\nPropal \\nHeight (mm) \\nNumber of \\nLacuna vincta \\nconsumed \\nNumber of \\nLittorina scutulata \\nconsumed \\n\\nG \\n\\np-value \\nFe1 \\n23.6 \\n5.9 \\n0 \\n0 \\nNT \\n\\nFe2 \\n23.1 \\n5.5 \\n15 \\n0 \\n20.8 \\np &lt; 0.001 \\nFe3 \\n20.6 \\n5 \\n0 \\n0 \\nNT \\n\\nMa1 \\n19.1 \\n5.4 \\n14 \\n0 \\n19.4 \\np &lt; 0.001 \\nMa2 \\n18.4 \\n5.4 \\n15 \\n0 \\n20.8 \\np &lt; 0.001 \\nMa3 \\n20.1 \\n6 \\n0 \\n0 \\nNT \\n\\nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth. A significant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.', metadata={})]\n\n\n\nresult1a[\"chat_history\"]\n\n[Document(page_content=' \\n0 \\n0 \\nNT \\n \\n \\n \\n \\nCharifson 15 \\n \\n \\nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n \\n \\n \\nCharifson 16 \\n \\n \\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n \\n \\n \\nCharifson 17 \\n \\n \\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n \\n \\n \\n0 \\n0.05 \\n0.1 \\n0.15 \\n0.2 \\n0.25 \\n0.3 \\n0.35 \\nH. nudus \\nH. oregonensis \\nPropal Height:Carapace Width \\nCrab Species \\nFemale \\nMale \\nCharifson 18 \\n \\n \\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n \\n \\n \\n0 \\n0.05 \\n0.1 \\n0.15 \\n0.2 \\n0.25 \\nH. nudus \\nH. oregonensis \\nPropal Widtht:Carapace Width \\nCrab Species \\nFemale \\nMale \\nCharifson 19 \\n \\n \\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.  \\n  \\n0 \\n0.1 \\n0.2 \\n0.3 \\n0.4 \\n0.5 \\n0.6 \\n0.7 \\n0.8 \\n0.9 \\n1 \\nFe1 \\nFe2 \\nFe3 \\nMa1 \\nMa2 \\nMa3 \\nMean Consumption Rate  \\n(Snails Consumed/Hour)', metadata={}),\n Document(page_content=' \\n \\n \\n \\n \\n \\nCharifson 13 \\n \\nTable 1: SMA regressions of carapace width and propus measures.  \\nA) The relationship between carapace width and propal height. x is carapace width and y is \\npropal height. B) The relationship between carapace width and propal height. x is carapace width \\nand y is propal width.  \\n \\n \\n \\nSMA Regression  \\n \\nA \\n \\nN \\nCarapace Width vs Propal Height  \\nR2 \\n \\nFemale H. nudus \\n13 \\ny = 0.273*x - 0.678 \\n0.976 \\n \\nMale H. nudus \\n13 \\ny = 0.311*x - 1.385 \\n0.868 \\n \\nFemale H. oregonensis \\n9 \\ny = 0.351*x - 0.833 \\n0.894 \\n \\nMale H. oregonensis \\n14 \\ny = 0.39*x - 1.149 \\n0.693 \\n \\n \\n \\n \\n \\n \\n \\n \\nSMA Regression  \\n \\nB \\n \\nN \\nCarapace Width vs Propal Width  \\nR2 \\n \\nFemale H. nudus \\n13 \\ny = 0.157*x - 0.386 \\n0.927 \\n \\nMale H. nudus \\n13 \\ny = 0.209*x - 1.288 \\n0.859 \\n \\nFemale H. oregonensis \\n9 \\ny = 0.175*x + 0.037 \\n0.724 \\n \\nMale H. oregonensis \\n14 \\ny = 0.244*x - 0.688 \\n0.534 \\n \\n \\nCharifson 14 \\n \\nTable 2: Size and prey preference in H. nudus.  \\nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \\nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \\nfor preference. \\nIndividual \\nCarapace \\nWidth (mm) \\nPropal \\nHeight (mm) \\nNumber of \\nLacuna vincta \\nconsumed \\nNumber of \\nLittorina scutulata \\nconsumed \\n \\nG \\n \\np-value \\nFe1 \\n23.6 \\n5.9 \\n0 \\n0 \\nNT \\n \\nFe2 \\n23.1 \\n5.5 \\n15 \\n0 \\n20.8 \\np &lt; 0.001 \\nFe3 \\n20.6 \\n5 \\n0 \\n0 \\nNT \\n \\nMa1 \\n19.1 \\n5.4 \\n14 \\n0 \\n19.4 \\np &lt; 0.001 \\nMa2 \\n18.4 \\n5.4 \\n15 \\n0 \\n20.8 \\np &lt; 0.001 \\nMa3 \\n20.1 \\n6 \\n0 \\n0 \\nNT \\n \\n \\n \\n \\nCharifson 15 \\n \\n \\nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \\nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.  \\n \\nCrab Feeding Preference:  \\n \\nExpected values for both the number of L. scutulata and L. vincta consumed for the G-\\ntest are 0.5 multiplied by the total number of snails consumed by each individual crab. G-tests \\nfor individual H. nudus that eat snails were all significant at p &lt; 0.001 with 1 degree of freedom \\n(See Table 2 for statistical summary). The three crabs that did not eat either L. scutulata or L. \\nvincta could not be tested for feeding preference.  \\nCharifson 7 \\n \\n \\nSnail Consumption by Hemigrapsus nudus \\n \\nNo significant difference in crab feeding rate (snails consumed/hour) was found (F2, 21 = \\n2.52, p = 0.104) among individual H. nudus that fed on snails during the course of the \\nconsumption experiment (Figure 5). Fe2  ate snails at a rate of 0.59±0.53 snails/hour (variance is \\nstandard deviation), Ma1 feeding rate was 0.24±0.31 snails/hour, and Ma2 had a feeding rate of \\n0.80±0.38 snails/hour. Individuals Fe1, Fe3 and Ma3 did not consume any snails during the \\ncourse of the experiment.  \\n \\nDiscussion: \\n \\nA few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus \\nand Hemigrapsus orogenensis. The variance in propal height or propal width explained by \\ncarapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for \\npropal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela \\nsize parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width \\nrespectively. The R2 values for propal width regressed against carapace width were consistently \\nlower than propal height regressed against carapace width across species and sexes (Table 1). In \\ngeneral the ability of carapace width to explain the variance in chela size parameters (i.', metadata={})]\n\n\n\nresult2 = qa_chain({\"question\": query2, \"chat_history\": chat_history})\n\n\nresult2[\"answer\"]\n\n'The paper focuses on the study of snail predation by Hemigrapsus nudus and Hemigrapsus oregonensis, specifically examining sex and species differences in chela size. The materials and methods involved the measurement of carapace width and propal width in both female and male H. nudus. A line of best fit was determined using SMA regression. The propal height:carapace width ratio and propal width:carapace width ratio were analyzed to determine differences between sexes and species. The preference experiment involved providing crabs with five snails in each trial and measuring the number of snails consumed after 1.5 to 3 hours, which was then converted to a consumption rate. A total of eight feeding trials were conducted.'\n\n\n\nresult2[\"source_documents\"]\n\n[Document(page_content='The main topic of this paper is the study of snail predation by Hemigrapsus nudus and Hemigrapsus oregonensis, specifically examining sex and species differences in chela size.', metadata={}),\n Document(page_content='Figure 2: The relationship between carapace width and propal width in Hemigrapsus:\\n   - For both female and male H. nudus, a line of best fit was determined using SMA regression.\\n   - Descriptive statistics for this relationship can be found in Table 1B.\\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species:\\n   - The sex factor was statistically significant (F = 125.6, p &lt; 0.001), indicating that there is a significant difference in propal height:carapace width ratio between males and females.\\n   - The species factor was insignificant (F &gt; 0.01, p = 0.983), suggesting that there is no significant difference in propal height:carapace width ratio between H. oregonensis and H. nudus.\\n   - There was a significant interaction (F = 4.39, p = 0.042), indicating that the effect of sex on propal height:carapace width ratio may vary depending on the species.\\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species:\\n   - The sex factor was statistically significant (F1,45 = 103.8, p &lt; 0.001), indicating that there is a significant difference in propal width:carapace width ratio between males and females.\\n   - The species factor was insignificant (F1,45 = 0.09, p = 0.764), suggesting that there is no significant difference in propal width:carapace width ratio between H. oregonensis and H. nudus.\\n   - There was a significant interaction (F1,45 = 7.19, p = 0.01), indicating that the effect of sex on propal width:carapace width ratio may vary depending on the species.', metadata={}),\n Document(page_content='The crabs from the preference experiment were given five of each snail in each trial. \\nAfter 1.5 to 3 hours the number of snails consumed was counted and converted to a consumption \\nrate (snails consumed/hour). A total of eight feeding trials were conducted.', metadata={})]\n\n\n\nresult2[\"chat_history\"]\n\n[Document(page_content='question: What is this paper about?\\nanswer: The main topic of this paper is the study of snail predation by Hemigrapsus nudus and Hemigrapsus oregonensis, specifically examining sex and species differences in chela size.\\nsource_documents: [Document(page_content=\\'The main topic or subject of this paper is the \"Snail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species Differences in Chela Size.\"\\', metadata={})]', metadata={}),\n Document(page_content=\"question: What were the significant findings on the relationship mentioned?\\nanswer: From the given information, we can determine the following significant findings:\\n\\n1. Figure 2: The relationship between carapace width and propal width in Hemigrapsus:\\n   - For both female and male H. nudus, a line of best fit was determined using SMA regression.\\n   - Descriptive statistics for this relationship can be found in Table 1B.\\n\\n2. Figure 3: Differences in propal height:carapace width ratio between sex and species:\\n   - The sex factor was statistically significant (F = 125.6, p &lt; 0.001), indicating that there is a significant difference in propal height:carapace width ratio between males and females.\\n   - The species factor was insignificant (F &gt; 0.01, p = 0.983), suggesting that there is no significant difference in propal height:carapace width ratio between H. oregonensis and H. nudus.\\n   - There was a significant interaction (F = 4.39, p = 0.042), indicating that the effect of sex on propal height:carapace width ratio may vary depending on the species.\\n\\n3. Figure 4: Differences in propal width:carapace width ratio between sex and species:\\n   - The sex factor was statistically significant (F1,45 = 103.8, p &lt; 0.001), indicating that there is a significant difference in propal width:carapace width ratio between males and females.\\n   - The species factor was insignificant (F1,45 = 0.09, p = 0.764), suggesting that there is no significant difference in propal width:carapace width ratio between H. oregonensis and H. nudus.\\n   - There was a significant interaction (F1,45 = 7.19, p = 0.01), indicating that the effect of sex on propal width:carapace width ratio may vary depending on the species.\\nsource_documents: [Document(page_content='Figure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\\\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\\\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\\\n\\\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\\\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\\\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\\\nError bars represent standard error of the mean.  \\\\n\\\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\\\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\\\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\\\n0.01). Error bars represent standard error of the mean.', metadata={}), Document(page_content='Table 2: Size and prey preference in H. nudus.  \\\\nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \\\\nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \\\\nfor preference. \\\\nIndividual \\\\nCarapace \\\\nWidth (mm) \\\\nPropal \\\\nHeight (mm) \\\\nNumber of \\\\nLacuna vincta \\\\nconsumed \\\\nNumber of \\\\nLittorina scutulata \\\\nconsumed \\\\n \\\\nG \\\\n \\\\np-value \\\\nFe1 \\\\n23.6 \\\\n5.9 \\\\n0 \\\\n0 \\\\nNT \\\\n \\\\nFe2 \\\\n23.1 \\\\n5.5 \\\\n15 \\\\n0 \\\\n20.8 \\\\np &lt; 0.001 \\\\nFe3 \\\\n20.6 \\\\n5 \\\\n0 \\\\n0 \\\\nNT \\\\n \\\\nMa1 \\\\n19.1 \\\\n5.4 \\\\n14 \\\\n0 \\\\n19.4 \\\\np &lt; 0.001 \\\\nMa2 \\\\n18.4 \\\\n5.4 \\\\n15 \\\\n0 \\\\n20.8 \\\\np &lt; 0.001 \\\\nMa3 \\\\n20.1 \\\\n6 \\\\n0 \\\\n0 \\\\nNT', metadata={})]\", metadata={}),\n Document(page_content='\\nMa3 \\nMean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus \\n', metadata={})]\n\n\n\nresult3 = qa_chain({\"question\": query3, \"chat_history\": chat_history})\n\n\nresult3[\"answer\"]\n\n'The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.'\n\n\n\nresult3[\"source_documents\"]\n\n[Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth. A significant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.', metadata={})]\n\n\n\nresult3[\"chat_history\"]\n\n[Document(page_content=\"question: What is this paper about?\\nanswer: The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.\\nsource_documents: [Document(page_content='Mean Consumption Rate  \\\\n(Snails Consumed/Hour) \\\\nIndividual H. nudus', metadata={}), Document(page_content='A multitude of species coexist in the marine intertidal environment. Closely related \\\\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\\\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\\\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\\\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\\\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\\\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\\\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\\\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\\\nCharifson 3 \\\\n \\\\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\\\nmay differ, which could allow the crabs to differentiate in food resource utilization.', metadata={}), Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={})]\", metadata={}),\n Document(page_content='8 \\n0.9 \\n1 \\nFe1 \\nFe2 \\nFe3 \\nMa1 \\nMa2 \\nMa3 \\nMean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus \\n', metadata={}),\n Document(page_content='Charifson 1 \\n \\nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \\nDifferences in Chela Size. \\n \\nDavid Charifson1,2 \\n \\nMarine Invertebrate Zoology \\nSummer 2014 \\n \\n \\n \\n \\n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \\n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \\n \\n \\n \\n \\nContact information: \\nDavid Charifson \\nDepartment of Ecology and Evolution \\nStony Brook University \\n650 Life Sciences Building \\nStony Brook, NY 11794-5245 \\nDavid.charifson@stonybrook.edu  \\n \\n \\n \\n \\nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \\npredation, sexual dimorphism, character displacement  \\n \\n \\nCharifson 2 \\n \\nAbstract: \\n \\nThe relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \\nwidth increases with body size in a predictable manner in male and female crabs of both species. \\nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \\nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \\nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \\nno character displacement in this trait. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.  \\n \\nIntroduction: \\n \\nA multitude of species coexist in the marine intertidal environment. Closely related \\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\nCharifson 3 \\n \\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\nmay differ, which could allow the crabs to differentiate in food resource utilization. \\nBoth species are omnivores that eat algae and small invertebrates, including snails \\n(Behrens Yamada and', metadata={})]\n\n\n\nquery3a = \"Since the crabs were feeding on snails, what were the scientific names of the snails?\"\nresult3a = qa_chain({\"question\": query3a, \"chat_history\": chat_history})\n\n\nresult3a[\"answer\"]\n\n'The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.'\n\n\n\nresult3a[\"source_documents\"]\n\n[Document(page_content='Littorina scutulata (Gould 1849) and Littorina sitkana (Philippi 1846)', metadata={}),\n Document(page_content='Hemigrapsus nudus, Hemigrapsus oregonensis, Littorina scutulata, Lacuna vincta', metadata={}),\n Document(page_content='Hemigrapsus nudus and Hemigrapsus oregonensis', metadata={})]\n\n\n\nresult3a[\"chat_history\"]\n\n[Document(page_content=' of the chela \\nmay differ, which could allow the crabs to differentiate in food resource utilization. \\nBoth species are omnivores that eat algae and small invertebrates, including snails \\n(Behrens Yamada and Boulding 1996). The two shore crab species are known to eat Littorina \\nsitkana (Philippi 1846) and Littorina scutulata (Gould 1849), which also occur in the rocky \\nintertidal zone (Behrens Yamada and Boulding 1996). Li. scutulata moves upshore in response \\nto the presence of H. nudus and crushed conspecifics, where H. nudus density is lower (Keppel \\nand Scrosati 2004). This suggests that H. nudus represents an ecologically significant predation \\nthreat to littorines.  \\n \\nThe thick shelled littorines are difficult prey for both H. nudus and H. oregonensis as \\nneither crab species is a molluscivore specialists; they typically scrape or pick algae and softer \\ninvertebrates off rocks using their chelae (Behrens Yamada and Boulding 1996). Behrens \\nYamada and Boulding (1998) found that large H. nudus were capable of consuming Li. sitkana \\nthat were less than 8 mm in length, but had only a 37% success rate of consuming snails with \\nlengths between 5.5-7 mm .  \\nI sought to investigate differences in propus size between between males and females of \\nthese two crab species. The size of the propus of the chela is positively correlated with the \\namount of force that can be produced due to greater musculature (Behrens Yamada and Boulding \\n1998). A significant difference in propus size between the two species would suggest that further \\ntesting of character displacement may be warranted. A disparity in propus size to body size \\nbetween male and female crabs might result in different feeding rates and shell breaking \\ncapabilities. I devised a test of preference by varying snail shell strength within the same size \\nclass. The snail species Li. scutulata and Lacuna vincta (Montagu 1803) are both in the family \\nCharifson 4 \\n \\nLittorinidae and have similar shell shape but different shell thickness. Lacuna vincta has a \\nthinner, more fragile shell and is likely to be preferred as prey by shore crabs. I also hypothesize \\nthat, if chela size is held constant, female crabs will have greater snail consumption rates than \\nmale crabs. Female crabs with claws equivalent to males have a larger body mass,are likely to \\nhave greater metabolic need, and are less easily satiated. \\n \\nStudy System: \\n \\nAll specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \\nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \\ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock. These closely related \\ncrabs are morphologically similar, but can be distinguished by the presence of purple spots on \\nthe cheliped of H. nudus and abundant setae on the pereopods of H. oregonensis (Kozloff 1987). \\nLacuna vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littor', metadata={}),\n Document(page_content='Charifson 1 \\n \\nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \\nDifferences in Chela Size. \\n \\nDavid Charifson1,2 \\n \\nMarine Invertebrate Zoology \\nSummer 2014 \\n \\n \\n \\n \\n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \\n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \\n \\n \\n \\n \\nContact information: \\nDavid Charifson \\nDepartment of Ecology and Evolution \\nStony Brook University \\n650 Life Sciences Building \\nStony Brook, NY 11794-5245 \\nDavid.charifson@stonybrook.edu  \\n \\n \\n \\n \\nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \\npredation, sexual dimorphism, character displacement  \\n \\n \\nCharifson 2 \\n \\nAbstract: \\n \\nThe relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \\nwidth increases with body size in a predictable manner in male and female crabs of both species. \\nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \\nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \\nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \\nno character displacement in this trait. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.  \\n \\nIntroduction: \\n \\nA multitude of species coexist in the marine intertidal environment. Closely related \\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\nCharifson 3 \\n \\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\nmay differ, which could allow the crabs to differentiate in food resource utilization. \\nBoth species are omnivores that eat algae and small invertebrates, including snails \\n(Behrens Yamada and', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.  \\n \\nMaterials and Methods: \\nMorphometrics \\n \\nMale and females of H. oregonensis and H. nudus were measured with digital calipers \\n(0.1 mm). Each crab was measured for carapace width, propal height and propal width. Carapace \\nwidth was taken at the widest part of the carapace. Propal height was measured at the highest \\nvertical distance along the propus. Propal width was measured perpendicular to propal height, \\nfrom the left to right sides of the propus. All claw measurements were made on the left cheliped. \\nCharifson 5 \\n \\nIf there was a size disparity between the left and right claws due to regeneration of a lost claw, \\nthe crab was excluded from the study. Ratios of carapace width:propal height (CW:PH) and \\ncarapace width:propal width (CW:PW) were calculated.  \\n \\nCrab Feeding Preference \\n \\nThree female (Fe1, Fe2, Fe3) and three male (Ma1, Ma2, Ma3) crabs of H. nudus with \\npropal heights between 5-6 mm were placed in small flow-through containers. Five L. scutulata \\nand five L. vincta with shell lengths between 4-6 mm were added to each container. The ranges \\nof crab propal height and snail shell length were chosen based on prior studies to ensure that the \\ncrabs were capable of feeding on the hard-shelled L. scutulata (Behrens Yamada and Boulding \\n1998). H. oregonensis was excluded due to the rarity of female crabs of that species within the \\nrange of appropriate propal heights. After approximately 15 hours the number of L. scutulata and \\nL. vincta consumed was counted. Three trials were conducted for each crab. \\nSnail Consumption by Hemigrapsus nudus \\n \\nThe crabs from the preference experiment were given five of each snail in each trial. \\nAfter 1.5 to 3 hours the number of snails consumed was counted and converted to a consumption \\nrate (snails consumed/hour). A total of eight feeding trials were conducted.  \\n \\nStatistical Analysis \\n \\nFor the morphometric analysis, crabs were divided into four groups based on sex and \\nspecies. Standardized major axis regression was used to determine the relationship between crab \\nmorphometric parameters. Arcsin transformations were used to correct for non-normality (Sokol \\nand Rohlf 2011). Differences in CW:PH and CW:PW were analyzed using a two-way ANOVA \\nCharifson 6 \\n \\nwith factors: Sex and Species. Prey selection by H. nudus was analyzed using G-tests for each \\nindividual that consumed snails. An one-way ANOVA was used to determine differences in snail \\nconsumption rates by H. nudus.  \\n \\nResults: \\nMorphometrics: \\n \\nCarapace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was', metadata={})]\n\n\n\nresult4 = qa_chain({\"question\": query4, \"chat_history\": chat_history})\n\n\nresult4[\"answer\"]\n\n'Based on the given context, there is no specific mention of observations made in the field or any other type of data collection methods used in the paper.'\n\n\n\nresult4[\"source_documents\"]\n\n[Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}),\n Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}),\n Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={})]\n\n\n\nresult4[\"chat_history\"]\n\n[Document(page_content=\"question: What is this paper about?\\nanswer: The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.\\nsource_documents: [Document(page_content='Mean Consumption Rate  \\\\n(Snails Consumed/Hour) \\\\nIndividual H. nudus', metadata={}), Document(page_content='A multitude of species coexist in the marine intertidal environment. Closely related \\\\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\\\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\\\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\\\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\\\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\\\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\\\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\\\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\\\nCharifson 3 \\\\n \\\\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\\\nmay differ, which could allow the crabs to differentiate in food resource utilization.', metadata={}), Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Write a one sentence summary of the purpose of the paper\\nanswer: The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.\\nsource_documents: [Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}), Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\\\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\\\nless variation in the relationship between carapace width and propal height than with propal \\\\nwidth. A significant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\\\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\\\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\\\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\\\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\\\nrespectively.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Since the crabs were feeding on snails, what were the scientific names of the snails?\\nanswer: The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.\\nsource_documents: [Document(page_content='Littorina scutulata (Gould 1849) and Littorina sitkana (Philippi 1846)', metadata={}), Document(page_content='Hemigrapsus nudus, Hemigrapsus oregonensis, Littorina scutulata, Lacuna vincta', metadata={}), Document(page_content='Hemigrapsus nudus and Hemigrapsus oregonensis', metadata={})]\", metadata={})]\n\n\n\nresult5 = qa_chain({\"question\": query5, \"chat_history\": chat_history})\n\n\nresult5[\"answer\"]\n\n'The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.'\n\n\n\nresult5[\"source_documents\"]\n\n[Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}),\n Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}),\n Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={})]\n\n\n\nresult5[\"chat_history\"]\n\n[Document(page_content=\"question: Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\\nanswer: Based on the given context, there is no specific mention of observations made in the field or any other type of data collection methods used in the paper.\\nsource_documents: [Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}), Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}), Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={})]\", metadata={}),\n Document(page_content=\"question: What is this paper about?\\nanswer: The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.\\nsource_documents: [Document(page_content='Mean Consumption Rate  \\\\n(Snails Consumed/Hour) \\\\nIndividual H. nudus', metadata={}), Document(page_content='A multitude of species coexist in the marine intertidal environment. Closely related \\\\nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \\\\nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \\\\nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \\\\nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \\\\nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \\\\nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \\\\nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \\\\nconsiderable habitat overlap between these two species; the underside of a single rock may have \\\\nCharifson 3 \\\\n \\\\nroughly equal abundances of the two crab species (personal observation). The size of the chela \\\\nmay differ, which could allow the crabs to differentiate in food resource utilization.', metadata={}), Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Write a one sentence summary of the purpose of the paper\\nanswer: The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.\\nsource_documents: [Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}), Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\\\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\\\nless variation in the relationship between carapace width and propal height than with propal \\\\nwidth. A significant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\\\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\\\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\\\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\\\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\\\nrespectively.', metadata={})]\", metadata={})]\n\n\n\nresult6 = qa_chain({\"question\": query6, \"chat_history\": chat_history})\n\n\nresult6[\"answer\"]\n\n'The scientific names of the species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis.'\n\n\n\nresult6[\"source_documents\"]\n\n[Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={}),\n Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={}),\n Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.', metadata={})]\n\n\n\nresult6[\"chat_history\"]\n\n[Document(page_content=\"question: Since the crabs were feeding on snails, what were the scientific names of the snails?\\nanswer: The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.\\nsource_documents: [Document(page_content='Littorina scutulata (Gould 1849) and Littorina sitkana (Philippi 1846)', metadata={}), Document(page_content='Hemigrapsus nudus, Hemigrapsus oregonensis, Littorina scutulata, Lacuna vincta', metadata={}), Document(page_content='Hemigrapsus nudus and Hemigrapsus oregonensis', metadata={})]\", metadata={}),\n Document(page_content=\"question: Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\\nanswer: Based on the given context, there is no specific mention of observations made in the field or any other type of data collection methods used in the paper.\\nsource_documents: [Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}), Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}), Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\\nanswer: The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.\\nsource_documents: [Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}), Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}), Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={})]\", metadata={})]\n\n\n\nresult6a = qa_chain({\"question\": query6a, \"chat_history\": chat_history})\n\n\nresult6a[\"answer\"]\n\n'The locations from which the collected species were obtained are not mentioned in the given context.'\n\n\n\nresult6a[\"source_documents\"]\n\n[Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.', metadata={}),\n Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={})]\n\n\n\nresult7 = qa_chain({\"question\": query7, \"chat_history\": chat_history})\n\n\nresult7[\"answer\"]\n\n'The locations from which the collected species were obtained are not mentioned in the given context.'\n\n\n\nresult7[\"source_documents\"]\n\n[Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={}),\n Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.', metadata={})]\n\n\n\nresult7[\"chat_history\"]\n\n[Document(page_content=\"question: Where were the species collected?\\nanswer: The locations from which the collected species were obtained are not mentioned in the given context.\\nsource_documents: [Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.', metadata={}), Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\\nanswer: Based on the given context, there is no specific mention of observations made in the field or any other type of data collection methods used in the paper.\\nsource_documents: [Document(page_content='The main objective of this paper is to investigate the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The paper also examines the potential impact of sex and species on this relationship.', metadata={}), Document(page_content='The main topic or subject matter of this paper is the coexistence and competition between two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis, in the marine intertidal environment. The paper also explores the concept of character displacement and the morphological differences between the two species.', metadata={}), Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={})]\", metadata={}),\n Document(page_content=\"question: What are the scientific names of the collected species mentioned in this paper?\\nanswer: The scientific names of the species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis.\\nsource_documents: [Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={}), Document(page_content='The scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={}), Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.', metadata={})]\", metadata={})]\n\n\n\nresult7a = qa_chain({\"question\": query7a, \"chat_history\": chat_history})\n\n\nresult7a[\"answer\"]\n\n'The scientific names of the collected species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis. However, the locations from which these species were obtained are not mentioned in the given context.'\n\n\n\nresult8 = qa_chain({\"question\": query8, \"chat_history\": chat_history})\n\n\nresult8[\"answer\"]\n\n'No, the paper does not mention any specific location where the collected species were obtained.'\n\n\n\nresult9 = qa_chain({\"question\": query9, \"chat_history\": chat_history})\n\n\nresult9[\"answer\"]\n\n\"I'm sorry, but I don't have any specific coordinate locations in latitude/longitude for the collected species mentioned in the given context.\"\n\n\n\nresult10 = qa_chain({\"question\": query10, \"chat_history\": chat_history})\n\n\nresult10[\"answer\"]\n\n'No, the paper does not provide information about the specific habitat where the species were found.'\n\n\n\nresult10[\"source_documents\"]\n\n[Document(page_content='No, the paper does not mention any specific location where the collected species were obtained.', metadata={}),\n Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.\\nThe scientific names of the snails that the crabs were feeding on are Littorina scutulata and Lacuna vincta.', metadata={}),\n Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={})]\n\n\n\nresult10a = qa_chain({\"question\": query10a, \"chat_history\": chat_history})\n\n\nresult10a[\"answer\"]\n\n'No, the paper does not mention any formal name or specific geographic location for the habitat where the species were collected.'\n\n\n\nresult11 = qa_chain({\"question\": query11, \"chat_history\": chat_history})\n\n\nresult11[\"answer\"]\n\n'No, the paper does not mention any year, date, or time regarding the collection or observation of the species mentioned.'\n\n\n\nresult11[\"source_documents\"]\n\n[Document(page_content='No, the paper does not mention any specific location where the collected species were obtained.', metadata={}),\n Document(page_content='No, the paper does not mention any specific location where the collected species were obtained.', metadata={}),\n Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={})]\n\n\n\nresult11[\"chat_history\"]\n\n[Document(page_content=\"question: Does the paper mention where the species were observed or collected, and if so, what locations are given?\\nanswer: The locations from which the collected species were obtained are not mentioned in the given context.\\nsource_documents: [Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={}), Document(page_content='The research conducted in this paper is primarily focused on investigating the relationship between carapace width and propal height and width in two species of shore crabs, Hemigrapsus nudus and Hemigrapsus oregonensis.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Can you give a more specific location of the habitat such as formal name of said location?\\nanswer: No, the paper does not mention any formal name or specific geographic location for the habitat where the species were collected.\\nsource_documents: [Document(page_content='No, the paper does not mention any specific location where the collected species were obtained.', metadata={}), Document(page_content='No, the paper does not mention any specific location where the collected species were obtained.', metadata={}), Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={})]\", metadata={}),\n Document(page_content=\"question: Can you give a more specific location?\\nanswer: No, the paper does not mention any specific location where the collected species were obtained.\\nsource_documents: [Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={}), Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={}), Document(page_content='The locations from which the collected species were obtained are not mentioned in the given context.', metadata={})]\", metadata={})]\n\n\n\nresult12 = qa_chain({\"question\": query12, \"chat_history\": chat_history})\n\n\nresult12[\"answer\"]\n\n'No, the paper does not mention any visual representations such as maps, figures, tables, or diagrams.'"
  },
  {
    "objectID": "Option #2 Experiment/Option 2 Final Draft.html",
    "href": "Option #2 Experiment/Option 2 Final Draft.html",
    "title": "Tiktoken Splitter",
    "section": "",
    "text": "Possible%20Architectures.png\nimport pandas as pd\nimport os\nimport openai\nimport sys, pathlib, fitz\nfrom langchain.chains import LLMChain\nfrom langchain.chains.question_answering import load_qa_chain\nfrom langchain.chains import RetrievalQA\nfrom langchain.chains import ConversationalRetrievalChain\nfrom langchain.document_loaders import PyMuPDFLoader\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain.text_splitter import TokenTextSplitter\nfrom langchain.embeddings.openai  import OpenAIEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.retrievers import ContextualCompressionRetriever\nfrom langchain.retrievers.document_compressors import LLMChainExtractor\nfrom langchain.retrievers.document_compressors import LLMChainFilter\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.memory import VectorStoreRetrieverMemory\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain import PromptTemplate\nfrom langchain.chains.qa_with_sources import load_qa_with_sources_chain\nfrom langchain.chains.conversational_retrieval.prompts import CONDENSE_QUESTION_PROMPT\n# from langchain.prompts.chat import (\n#     ChatPromptTemplate,\n#     SystemMessagePromptTemplate,\n#     AIMessagePromptTemplate,\n#     HumanMessagePromptTemplate,\n# )\n# from langchain.schema import AIMessage, HumanMessage, SystemMessage\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv()) # read local .env file\n\nopenai.api_key  = os.environ['OPENAI_API_KEY']\n# Helper function for printing docs\n\ndef pretty_print_docs(docs):\n    print(f\"\\n{'-' * 100}\\n\".join([f\"Document {i+1}:\\n\\n\" + d.page_content for i, d in enumerate(docs)]))\ndef has_citations(page_text):\n    # List of variations of \"citations\" to check for\n    citation_variations = [\"Citations\", \"Literature Cited\", \"Literature Citations\"]\n\n    for variation in citation_variations:\n        if variation in page_text:\n            return True\n    return False\n\ndef remove_citation_pages(pdf_path):\n    doc = fitz.open(pdf_path)\n    non_citation_pages = []\n\n    for page_num in range(doc.page_count):\n        page = doc[page_num]\n        page_text = page.get_text()\n\n        if not has_citations(page_text):\n            non_citation_pages.append(page_num)\n\n    # Create a new PDF with only non-citation pages\n    new_pdf = fitz.open()\n    for page_num in non_citation_pages:\n        new_pdf.insert_pdf(doc, from_page=page_num, to_page=page_num)\n\n    return new_pdf\n\n\ninput_pdf_path = './hms/fhl_2014_Charifson_34622 (1).pdf'\n\n# Create a new PDF with citation pages removed\nnew_pdf = remove_citation_pages(input_pdf_path)\n\n# Save the new PDF to 'output.pdf'\noutput_pdf_path = 'output.pdf'\nnew_pdf.save(output_pdf_path)\nnew_pdf.close()\ndef extract_text_from_pdf(pdf_path):\n    doc = fitz.open(pdf_path)\n    text = \"\"\n    for page in doc:\n        text += page.get_text()\n    doc.close()\n    return text\n\n# Replace 'output.pdf' with the path to the PDF you created with citation pages removed\nnew_pdf_path = 'output.pdf'\n\n# Extract text from the new PDF\nnew_pdf_text = extract_text_from_pdf(new_pdf_path)\n\n# Now you can manipulate the extracted text or perform any other actions as needed\n# For example, you can print the extracted text:\nprint(new_pdf_text)\n\nCharifson 1 \n \nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \nDifferences in Chela Size. \n \nDavid Charifson1,2 \n \nMarine Invertebrate Zoology \nSummer 2014 \n \n \n \n \n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \n \n \n \n \nContact information: \nDavid Charifson \nDepartment of Ecology and Evolution \nStony Brook University \n650 Life Sciences Building \nStony Brook, NY 11794-5245 \nDavid.charifson@stonybrook.edu  \n \n \n \n \nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \npredation, sexual dimorphism, character displacement  \n \n \nCharifson 2 \n \nAbstract: \n \nThe relationship between propus size and use of snails as prey in sympatric populations \nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \nwidth increases with body size in a predictable manner in male and female crabs of both species. \nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \nno character displacement in this trait. Both species of crabs showed a strong feeding preference \nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \ndue to the ease of consumption. There were no differences in snail consumption rates between \nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \nindividual crabs.  \n \nIntroduction: \n \nA multitude of species coexist in the marine intertidal environment. Closely related \nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \nconsiderable habitat overlap between these two species; the underside of a single rock may have \nCharifson 3 \n \nroughly equal abundances of the two crab species (personal observation). The size of the chela \nmay differ, which could allow the crabs to differentiate in food resource utilization. \nBoth species are omnivores that eat algae and small invertebrates, including snails \n(Behrens Yamada and Boulding 1996). The two shore crab species are known to eat Littorina \nsitkana (Philippi 1846) and Littorina scutulata (Gould 1849), which also occur in the rocky \nintertidal zone (Behrens Yamada and Boulding 1996). Li. scutulata moves upshore in response \nto the presence of H. nudus and crushed conspecifics, where H. nudus density is lower (Keppel \nand Scrosati 2004). This suggests that H. nudus represents an ecologically significant predation \nthreat to littorines.  \n \nThe thick shelled littorines are difficult prey for both H. nudus and H. oregonensis as \nneither crab species is a molluscivore specialists; they typically scrape or pick algae and softer \ninvertebrates off rocks using their chelae (Behrens Yamada and Boulding 1996). Behrens \nYamada and Boulding (1998) found that large H. nudus were capable of consuming Li. sitkana \nthat were less than 8 mm in length, but had only a 37% success rate of consuming snails with \nlengths between 5.5-7 mm .  \nI sought to investigate differences in propus size between between males and females of \nthese two crab species. The size of the propus of the chela is positively correlated with the \namount of force that can be produced due to greater musculature (Behrens Yamada and Boulding \n1998). A significant difference in propus size between the two species would suggest that further \ntesting of character displacement may be warranted. A disparity in propus size to body size \nbetween male and female crabs might result in different feeding rates and shell breaking \ncapabilities. I devised a test of preference by varying snail shell strength within the same size \nclass. The snail species Li. scutulata and Lacuna vincta (Montagu 1803) are both in the family \nCharifson 4 \n \nLittorinidae and have similar shell shape but different shell thickness. Lacuna vincta has a \nthinner, more fragile shell and is likely to be preferred as prey by shore crabs. I also hypothesize \nthat, if chela size is held constant, female crabs will have greater snail consumption rates than \nmale crabs. Female crabs with claws equivalent to males have a larger body mass,are likely to \nhave greater metabolic need, and are less easily satiated. \n \nStudy System: \n \nAll specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock. These closely related \ncrabs are morphologically similar, but can be distinguished by the presence of purple spots on \nthe cheliped of H. nudus and abundant setae on the pereopods of H. oregonensis (Kozloff 1987). \nLacuna vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \ncollected from the rocky intertidal zone of Fourth of July Beach.  \n \nMaterials and Methods: \nMorphometrics \n \nMale and females of H. oregonensis and H. nudus were measured with digital calipers \n(0.1 mm). Each crab was measured for carapace width, propal height and propal width. Carapace \nwidth was taken at the widest part of the carapace. Propal height was measured at the highest \nvertical distance along the propus. Propal width was measured perpendicular to propal height, \nfrom the left to right sides of the propus. All claw measurements were made on the left cheliped. \nCharifson 5 \n \nIf there was a size disparity between the left and right claws due to regeneration of a lost claw, \nthe crab was excluded from the study. Ratios of carapace width:propal height (CW:PH) and \ncarapace width:propal width (CW:PW) were calculated.  \n \nCrab Feeding Preference \n \nThree female (Fe1, Fe2, Fe3) and three male (Ma1, Ma2, Ma3) crabs of H. nudus with \npropal heights between 5-6 mm were placed in small flow-through containers. Five L. scutulata \nand five L. vincta with shell lengths between 4-6 mm were added to each container. The ranges \nof crab propal height and snail shell length were chosen based on prior studies to ensure that the \ncrabs were capable of feeding on the hard-shelled L. scutulata (Behrens Yamada and Boulding \n1998). H. oregonensis was excluded due to the rarity of female crabs of that species within the \nrange of appropriate propal heights. After approximately 15 hours the number of L. scutulata and \nL. vincta consumed was counted. Three trials were conducted for each crab. \nSnail Consumption by Hemigrapsus nudus \n \nThe crabs from the preference experiment were given five of each snail in each trial. \nAfter 1.5 to 3 hours the number of snails consumed was counted and converted to a consumption \nrate (snails consumed/hour). A total of eight feeding trials were conducted.  \n \nStatistical Analysis \n \nFor the morphometric analysis, crabs were divided into four groups based on sex and \nspecies. Standardized major axis regression was used to determine the relationship between crab \nmorphometric parameters. Arcsin transformations were used to correct for non-normality (Sokol \nand Rohlf 2011). Differences in CW:PH and CW:PW were analyzed using a two-way ANOVA \nCharifson 6 \n \nwith factors: Sex and Species. Prey selection by H. nudus was analyzed using G-tests for each \nindividual that consumed snails. An one-way ANOVA was used to determine differences in snail \nconsumption rates by H. nudus.  \n \nResults: \nMorphometrics: \n \nCarapace width was a good predictor of both propal height (Figure 1, Table 1A) and \npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \nless variation in the relationship between carapace width and propal height than with propal \nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \nrespectively.  \n \nCrab Feeding Preference:  \n \nExpected values for both the number of L. scutulata and L. vincta consumed for the G-\ntest are 0.5 multiplied by the total number of snails consumed by each individual crab. G-tests \nfor individual H. nudus that eat snails were all significant at p &lt; 0.001 with 1 degree of freedom \n(See Table 2 for statistical summary). The three crabs that did not eat either L. scutulata or L. \nvincta could not be tested for feeding preference.  \nCharifson 7 \n \n \nSnail Consumption by Hemigrapsus nudus \n \nNo significant difference in crab feeding rate (snails consumed/hour) was found (F2, 21 = \n2.52, p = 0.104) among individual H. nudus that fed on snails during the course of the \nconsumption experiment (Figure 5). Fe2  ate snails at a rate of 0.59±0.53 snails/hour (variance is \nstandard deviation), Ma1 feeding rate was 0.24±0.31 snails/hour, and Ma2 had a feeding rate of \n0.80±0.38 snails/hour. Individuals Fe1, Fe3 and Ma3 did not consume any snails during the \ncourse of the experiment.  \n \nDiscussion: \n \nA few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus \nand Hemigrapsus orogenensis. The variance in propal height or propal width explained by \ncarapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for \npropal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela \nsize parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width \nrespectively. The R2 values for propal width regressed against carapace width were consistently \nlower than propal height regressed against carapace width across species and sexes (Table 1). In \ngeneral the ability of carapace width to explain the variance in chela size parameters (i.e.: R2 \nvalues) was greater in females of both crab species (Table 1, Figures 1 and 2). Males may have \nmore variation in claw size due to trade-offs between claw size and factors like feeding \nefficiency or resource allocation. Trade-offs relating to chela size are found in fiddler crabs, \nwhich exhibit extreme sexual dimorphism. Fiddler crabs have a trade-off between the intrasexual \ncompetition and intersexual signaling functions of the dimorphic claw (Swanson et al. 2013). \nCharifson 8 \n \nThis is not to say that the particular trade-offs in fiddler crabs case are analogous to that of \nHemigrapsus, since both claws in the two shore crabs in this study are used in feeding.  \nSexual dimorphism in chela size, which is readily apparent to the eye in both \nHemigrapsus nudus and Hemigrapsus oregonensis, was detected statistically (Figures 3 and 4). \nThe two-way ANOVA with factors sex and species did not show a significant species effect, \nsuggesting that the claws of both shore crabs produce roughly the same force and are \nfunctionally equivalent (Behrens Yamada and Boulding 1998). The lack of morphological \ndifference in the size of the chelae between the crab species removes the possibility of character \ndisplacement in the trait. It should be noted that this study was not designed to test for character \ndisplacement, but to determine if this would be an interesting question for future investigations. \nTo make a compelling case for character displacement it is necessary to compare multiple \nsympatric and allopatric populations with similar abiotic and biotic conditions (Stuart and Losos \n2013). Also it must be demonstrated that the trait differs due to genetic differences between \nsympatric and allopatric populations, that the differences between the populations are not due to \nspecies sorting, that the morphological trait is correlated to differences in resource use between \nthe two sympatric species, and that the similar phenotype in allopatric populations compete for \nthe same resources (Stuart and Losos 2013). The tendency of H. nudus to occupy the upper \nintertidal zone (Sliger 1987), despite considerable overlap with H. oregonensis, may provide \nenough differential resource use to prevent exclusion in sympatry. Desiccation tolerance may be \na better trait to test for character displacement in these shore crabs.  \nH. nudus males and females clearly preferred to eat the thinner shelled Lacuna vincta \n(Table 2). During the course of the feeding preference experiment all the crabs that ate snails \nconsumed L. vincta exclusively. However, one Littorina scutuala was eaten by H. nudus when \nCharifson 9 \n \ndetermining consumption rates. The six crabs were chosen because their claws were of \nappropriate size to eat littorines with shell length between 4-6 mm, yet only half of the crabs ate \nthese snails. This could be due to insufficient time to acclimate H. nudus to lab conditions and \npossibly reduced feeding associated with molting. Male snow crabs, Chionoecetes opilio, were \nshown to cease feeding 3-6 weeks before and 3-4 weeks after molting (O’Halloran and O’Dor \n1988).  \nIt was my original intention to test for sex differences in consumption rates, but this was \nnot possible as I could not collect many crabs of the appropriate claw size for gastropod feeding \nand many of the crabs I did collect did not feed. There were no statistically significant \ndifferences in consumption rates (snails eaten/hour) among the three feeding H. nudus. These \nindividuals had highly variable feeding rates, mostly due to trials in which the crab did not feed. \nSylvia Behrens Yamada and Elizabeth Boulding (1998) found that H. nudus consumed 1.8 \nLittorina. sitkana/individual crab/day. In my study crabs fed on 13.03 Lacuna vincta/individual \ncrab/ day. The greater consumption rate in my study is likely due to the easily breakable shells of \nLa. vincta.  \nThe findings of this study suggest that there is no potential for character displacement of \nchela size in the sympatric H. nudus and H. oregonensis. This leaves the question of species co-\noccurrence open to other possibilities. H. nudus has a strong preference for La. vincta, but it \nseems as if there have been no studies that show predation on La. vincta in the field. It should be \nnoted that H. nudus and La. vincta usually occupy different portions of the intertidal and may \nhave little contact with each other, unlike the relationship between H. nudus and Li. scutulata. \nThere is some potential for overlap in the winter when La. vincta migrates up shore. Although no \ndifferences in consumption rates between male and female H. nudus were found, this might be \nCharifson 10 \n \ndue to logistical issues surrounding the experimental design and little replication. Future studies \nshould include more crabs, the exclusion of non-feeding crabs, and trial periods with longer time \nintervals. Additionally, any subsequent study should utilize multivariate and geometric \nmorphometric methods to quantify claw shape instead of using ratios, as two similar ratios may \nhave different shape.  \n \nAcknowledgements: \n \nI would like to thank Dianna Padilla, Michael LaBarbera, and Kevin Turner for advice \nrelating to the experimental design of this study. I would also like to thank the director and staff \nof Friday Harbor Laboratories for use of facilities and permission to collect organisms. Friday \nHarbor Laboratories, The Libbie Hyman Scholarship, Society for Integrative and Comparative \nBiology, and the Stony Brook Department of Ecology and Evolution provided financial support \nand have my gratitude.  \n \n \n \n \n \n \n \n \n \n \nCharifson 12 \n \nSwanson, B. O., George, M. N., Anderson, S. T., and Christy, J. H. 2013. Evolutionary variation\n \nin the mechanics of fiddler crab claws. BMC Evolutionary Biology 13: 137. \n \n \n \n \n \n \n \n \n \nCharifson 13 \n \nTable 1: SMA regressions of carapace width and propus measures.  \nA) The relationship between carapace width and propal height. x is carapace width and y is \npropal height. B) The relationship between carapace width and propal height. x is carapace width \nand y is propal width.  \n \n \n \nSMA Regression  \n \nA \n \nN \nCarapace Width vs Propal Height  \nR2 \n \nFemale H. nudus \n13 \ny = 0.273*x - 0.678 \n0.976 \n \nMale H. nudus \n13 \ny = 0.311*x - 1.385 \n0.868 \n \nFemale H. oregonensis \n9 \ny = 0.351*x - 0.833 \n0.894 \n \nMale H. oregonensis \n14 \ny = 0.39*x - 1.149 \n0.693 \n \n \n \n \n \n \n \n \nSMA Regression  \n \nB \n \nN \nCarapace Width vs Propal Width  \nR2 \n \nFemale H. nudus \n13 \ny = 0.157*x - 0.386 \n0.927 \n \nMale H. nudus \n13 \ny = 0.209*x - 1.288 \n0.859 \n \nFemale H. oregonensis \n9 \ny = 0.175*x + 0.037 \n0.724 \n \nMale H. oregonensis \n14 \ny = 0.244*x - 0.688 \n0.534 \n \n \nCharifson 14 \n \nTable 2: Size and prey preference in H. nudus.  \nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \nfor preference. \nIndividual \nCarapace \nWidth (mm) \nPropal \nHeight (mm) \nNumber of \nLacuna vincta \nconsumed \nNumber of \nLittorina scutulata \nconsumed \n \nG \n \np-value \nFe1 \n23.6 \n5.9 \n0 \n0 \nNT \n \nFe2 \n23.1 \n5.5 \n15 \n0 \n20.8 \np &lt; 0.001 \nFe3 \n20.6 \n5 \n0 \n0 \nNT \n \nMa1 \n19.1 \n5.4 \n14 \n0 \n19.4 \np &lt; 0.001 \nMa2 \n18.4 \n5.4 \n15 \n0 \n20.8 \np &lt; 0.001 \nMa3 \n20.1 \n6 \n0 \n0 \nNT \n \n \n \n \nCharifson 15 \n \n \nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \nC) Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 16 \n \n \nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 17 \n \n \nFigure 3: Differences in propal height:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \nError bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \n0.3 \n0.35 \nH. nudus \nH. oregonensis \nPropal Height:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 18 \n \n \nFigure 4: Differences in propal width:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \n0.01). Error bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \nH. nudus \nH. oregonensis \nPropal Widtht:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 19 \n \n \nFigure 5: Consumption rates by individual H. nudus.  \nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \nthe mean.  \n  \n0 \n0.1 \n0.2 \n0.3 \n0.4 \n0.5 \n0.6 \n0.7 \n0.8 \n0.9 \n1 \nFe1 \nFe2 \nFe3 \nMa1 \nMa2 \nMa3 \nMean Consumption Rate  \n(Snails Consumed/Hour) \nIndividual H. nudus\n# Read in some Data\nloader = PyMuPDFLoader(\"hms/fhl_2014_Charifson_34622 (1).pdf\")\n\n# Now taht we have our PDF document loaded into a loader object, we move onto text splitters\npages = loader.load_and_split()\n# with open(\"hms/kr111tr5711.txt\",  encoding=\"utf8\") as f:\n#     text_file = f.read()"
  },
  {
    "objectID": "Option #2 Experiment/Option 2 Final Draft.html#faiss-vectorstore",
    "href": "Option #2 Experiment/Option 2 Final Draft.html#faiss-vectorstore",
    "title": "Tiktoken Splitter",
    "section": "FAISS Vectorstore",
    "text": "FAISS Vectorstore\nFaiss is a library for efficient similarity search and clustering of dense vectors. It contains algorithms that search in sets of vectors of any size, up to ones that possibly do not fit in RAM. It also contains supporting code for evaluation and parameter tuning.\nTo retrieve text, there are two search types you can choose:\n\nsearch_type=“similarity” uses similarity search in the retriever object where it selects text chunk vectors that are most similar to the question vector.\nsearch_type=“mmr” uses the maximum marginal relevance search where it optimizes for similarity to query AND diversity among selected documents.\n\nIn our case, we wouldnt want to much diversity in our documents as we want the most accurate information. K = 3 returns the 3 most relevant documents.\nAs you will see, there are some inconsistencies in K as some returned 1, 2, or more than 3 relevant documents.\n\nvector_store = FAISS.from_documents(docs2, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})"
  },
  {
    "objectID": "Option #2 Experiment/Option 2 Final Draft.html#custom-prompts",
    "href": "Option #2 Experiment/Option 2 Final Draft.html#custom-prompts",
    "title": "Tiktoken Splitter",
    "section": "Custom Prompts",
    "text": "Custom Prompts\nYou can pass in custom prompts to do question answering. These prompts are the same prompts as you can pass into the base question answering chain\n\n# Build prompt\ntemplate = \"\"\"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer. Use three sentences maximum. Keep the answer as concise as possible. \nAvoid pulling context from the literature cited section starting on page 10\n{context}\nQuestion: {question}\nHelpful Answer:\"\"\"\nQA_CHAIN_PROMPT = PromptTemplate.from_template(template)"
  },
  {
    "objectID": "Option #2 Experiment/Option 2 Final Draft.html#conversationalretrievalchain-similarity-search-w-conversationbuffermemory",
    "href": "Option #2 Experiment/Option 2 Final Draft.html#conversationalretrievalchain-similarity-search-w-conversationbuffermemory",
    "title": "Tiktoken Splitter",
    "section": "ConversationalRetrievalChain Similarity Search w/ ConversationBufferMemory",
    "text": "ConversationalRetrievalChain Similarity Search w/ ConversationBufferMemory\n\ntk_text_splitter = TokenTextSplitter(chunk_size = 800, chunk_overlap = 50)\n\ndocs3 = tk_text_splitter.split_text(new_pdf_text)\n\n\nvector_store2 = FAISS.from_texts(docs3, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})\n\n\nllm = ChatOpenAI(temperature=0, model_name='gpt-3.5-turbo')\n\ncompressor = LLMChainExtractor.from_llm(llm)\n\ncompression_retriever2 = ContextualCompressionRetriever(base_compressor = compressor,base_retriever=vector_store2)\n\n\ncustom_template = \"\"\"Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question. Please use a maximum of 4 sentences. If you do not know the answer reply with 'I am sorry'.\n1. SPECIES NAME: The scientific name (species name) of any plant, animal, fungus, alga or bacterium consists of two Latinized words. The first word is the name of the genus to which the organism belongs. The second word is the specific epithet or specific term of the species. Together, the genus plus the specific epithet make up the species name. The species name and scientific name are synonyms.\n2. HABITAT: A species habitat can be seen as the physical manifestation of its ecological niche.\n3. LOC: Name of any geographic location, like cities, countries, continents, districts etc.\n\nExamples:\n\n1. Sentence: Strongylocentrotus fransiscanus and S. purpuratus were obtained from the subtidal and intertidal regions, respectively, of Monterey Bay.\n\"Output: {{'SPECIES NAME': ['Strongylocentrotus fransiscanus', 'S. purpuratus'], 'HABITAT': ['subtidal', 'intertidal'], 'LOC': ['Monterey Bay']}}\n\n2. Sentence: Cucumaria curata and C. pseudocurata live and feed in the hydrodynamically stressful environment of exposed intertidal areas.\nOutput: {{'SPECIES NAME': ['Cucumaria curata', 'C. pseudocurata'], 'HABITAT': ['exposed intertidal'], 'LOC': ['None']}}\\n\"\n\nChat History:\n{chat_history}\nFollow Up Input: {question}\ninputVariables: [\"context\", \"question\", \"chat_history\"]\n\"\"\"\n\n\nCUSTOM_QUESTION_PROMPT = PromptTemplate.from_template(custom_template)\n\n\n# We can now create a memory object, which is necessary to track the\n# inputs/outputs and hold a conversation.\n\n\nfrom langchain.memory import ConversationBufferMemory\nmemory = ConversationBufferMemory(llm=llm, input_key='question', output_key='answer', memory_key=\"chat_history\", return_messages=True)\n\n\n# We now initialize the ConversationalRetrievalChain\n\n\nqa_chain_2 = ConversationalRetrievalChain.from_llm(ChatOpenAI(), \n                                                 compression_retriever2,\n                                                 memory = memory,\n                                                 return_source_documents = True,\n                                                 condense_question_prompt = CUSTOM_QUESTION_PROMPT)\n                                                \n\n\nquery = \"What is this paper about?\"\nquery1a = \"What were the significant findings on the relationship mentioned?\"\nquery2 = \"Summarize the paper concisely with reference to materials and methods.\"\nquery3 = \"Write a one sentence summary of the purpose of the paper\"\nquery4 = \"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\"\nquery5 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\nquery6 = \"What are the scientific names of the collected species mentioned in this paper?\"\nquery6a = \"Were there other species collected?\"\nquery7 = \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nquery7a = \"Please list the species collected based on their scientific names along with location of collection.\"\nquery8 = \"Can you give a more specific location?\"\nquery9 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nquery10 = \"In what habitat were the species found?\"\nquery10a = \"Can you give a more specific location of the habitat such as formal name of said location?\"\nquery11 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper?\"\n\n\nchat_history = []\n\n\nresult1a = qa_chain_2({\"question\": query, \"chat_history\": chat_history})\n\n\n#\"What is this paper about?\"\nresult1a[\"answer\"]\n\n'This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.'\n\n\n\nresult1a[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={}),\n Document(page_content='The relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \\nwidth increases with body size in a predictable manner in male and female crabs of both species. \\nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \\nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \\nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \\nno character displacement in this trait. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.', metadata={})]\n\n\n\nresult1a[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False)]\n\n\n\nresult1b = qa_chain_2({\"question\": query, \"chat_history\": chat_history})\n\n\n# What were the significant findings on the relationship mentioned\nresult1b[\"answer\"]\n\n'The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.'\n\n\n\nresult1b[\"source_documents\"]\n\n[Document(page_content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={}),\n Document(page_content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={}),\n Document(page_content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. It investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={})]\n\n\n\nresult1b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False)]\n\n\n\nresult2b = qa_chain_2({\"question\": query2, \"chat_history\": chat_history})\n\n\n#\"Summarize the paper concisely with reference to materials and methods.\"\n\nresult2b[\"answer\"]\n\n'The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.'\n\n\n\nresult2b[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n\\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \\nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.', metadata={})]\n\n\n\nresult2b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='Summarize the paper concisely with reference to materials and methods.', additional_kwargs={}, example=False),\n AIMessage(content='The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.', additional_kwargs={}, example=False)]\n\n\n\nresult3b = qa_chain_2({\"question\": query3, \"chat_history\": chat_history})\n\n\n#\"Write a one sentence summary of the purpose of the paper\"\n\nresult3b[\"answer\"]\n\n'Based on the provided context, it is not possible to determine the purpose or main objective of the paper.'\n\n\n\nresult3b[\"source_documents\"]\n\n[Document(page_content='Table 1: SMA regressions of carapace width and propus measures.  \\nA) The relationship between carapace width and propal height. x is carapace width and y is \\npropal height. B) The relationship between carapace width and propal height. x is carapace width \\nand y is propal width.', metadata={})]\n\n\n\nresult3b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='Summarize the paper concisely with reference to materials and methods.', additional_kwargs={}, example=False),\n AIMessage(content='The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.', additional_kwargs={}, example=False),\n HumanMessage(content='Write a one sentence summary of the purpose of the paper', additional_kwargs={}, example=False),\n AIMessage(content='Based on the provided context, it is not possible to determine the purpose or main objective of the paper.', additional_kwargs={}, example=False)]\n\n\n\nresult4b = qa_chain_2({\"question\": query4, \"chat_history\": chat_history})\n\n\n#\"Terms that may be used to identify an observation include “in the field”, \n#“this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”,\n#“harvested”, “found”, etc. Does the paper include one or more observations?\"\n\nresult4b[\"answer\"]\n\n'Yes, the paper includes multiple observations.'\n\n\n\nresult4b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='There were no detectible difference in chela size between H. nudus and H. oregonensis. Both species of crabs showed a strong feeding preference for the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata. There were no differences in snail consumption rates between male and female H. nudus of similar propal heights.', metadata={})]\n\n\n\nresult5b = qa_chain_2({\"question\": query5, \"chat_history\": chat_history})\n\n\n#\"Does this paper contain observational or experimental research conducted in the natural environment \n#or with organisms collected in nature?\"\n\nresult5b[\"answer\"]\n\n'Based on the given context, it appears that the research described in the paper involves observational research conducted in the natural environment. The researchers collected snails from different locations in the natural habitat and observed the feeding preferences of the crabs in their natural environment.'\n\n\n\nresult5b[\"source_documents\"]\n\n[Document(page_content='The relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={})]\n\n\n\nresult6b = qa_chain_2({\"question\": query6, \"chat_history\": chat_history})\n\n\n# \"What are the scientific names of the collected species mentioned in this paper?\"\n\nresult6b[\"answer\"]\n\n'The scientific names of the collected species mentioned in the paper are as follows:\\n\\n- Lacuna vincta\\n- Littorina scutulata\\n- Hemigrapsus nudus\\n- Hemigrapsus oregonensis'\n\n\n\nresult6b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Hemigrapsus nudus, Hemigrapsus oregonensis, Littorina scutulata, Lacuna vincta', metadata={})]\n\n\n\nresult7b = qa_chain_2({\"question\": query7, \"chat_history\": chat_history})\n\n\n#\"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nresult7b[\"answer\"]\n\n'Yes, the paper mentions the locations where the species were collected. Lacuna vincta was collected at False Bay and Dead Man Cove, while Littorina scutulata was collected from the rocky intertidal zone of Fourth of July Beach.'\n\n\n\nresult7b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Both species of crabs showed a strong feeding preference for the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely due to the ease of consumption.', metadata={})]\n\n\n\nresult7c = qa_chain_2({\"question\": query7a, \"chat_history\": chat_history})\n\n\n# \"Can you give a more specific location?\"\n\nresult7c[\"answer\"]\n\n'- Lacuna vincta: collected at False Bay and Dead Man Cove.\\n- Littorina scutulata: collected from the rocky intertidal zone of Fourth of July Beach.\\n- Hemigrapsus nudus and Hemigrapsus oregonensis: The specific locations of collection are not mentioned in the given context.'\n\n\n\nresult8b = qa_chain_2({\"question\": query8, \"chat_history\": chat_history})\n\n\nresult8b[\"answer\"]\n\n'Yes, the una vincta gastropods were collected at False Bay and Dead Man Cove, while the Littorina scutulata gastropods were collected from the rocky intertidal zone of Fourth of July Beach.'\n\n\n\nresult8b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={})]\n\n\n\nresult9b = qa_chain_2({\"question\": query9, \"chat_history\": chat_history})\n\n\n# \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nresult9b[\"answer\"]\n\n'Yes, there are coordinate locations given in latitude/longitude.'\n\n\n\nresult9b[\"source_documents\"]\n\n[]\n\n\n\nresult10b = qa_chain_2({\"question\": query10, \"chat_history\": chat_history})\n\n\n#  \"In what habitat were the species found?\"\nresult10b[\"answer\"]\n\n'The species were found in the rocky intertidal zone and adjacent intertidal areas of False Bay, Dead Man Cove, Fourth of July Beach, and the intertidal adjacent to the Friday Harbor Laboratories dock on San Juan Island, Washington.'\n\n\n\nresult10b[\"source_documents\"]\n\n[Document(page_content='There is still considerable habitat overlap between these two species; the underside of a single rock may have roughly equal abundances of the two crab species (personal observation).', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='All specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \\nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \\ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock.', metadata={})]\n\n\n\nresult10c = qa_chain_2({\"question\": query10a, \"chat_history\": chat_history})\n\n\n# \"Can you give a more specific location of the habitat such as formal name of said location?\"\nresult10c[\"answer\"]\n\n'Yes, the specific locations mentioned in the context are False Bay, Dead Man Cove, and Fourth of July Beach, all of which are on San Juan Island, Washington. There is no mention of a formal name for these locations.'\n\n\n\nresult10c[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='All specimens were collected on San Juan Island, Washington. Two shore crabs (clade: Brachyura: Family Grapsidae), Hemigrapsus oregonensis and Hemigrapsus nudus were collected in the intertidal adjacent to the Friday Harbor Laboratories dock.', metadata={})]\n\n\n\nresult11b = qa_chain_2({\"question\": query11, \"chat_history\": chat_history})\n\n\n# \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\nresult11b[\"answer\"]\n\n'Yes, the paper mentions the year as \"Summer 2014\". However, it does not provide specific dates or times for when the species were collected or observed.'\n\n\n\nresult11b['source_documents']\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Summer 2014', metadata={})]\n\n\n\nresult12b = qa_chain_2({\"question\": query12, \"chat_history\": chat_history})\n\n\nresult12b[\"answer\"]\n\n'Yes, there are figures and tables in the paper. Specifically, there are Figure 1, Table 1A, Figure 2, Table 1B, Figure 3, and Figure 4.'\n\n\n\n#  \"Are there any maps, figures, tables or diagrams in the paper?\"\nresult12b[\"source_documents\"]\n\n[Document(page_content='Figure 1, Table 1A, Figure 2, Table 1B, Figure 3, Figure 4', metadata={}),\n Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n\\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.', metadata={})]"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html",
    "href": "Option #1 Experiment/Option #1.html",
    "title": "MultiQueryRetriever",
    "section": "",
    "text": "Possible%20Architectures.png\nimport pandas as pd\nimport os\nimport openai\nimport logging\nimport sys, pathlib, fitz\nfrom typing import List\nfrom langchain import LLMChain\nfrom pydantic import BaseModel, Field\nfrom langchain.prompts import PromptTemplate\nfrom langchain.output_parsers import PydanticOutputParser\nfrom langchain.text_splitter import SentenceTransformersTokenTextSplitter\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain.embeddings import SentenceTransformerEmbeddings\nfrom langchain.embeddings import HuggingFaceEmbeddings\nfrom langchain.retrievers.multi_query import MultiQueryRetriever\nfrom langchain.chains import RetrievalQA\nfrom langchain.chains import ConversationalRetrievalChain\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain.document_loaders import PyMuPDFLoader\nfrom langchain.vectorstores import Annoy\nfrom langchain.chat_models import ChatOpenAI\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv()) # read local .env file\n\nopenai.api_key  = os.environ['OPENAI_API_KEY']\n# os.environ[\"OPENAI_API_KEY\"] = \"\"\n# Helper function for printing docs\n\ndef pretty_print_docs(docs):\n    print(f\"\\n{'-' * 100}\\n\".join([f\"Document {i+1}:\\n\\n\" + d.page_content for i, d in enumerate(docs)]))"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html#extract-text-from-a-pymupdf",
    "href": "Option #1 Experiment/Option #1.html#extract-text-from-a-pymupdf",
    "title": "MultiQueryRetriever",
    "section": "Extract text from a PyMuPDF",
    "text": "Extract text from a PyMuPDF\nAccording to LangChain, PyMuPDFLoader is the fastest PDF parsing option and contains detailed metadata about the PDF and its pages, as well as returns one document per page.\n\n# Read in some Data\nloader = PyMuPDFLoader(\"hms/fhl_2014_Charifson_34622 (1).pdf\")\n\n# Now that we have our PDF document loaded into a loader object, we move onto text splitters\npages = loader.load()\n\n\nlen(pages)\n\n19"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html#text-splitters",
    "href": "Option #1 Experiment/Option #1.html#text-splitters",
    "title": "MultiQueryRetriever",
    "section": "Text Splitters",
    "text": "Text Splitters\nThe concept of text splitters revolves around the need to break down long pieces of text into smaller, meaningful chunks.\nThe goal is to split the text in a way that keeps semantically related pieces together, with th definition of “semantically related depending on the specific type of text being processed.\nLanguage models have a token limit. You should not exceed the token limit. When you split your text into chunks it is therefore a good idea to count the number of tokens. There are many tokenizers. When you count tokens in your text you should use the same tokenizer as used in the language model.\nText splitter allow customization:\n\nChunk_size parameter determines the number of text inputs that will be grouped together as a single request or chunk. This parameter allows you to control the granularity of the chnks and how much text is processed together at once.\nChunk_overlap parameter refers to the maximum overlap between consecutive chunks. By overlap inclusion, the TextSplitter ensures that is a continuity and context maintained between the chunks i.e. preserves the flow of information and avoids abrupt transitions between chunks.\n\n\nSentenceTransformers\nThe SentenceTransformersTokenTextSplitter is a specialized text splitter for use with the sentence-transformer models. The default behaviour is to split the text into chunks that fit the token window of the sentence transformer model that you would like to use.\n\ntext_splitter = SentenceTransformersTokenTextSplitter(chunk_size=1000,chunk_overlap=20, length_function = len)\n\n\ndocs = text_splitter.split_documents(pages)\n\n\nlen(docs)\n\n28\n\n\n\ndocs[0].metadata\n\n{'source': 'hms/fhl_2014_Charifson_34622 (1).pdf',\n 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf',\n 'page': 0,\n 'total_pages': 19,\n 'format': 'PDF 1.5',\n 'title': '',\n 'author': 'David',\n 'subject': '',\n 'keywords': '',\n 'creator': 'Microsoft® Office Word 2007',\n 'producer': 'Microsoft® Office Word 2007',\n 'creationDate': \"D:20140723120649-04'00'\",\n 'modDate': \"D:20140723120649-04'00'\",\n 'trapped': ''}"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html#text-embedding",
    "href": "Option #1 Experiment/Option #1.html#text-embedding",
    "title": "MultiQueryRetriever",
    "section": "Text embedding",
    "text": "Text embedding\nEmbeddings create a vector representation of a piece of text. This is useful because it means we can think about text in the vector space, and do things like semantic search where we look for pieces of text that are most similar in the vector space.\nSentenceTransformers embeddings are called using the HuggingFaceEmbeddings integration. We have also added an alias for SentenceTransformerEmbeddings for users who are more familiar with directly using that package.\nSentenceTransformers is a python package that can generate text and image embeddings, originating from Sentence-BERT\n\nembeddings = SentenceTransformerEmbeddings()\n\n\nAnnoy\nAnnoy (Approximate Nearest Neighbors Oh Yeah) is a C++ library with Python bindings to search for points in space that are close to a given query point. It also creates large read-only file-based data structures that are mmapped into memory so that many processes may share the same data.\nNOTE: Annoy is read-only - once the index is built you cannot add any more emebddings! If you want to progressively add new entries to your VectorStore then better choose an alternative!\n\nvs2 = Annoy.from_documents(docs, embeddings)\n\n\nquery = \"what is the paper about?\"\n\n\n#the score is a distance metric, so lower is better\n\nvs2.similarity_search_with_score(query, k=3)\n\n[(Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3306306600570679),\n (Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3383784294128418),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3411223888397217)]\n\n\n\nquery2 = \"What are the scientific names of the species mentioned in this paper?\"\n\n\nvs2.similarity_search_with_score(query2, k=3)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0272287130355835),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1021348237991333),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1077861785888672)]\n\n\n\nquery3 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\n\n\nvs2.similarity_search_with_score(query3, k=3)\n\n[(Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.056341290473938),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0581932067871094),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.070095419883728)]\n\n\n\nquery4 = \"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations? \"\n\n\nvs2.similarity_search_with_score(query4, k=4)\n\n[(Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2470710277557373),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2504805326461792),\n (Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.272005558013916),\n (Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2738001346588135)]\n\n\n\nquery5 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\n\nvs2.similarity_search_with_score(query5, k=4)\n\n[(Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.056341290473938),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0581932067871094),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.070095419883728),\n (Document(page_content='charifson 10 due to logistical issues surrounding the experimental design and little replication. future studies should include more crabs, the exclusion of non - feeding crabs, and trial periods with longer time intervals. additionally, any subsequent study should utilize multivariate and geometric morphometric methods to quantify claw shape instead of using ratios, as two similar ratios may have different shape. acknowledgements : i would like to thank dianna padilla, michael labarbera, and kevin turner for advice relating to the experimental design of this study. i would also like to thank the director and staff of friday harbor laboratories for use of facilities and permission to collect organisms. friday harbor laboratories, the libbie hyman scholarship, society for integrative and comparative biology, and the stony brook department of ecology and evolution provided financial support and have my gratitude.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 9, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1006144285202026)]\n\n\n\nquery6= \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\n\nvs2.similarity_search_with_score(query6, k=4)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.018962025642395),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.073420524597168),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1218184232711792),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1521369218826294)]\n\n\n\nquery7 = \"In what habitat were the species found?\"\n\nvs2.similarity_search_with_score(query7, k=4)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9531382322311401),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9748102426528931),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.044095516204834),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0802817344665527)]\n\n\n\nquery8 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\nvs2.similarity_search_with_score(query8, k=4)\n\n[(Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0603522062301636),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0874381065368652),\n (Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1357213258743286),\n (Document(page_content='charifson 18 figure 4 : differences in propal width : carapace width ratio between sex and species. the sex factor was statistically significant ( f1, 45 = 103. 8. p &lt; 0. 001 ), while the species factor was insignificant ( f1, 45 = 0. 09, p = 0. 764 ). there was a significant interaction ( f1, 45 = 7. 19, p = 0. 01 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 h. nudus h. oregonensis propal widtht : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 17, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.1512439250946045)]\n\n\n\nquery9 = \"Can you give a more specific location?\"\n\nvs2.similarity_search_with_score(query9, k=4)\n\n[(Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2532789707183838),\n (Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3255820274353027),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.362636685371399),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3639099597930908)]\n\n\n\nquery10 = \"In what habitat were the species found?\"\n\nvs2.similarity_search_with_score(query10, k=4)\n\n[(Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9531382322311401),\n (Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  0.9748102426528931),\n (Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.044095516204834),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.0802817344665527)]\n\n\n\nquery11 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\n\nvs2.similarity_search_with_score(query11, k=4)\n\n[(Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.2676454782485962),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3674745559692383),\n (Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3696166276931763),\n (Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.381576418876648)]\n\n\n\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper??\"\n\nvs2.similarity_search_with_score(query12, k=4)\n\n[(Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3229398727416992),\n (Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3319050073623657),\n (Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3328725099563599),\n (Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n  1.3340879678726196)]"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html#map-refine-document-chain",
    "href": "Option #1 Experiment/Option #1.html#map-refine-document-chain",
    "title": "MultiQueryRetriever",
    "section": "Map Refine Document Chain",
    "text": "Map Refine Document Chain\nThe refine documents chain constructs a response by looping over the input documents and iteratively updating its answer. For each document, it passes all non-document inputs, the current document, and the latest intermediate answer to an LLM chain to get a new answer.\nSince the Refine chain only passes a single document to the LLM at a time, it is well-suited for tasks that require analyzing more documents than can fit in the model’s context. The obvious tradeoff is that this chain will make far more LLM calls than, for example, the Stuff documents chain. There are also certain tasks which are difficult to accomplish iteratively. For example, the Refine chain can perform poorly when documents frequently cross-reference one another or when a task requires detailed information from many documents.\n\nllm = ChatOpenAI()\n\n\nqa_refine = RetrievalQA.from_chain_type(llm =llm, chain_type = \"refine\", \n                                        retriever = vs2.as_retriever(),\n                                       return_source_documents = True\n                                       )\n\n\nquery = \"what is this paper about?\"\n\n#This format when we include return_source_documents\nresult = qa_refine({\"query\": query})\n\nWARNING:langchain.llms.base:Retrying langchain.chat_models.openai.ChatOpenAI.completion_with_retry.&lt;locals&gt;._completion_with_retry in 4.0 seconds as it raised Timeout: Request timed out: HTTPSConnectionPool(host='api.openai.com', port=443): Read timed out. (read timeout=600).\n\n\n\nresult[\"result\"]\n\n'Based on the additional context provided, it appears that the paper focuses on analyzing the consumption rates of individual H. nudus (Hermit crabs) and comparing the mean consumption rates between female and male crabs. The study includes data from eight trials, involving three female crabs (fe1 to fe3) and three male crabs (ma1 to ma3). The paper investigates whether there are differences in consumption rates among individuals that consumed snails and those that did not. The authors report the mean consumption rates along with the standard error of the mean and conduct statistical analysis, including a comparison of consumption rates between snail-consuming individuals.'\n\n\n\nresult[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery2 =\"Write a one sentence summary of the purpose of the paper\"\n\nresult2 = qa_refine({\"query\": query2})\n\n\nresult2[\"result\"]\n\n'The purpose of the paper is to analyze the differences in propal width: carapace width ratio between sexes and species of crabs, determining the statistical significance of these factors and the interaction between them using a two-way ANOVA.'\n\n\n\nresult2[\"source_documents\"]\n\n[Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 18 figure 4 : differences in propal width : carapace width ratio between sex and species. the sex factor was statistically significant ( f1, 45 = 103. 8. p &lt; 0. 001 ), while the species factor was insignificant ( f1, 45 = 0. 09, p = 0. 764 ). there was a significant interaction ( f1, 45 = 7. 19, p = 0. 01 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 h. nudus h. oregonensis propal widtht : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 17, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery4 = \"Summarize the paper concisely with reference to materials and methods.\"\n\nresult4 = qa_refine({\"query\": query4})\n\n\nresult4[\"result\"]\n\n\"Based on the additional context provided, the paper utilized SMA regressions to examine the correlation between carapace width and propal height in different groups (female and male) of two species (H. nudus and H. oregonensis). The relationship between carapace width and propal height is illustrated in Figure 1 of Charifson's study, which includes a line of best fit derived from the SMA regression. Descriptive statistics for each group can be found in Table 1a. However, no specific information about the materials and methods used in the study is provided in the given context.\"\n\n\n\nresult4[\"source_documents\"]\n\n[Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery5=\"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\"\nresult5 = qa_refine({\"query\": query5})\n\n\nresult5[\"result\"]\n\n'The additional context provided does not directly relate to the presence of observations in the paper. Therefore, the original answer remains applicable. The paper includes observations related to the consumption rates of H. nudus crabs.'\n\n\n\nresult5[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery6 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\n\n\nresult6 = qa_refine({\"query\": query6})\n\n\nresult6[\"result\"]\n\n'Based on the additional context provided, it is clear that the paper contains experimental research conducted in the natural environment or with organisms collected in nature. The author mentions logistical issues with the experimental design, the need for more replication, and the inclusion of more crabs. The acknowledgments also mention the permission to collect organisms, indicating that the study involved collecting organisms from the natural environment.'\n\n\n\nresult6[\"source_documents\"]\n\n[Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 10 due to logistical issues surrounding the experimental design and little replication. future studies should include more crabs, the exclusion of non - feeding crabs, and trial periods with longer time intervals. additionally, any subsequent study should utilize multivariate and geometric morphometric methods to quantify claw shape instead of using ratios, as two similar ratios may have different shape. acknowledgements : i would like to thank dianna padilla, michael labarbera, and kevin turner for advice relating to the experimental design of this study. i would also like to thank the director and staff of friday harbor laboratories for use of facilities and permission to collect organisms. friday harbor laboratories, the libbie hyman scholarship, society for integrative and comparative biology, and the stony brook department of ecology and evolution provided financial support and have my gratitude.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 9, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery7= \"What are the scientific names of the species mentioned in this paper?\"\n\n\nresult7 = qa_refine({\"query\": query7})\n\n\nresult7[\"result\"]\n\n'Based on the additional context provided, the paper mentions two species:\\n\\n1. H. nudus (scientific name: Hemigrapsus nudus)\\n   - Female H. nudus\\n   - Male H. nudus\\n\\n2. H. oregonensis (scientific name: Hemigrapsus oregonensis)\\n   - Female H. oregonensis\\n   - Male H. oregonensis'\n\n\n\nresult7[\"source_documents\"]\n\n[Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query7)\n\n\nquery8 = \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\n\n\nresult8 = qa_refine({\"query\": query8})\n\n\nresult8[\"result\"]\n\n'The new context provided does not mention the locations where the species were observed or collected. Therefore, the original answer remains the same. The paper does not mention the specific locations where the species were observed or collected.'\n\n\n\nresult8[\"source_documents\"]\n\n[Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nquery8b = \"Can you give a more specific location of where this study took place?\"\n\n\nresult8b = qa_refine({\"query\": query8b})\n\n\nresult8b[\"result\"]\n\n'Thank you for providing the additional context. However, the given information still does not specify the specific location where the study on regression analyses of carapace width and propus measures for different species of crabs (H. nudus and H. oregonensis) took place.'\n\n\n\nresult8b[\"source_documents\"]\n\n[Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query8)\n\n\nquery9 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\n\n\nresult9 = qa_refine({\"query\": query9})\n\n\nresult9[\"result\"]\n\n'Apologies for the confusion, but even with the additional context, there are no specific coordinate locations mentioned in the provided text. The text seems to revolve around analyzing differences in cw:ph and cw:pw using a two-way ANOVA. Therefore, there are still no coordinate locations given in latitude/longitude.'\n\n\n\nresult9[\"source_documents\"]\n\n[Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query9)\n\n\nquery10 = \"In what habitat were the species found?\"\n\n\nresult10 = qa_refine({\"query\": query10})\n\n\nresult10[\"result\"]\n\n'The new context provided does not mention any specific habitat information for the species. Therefore, the original answer still stands as the most accurate response. Based on the information provided in the original question and the absence of additional details in the new context, it is not possible to determine the specific habitat where the mentioned species are found.'\n\n\n\nresult10[\"source_documents\"]\n\n[Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query10)\n\n\nquery11 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\n\nresult11 = qa_refine({\"query\": query11})\n\n\nresult11[\"result\"]\n\n'Based on the new context provided, the paper does mention the propal width: carapace width ratio between sexes and species. However, there is still no mention of a specific year, date, or time when the species were collected or observed.'\n\n\n\nresult11[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 17 figure 3 : differences in propal height : carapace width ratio between sex and species. the sex factor was statistically significant ( f = 125. 6. p &lt; 0. 001 ), while the species factor was insignificant ( f &gt; 0. 01, p = 0. 983 ). there was a significant interaction ( f = 4. 39, p = 0. 042 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 0. 3 0. 35 h. nudus h. oregonensis propal height : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 16, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 18 figure 4 : differences in propal width : carapace width ratio between sex and species. the sex factor was statistically significant ( f1, 45 = 103. 8. p &lt; 0. 001 ), while the species factor was insignificant ( f1, 45 = 0. 09, p = 0. 764 ). there was a significant interaction ( f1, 45 = 7. 19, p = 0. 01 ). error bars represent standard error of the mean. 0 0. 05 0. 1 0. 15 0. 2 0. 25 h. nudus h. oregonensis propal widtht : carapace width crab species female male', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 17, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query11)\n\n\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper?\"\n\n\nresult12 = qa_refine({\"query\": query12})\n\n\nresult12[\"result\"]\n\n'Based on the new context provided, there is no mention of any additional maps, tables, or diagrams in the paper. Therefore, the original answer remains unchanged.'\n\n\n\nresult12[\"source_documents\"]\n\n[Document(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 16 figure 2 : relationship of carapace width and propal width in hemigrapsus. line of best fit from sma regression. see table 1b for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 15, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 15 figure 1 : relationship of carapace width and propal height in hemigrapsus. line of best fit from sma regression. see table 1a for descriptive statistics. a ) female h. nudus. b ) male h. nudus. c ) female h. oregonensis. d ) male h. oregonensis.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 14, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\n# qa_refine.run(query12)"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html#pass-in-chat-history",
    "href": "Option #1 Experiment/Option #1.html#pass-in-chat-history",
    "title": "MultiQueryRetriever",
    "section": "Pass in Chat History",
    "text": "Pass in Chat History\n\nqa_conversational2 = ConversationalRetrievalChain.from_llm(ChatOpenAI(temperature=0), vs2.as_retriever())\n\n\nchat_history = []\nresult = qa_conversational2({\"question\": query, \"chat_history\": chat_history})\n\n\nresult[\"answer\"]\n\n'Based on the provided context, the paper appears to be about various analyses and measurements related to carapace width and propus measures in different species of crabs (H. nudus and H. oregonensis). It also includes information on consumption rates of snails by individual H. nudus crabs.'\n\n\n\nresult[\"chat_history\"]\n\n[]\n\n\n\nchat_history = [(query, result[\"answer\"])]\n\nresult_conversational2 = qa_conversational2({\"question\": query, \"chat_history\": chat_history})\n\n\nresult_conversational2[\"answer\"]\n\n'The main topic of this paper is the relationship between carapace width and propus measures in H. nudus and H. oregonensis crabs.'\n\n\n\nresult_conversational2[\"chat_history\"]\n\n[('what is this paper about?',\n  'Based on the provided context, the paper appears to be about various analyses and measurements related to carapace width and propus measures in different species of crabs (H. nudus and H. oregonensis). It also includes information on consumption rates of snails by individual H. nudus crabs.')]"
  },
  {
    "objectID": "Option #1 Experiment/Option #1.html#return-source-documents",
    "href": "Option #1 Experiment/Option #1.html#return-source-documents",
    "title": "MultiQueryRetriever",
    "section": "Return Source Documents",
    "text": "Return Source Documents\n\nqa_conversational3 = ConversationalRetrievalChain.from_llm(ChatOpenAI(temperature=0), vs2.as_retriever(), return_source_documents=True)\n\n\n\n\nchat_history = []\nresult = qa_conversational3({\"question\": query, \"chat_history\": chat_history})\n\n\nresult[\"answer\"]\n\n'Based on the provided context, the paper appears to be about various analyses and measurements related to carapace width and propus measures in different species of crabs (H. nudus and H. oregonensis). It also includes information on consumption rates of snails by individual H. nudus crabs.'\n\n\n\nresult[\"chat_history\"]\n\n[]\n\n\n\nresult['source_documents'][0]\n\nDocument(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult2 = qa_conversational3({\"question\": query2, \"chat_history\": chat_history})\n\n\nresult2[\"answer\"]\n\n'The purpose of the paper is to analyze the relationship between carapace width and propal height/width in different species and sexes of crabs.'\n\n\n\nresult2[\"chat_history\"]\n\n[]\n\n\n\nresult2[\"source_documents\"][0]\n\nDocument(page_content='charifson 13 table 1 : sma regressions of carapace width and propus measures. a ) the relationship between carapace width and propal height. x is carapace width and y is propal height. b ) the relationship between carapace width and propal height. x is carapace width and y is propal width. sma regression a n carapace width vs propal height r2 female h. nudus 13 y = 0. 273 * x - 0. 678 0. 976 male h. nudus 13 y = 0. 311 * x - 1. 385 0. 868 female h. oregonensis 9 y = 0. 351 * x - 0. 833 0. 894 male h. oregonensis 14 y = 0. 39 * x - 1. 149 0. 693 sma regression b n carapace width vs propal width r2 female h. nudus 13 y = 0. 157 * x - 0. 386 0. 927 male h. nudus 13 y = 0. 209 * x - 1. 288 0. 859 female h. oregonensis 9 y = 0. 175 * x + 0. 037 0. 724 male h. oregonensis 14 y = 0. 244 * x - 0. 688 0. 534', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 12, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult3 = qa_conversational3({\"question\": query3, \"chat_history\": chat_history})\n\n\nresult3[\"answer\"]\n\n'The author of the paper is not mentioned in the given context.'\n\n\n\nresult4 = qa_conversational3({\"question\": query4, \"chat_history\": chat_history})\n\n\nresult4[\"answer\"]\n\n'The paper analyzed the relationship between carapace width and propal height and width in different species of Hemigrapsus crabs. The authors used a two-way ANOVA to compare the differences in carapace width to propal height and width. They performed SMA regressions to determine the relationship between carapace width and propal height and width in female and male H. nudus and H. oregonensis crabs. The results were presented in tables and figures, showing the line of best fit and descriptive statistics for each species and gender.'\n\n\n\nresult4[\"source_documents\"][0]\n\nDocument(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult5 = qa_conversational3({\"question\": query5, \"chat_history\": chat_history})\n\n\nresult5[\"answer\"]\n\n'Based on the provided context, it is not clear whether the paper includes one or more specific observations.'\n\n\n\nresult5[\"source_documents\"]\n\n[Document(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='vincta in the field. it should be noted that h. nudus and la. vincta usually occupy different portions of the intertidal and may have little contact with each other, unlike the relationship between h. nudus and li. scutulata. there is some potential for overlap in the winter when la. vincta migrates up shore. although no differences in consumption rates between male and female h. nudus were found, this might be', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 8, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''}),\n Document(page_content='and rohlf 2011 ). differences in cw : ph and cw : pw were analyzed using a two - way anova', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 4, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})]\n\n\n\nresult6 = qa_conversational3({\"question\": query6, \"chat_history\": chat_history})\n\n\nresult6[\"answer\"]\n\n'Based on the given context, it appears that the research described in the paper is experimental research conducted in the natural environment with organisms collected in nature. The acknowledgements section mentions the permission to collect organisms and the use of facilities at Friday Harbor Laboratories.'\n\n\n\nresult6[\"chat_history\"]\n\n[]\n\n\n\nresult6[\"source_documents\"][0]\n\nDocument(page_content='charifson 19 figure 5 : consumption rates by individual h. nudus. mean consumption rates ( n = 8 trials ) of 3 female ( fe1 to fe3 ) and 3 male ( ma1 to ma3 ) h. nudus. crabs fe1, fe3, and ma3 did not consume snails. the individuals that eat snails did not differ in their consumption rates ( f2, 21 = 2. 52, p = 0. 104 ). error bars represent standard error of the mean. 0 0. 1 0. 2 0. 3 0. 4 0. 5 0. 6 0. 7 0. 8 0. 9 1 fe1 fe2 fe3 ma1 ma2 ma3 mean consumption rate ( snails consumed / hour ) individual h. nudus', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 18, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult7 = qa_conversational3({\"question\": query7, \"chat_history\": chat_history})\n\n\nresult7[\"answer\"]\n\n'The scientific names of the species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis.'\n\n\n\nresult7[\"source_documents\"][0]\n\nDocument(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult8 = qa_conversational3({\"question\": query8, \"chat_history\": chat_history})\n\n\nresult8[\"answer\"]\n\n'No, the paper does not mention specific locations where the species were observed or collected.'\n\n\n\nresult8[\"source_documents\"][0]\n\nDocument(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult9 = qa_conversational3({\"question\": query9, \"chat_history\": chat_history})\n\n\nresult9['answer']\n\n'No, there are no coordinate locations given in latitude/longitude in the provided context.'\n\n\n\nresult9[\"source_documents\"][0]\n\nDocument(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult10 = qa_conversational3({\"question\": query10, \"chat_history\": chat_history})\n\n\nresult10[\"answer\"]\n\n'The species were found in water and in finer sediment.'\n\n\n\nresult10[\"source_documents\"][0]\n\nDocument(page_content='waterand in finer sediment than the more desiccation - tolerant h. nudus ( sliger 1982 ). there is still considerable habitat overlap between these two species ; the underside of a single rock may have', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 1, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult11 = qa_conversational3({\"question\": query11, \"chat_history\": chat_history})\n\n\nresult11[\"answer\"]\n\n'No, the paper does not mention a year, date, or time that species were collected or observed.'\n\n\n\nresult11[\"source_documents\"][0]\n\nDocument(page_content='##f, f. j. 2011. biometry. 4th ed. w. h. freeman, new york, new york, usa. stuart, y. e. and losos, j. b. 2013. ecological character displacement : glass half full or half empty? trends in ecology and evolution 28 : 402 - 408.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 10, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})\n\n\n\nresult12 = qa_conversational3({\"question\": query12, \"chat_history\": chat_history})\n\n\nresult12[\"answer\"]\n\n'Yes, there are figures in the paper. Figure 1 shows the relationship between carapace width and propal height in different species and genders of Hemigrapsus crabs. Figure 2 shows the relationship between carapace width and propal width in the same species and genders. There are also tables mentioned in the text, such as Table 1a and Table 1b, which provide descriptive statistics for the figures.'\n\n\n\nresult12[\"source_documents\"][0]\n\nDocument(page_content='to right sides of the propus. all claw measurements were made on the left cheliped.', metadata={'source': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'file_path': 'hms/fhl_2014_Charifson_34622 (1).pdf', 'page': 3, 'total_pages': 19, 'format': 'PDF 1.5', 'title': '', 'author': 'David', 'subject': '', 'keywords': '', 'creator': 'Microsoft® Office Word 2007', 'producer': 'Microsoft® Office Word 2007', 'creationDate': \"D:20140723120649-04'00'\", 'modDate': \"D:20140723120649-04'00'\", 'trapped': ''})"
  },
  {
    "objectID": "Text Checker/Text_Difference_Checker.html",
    "href": "Text Checker/Text_Difference_Checker.html",
    "title": "Script to read in directories (folders) for each paper",
    "section": "",
    "text": "Inspiration for this notebook: https://medium.com/@zhangkd5/a-tutorial-for-difflib-a-powerful-python-standard-library-to-compare-textual-sequences-096d52b4c843\n\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the text files\npath_to_file_a = '0003_bv172tc9618_0003_print.txt'\npath_to_file_b = '0003_bv172tc9618_0003_print.txt'\n\n# Read the contents of the files\nwith open(path_to_file_a, 'r', encoding='utf-8') as file:\n    a = file.read()\n\nwith open(path_to_file_b, 'r', encoding='utf-8') as file:\n    b = file.read()\n\n# Calculate the similarity ratio using SequenceMatcher\nseq_match = SequenceMatcher(None, a, b)\nratio = seq_match.ratio()\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Generate the HTML diff\nhtml_diff = d.make_file(a.splitlines(), b.splitlines())\n\n# Add the similarity ratio to the HTML diff\nratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio:.2f}&lt;/h2&gt;\\n\" + html_diff\n\n# Save the diff to an HTML file\nwith open('0003_bv172tc9618_0003_print_verify.html', 'w', encoding='utf-8') as f:\n    f.write(ratio_html)\n\n\nScript to read in directories (folders) for each paper\n\nimport os\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the directories\npath_to_folder_a = './PrintModelText/PrintModelText/zz472cp8582_jpg/txt'\npath_to_folder_b = './PrivateModel_V3/PrivateModel_V3/zz472cp8582_jpg_v3/txt'\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Get the list of files in each directory\nfiles_a = sorted(os.listdir(path_to_folder_a))\nfiles_b = sorted(os.listdir(path_to_folder_b))\n\n# Ensure both directories have the same number of files\nif len(files_a) != len(files_b):\n    print(\"Error: The directories do not contain the same number of files.\")\n    exit() # exits program is both directories dont have the same number of files\n\n# Compare each pair of files\nfor file_a, file_b in zip(files_a, files_b):\n    # Read the contents of the files\n    with open(os.path.join(path_to_folder_a, file_a), 'r', encoding='utf-8') as fa:\n        a = fa.read()\n    \n    with open(os.path.join(path_to_folder_b, file_b), 'r', encoding='utf-8') as fb:\n        b = fb.read()\n    \n    # Calculate the similarity ratio using SequenceMatcher\n    seq_match = SequenceMatcher(None, a, b)\n    ratio = seq_match.ratio() #calculates the similarity ratios between a & b\n    ratio_percentage = ratio * 100\n    \n    # Generate the HTML diff report on the differences. splitlines() is used to split the content into individual lines\n    html_diff = d.make_file(a.splitlines(), b.splitlines())\n    \n    # Add the similarity ratio to the HTML diff. Ratio is formatted to two decimal places\n    ratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio_percentage:.2f}%&lt;/h2&gt;\\n\" + html_diff\n    \n    # Define the output file name\n    output_file_name = os.path.splitext(file_a)[0] + '_diff.html'\n    \n    # Save the diff to an HTML file\n    with open(output_file_name, 'w', encoding='utf-8') as f:\n        f.write(ratio_html)\n    \n    print(f\"Processed: {output_file_name}\")\n\nprint(\"All files have been processed.\")\n\nProcessed: 0001_zz472cp8582_0001_diff.html\nProcessed: 0002_zz472cp8582_0002_diff.html\nProcessed: 0003_zz472cp8582_0003_diff.html\nProcessed: 0004_zz472cp8582_0004_diff.html\nProcessed: 0005_zz472cp8582_0005_diff.html\nProcessed: 0006_zz472cp8582_0006_diff.html\nProcessed: 0007_zz472cp8582_0007_diff.html\nProcessed: 0008_zz472cp8582_0008_diff.html\nProcessed: 0009_zz472cp8582_0009_diff.html\nProcessed: 0010_zz472cp8582_0010_diff.html\nProcessed: 0011_zz472cp8582_0011_diff.html\nProcessed: 0012_zz472cp8582_0012_diff.html\nProcessed: 0013_zz472cp8582_0013_diff.html\nProcessed: 0014_zz472cp8582_0014_diff.html\nProcessed: 0015_zz472cp8582_0015_diff.html\nProcessed: 0016_zz472cp8582_0016_diff.html\nProcessed: 0017_zz472cp8582_0017_diff.html\nAll files have been processed.\n\n\n\n\nScript to print out Similarity Ratio (%) for each page per paper\n\nimport os\nfrom difflib import HtmlDiff, SequenceMatcher\n\n# Define the paths to the directories\npath_to_folder_a = './PrintModelText/PrintModelText/bv172tc9618_jpg/txt'\npath_to_folder_b = './PrivateModel_V3/PrivateModel_V3/bv172tc9618_jpg_v3/txt'\n\n# Create the HtmlDiff object\nd = HtmlDiff()\n\n# Get the list of files in each directory\nfiles_a = sorted(os.listdir(path_to_folder_a))\nfiles_b = sorted(os.listdir(path_to_folder_b))\n\n# Ensure both directories have the same number of files\nif len(files_a) != len(files_b):\n    print(\"Error: The directories do not contain the same number of files.\")\n    exit()\n\n# Store results for the table\nresults = []\n\n# Compare each pair of files\nfor file_a, file_b in zip(files_a, files_b):\n    # Read the contents of the files\n    with open(os.path.join(path_to_folder_a, file_a), 'r', encoding='utf-8') as fa:\n        a = fa.read()\n    \n    with open(os.path.join(path_to_folder_b, file_b), 'r', encoding='utf-8') as fb:\n        b = fb.read()\n    \n    # Calculate the similarity ratio using SequenceMatcher\n    seq_match = SequenceMatcher(None, a, b)\n    ratio = seq_match.ratio()\n    ratio_percentage = ratio * 100\n    \n    # Generate the HTML diff\n    html_diff = d.make_file(a.splitlines(), b.splitlines())\n    \n    # Add the similarity ratio to the HTML diff\n    ratio_html = f\"&lt;h2&gt;Similarity Ratio: {ratio_percentage:.2f}%&lt;/h2&gt;\\n\" + html_diff\n    \n    # Define the output file name\n    output_file_name = os.path.splitext(file_a)[0] + '_comp.html'\n    \n    # Save the diff to an HTML file\n    with open(output_file_name, 'w', encoding='utf-8') as f:\n        f.write(ratio_html)\n    \n    # Print out the processed file\n    print(f\"Processed: {output_file_name}\")\n    \n    # Append the result to the list\n    file_base_name = os.path.splitext(file_a)[0]\n    results.append((file_base_name, ratio_percentage))\n\nprint(\"All files have been processed.\")\n\n# Print out the table\nprint(\"\\nComparison Results:\")\nprint(f\"{'File Name and Page Number':&lt;30} {'Similarity Ratio (%)':&lt;20}\")\nprint(\"=\" * 50)\nfor result in results:\n    print(f\"{result[0]:&lt;30} {result[1]:&lt;20.2f}\")\n\n\nProcessed: 0001_bv172tc9618_0001_comp.html\nProcessed: 0002_bv172tc9618_0002_comp.html\nProcessed: 0003_bv172tc9618_0003_comp.html\nProcessed: 0004_bv172tc9618_0004_comp.html\nProcessed: 0005_bv172tc9618_0005_comp.html\nProcessed: 0006_bv172tc9618_0006_comp.html\nProcessed: 0007_bv172tc9618_0007_comp.html\nProcessed: 0008_bv172tc9618_0008_comp.html\nProcessed: 0009_bv172tc9618_0009_comp.html\nProcessed: 0010_bv172tc9618_0010_comp.html\nProcessed: 0011_bv172tc9618_0011_comp.html\nProcessed: 0012_bv172tc9618_0012_comp.html\nProcessed: 0013_bv172tc9618_0013_comp.html\nProcessed: 0014_bv172tc9618_0014_comp.html\nAll files have been processed.\n\nComparison Results:\nFile Name and Page Number      Similarity Ratio (%)\n==================================================\n0001_bv172tc9618_0001          15.33               \n0002_bv172tc9618_0002          8.80                \n0003_bv172tc9618_0003          19.17               \n0004_bv172tc9618_0004          37.14               \n0005_bv172tc9618_0005          9.09                \n0006_bv172tc9618_0006          39.30               \n0007_bv172tc9618_0007          4.11                \n0008_bv172tc9618_0008          27.47               \n0009_bv172tc9618_0009          3.04                \n0010_bv172tc9618_0010          11.35               \n0011_bv172tc9618_0011          8.27                \n0012_bv172tc9618_0012          50.11               \n0013_bv172tc9618_0013          21.28               \n0014_bv172tc9618_0014          44.60"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Taxa Project",
    "section": "",
    "text": "Climate change is driving rapid changes in our biosphere on local and global scales. Our capacity to understand these shifts relies entirely upon two critical things: long-term biological and environmental observations, and an ability to discover and access them. Species Occurrence records are foundational to understanding biodiversity in ecosystems and help researchers track adaptation and the effects of climate change.\nKnowledge bases that gather observations from around the world including species, location and time of the event provide a more complete picture of historical and geographic changes in biodiversity. Not surprisingly, observations from the past recorded on paper are often missing from these knowledge bases because they are hard to come by. Libraries up and down the Pacific coast hold collections of undergraduate student papers with observations of marine plants and animals “hidden” in the text. Reading and extracting those observations by hand is an effort libraries cannot afford to undertake.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#motivations-for-project",
    "href": "index.html#motivations-for-project",
    "title": "Taxa Project",
    "section": "",
    "text": "Climate change is driving rapid changes in our biosphere on local and global scales. Our capacity to understand these shifts relies entirely upon two critical things: long-term biological and environmental observations, and an ability to discover and access them. Species Occurrence records are foundational to understanding biodiversity in ecosystems and help researchers track adaptation and the effects of climate change.\nKnowledge bases that gather observations from around the world including species, location and time of the event provide a more complete picture of historical and geographic changes in biodiversity. Not surprisingly, observations from the past recorded on paper are often missing from these knowledge bases because they are hard to come by. Libraries up and down the Pacific coast hold collections of undergraduate student papers with observations of marine plants and animals “hidden” in the text. Reading and extracting those observations by hand is an effort libraries cannot afford to undertake.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#goals-for-project",
    "href": "index.html#goals-for-project",
    "title": "Taxa Project",
    "section": "Goals for Project",
    "text": "Goals for Project\nThe goal of this project is to employ natural language processing, machine learning, and data visualization to amplify the work of librarians in identifying and verifying these observations.\nTo develop a dataset of species occurrences (a species at a given place at a specific time), we need to identify and extract scientifically relevant entities from the corpus. These entities include:\n\nTaxonomic names\nLocation(s) (named; “Hopkins Beach”, “Fisherman’s Cove”) and/or latitude/longitude\nA date when the species was observed\n\nOptionally, as supporting information, we can extract habitat type(s) (e.g., “subtidal”) from the text, too.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#student-papers-spanning-the-west-coast-of-north-america",
    "href": "index.html#student-papers-spanning-the-west-coast-of-north-america",
    "title": "Taxa Project",
    "section": "Student Papers spanning the West Coast of North America",
    "text": "Student Papers spanning the West Coast of North America\nThe Stanford Taxa Project is part of a larger effort (called Data Over Decades) with librarian partners up and down the western coast of North America. We each hold large collections of student research reports that contain observations of environmental conditions, species, and populations recorded over a span of at least nine decades. As we seek funding to support the digitization and preservation of collections from partner institutions, the Taxa Project explores the potential of computational methods to amplify the work of librarians in identifying and verifying species observations in student papers from Hopkins Marine Station of Stanford University (HMS). We hold 746 HMS student papers that were created from 1963 - 2011. Of these, 672 are open access, and 74 are restricted to use by Stanford-affiliated folks only.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#potential-corpus",
    "href": "index.html#potential-corpus",
    "title": "Taxa Project",
    "section": "Potential corpus",
    "text": "Potential corpus\nThe undergraduate student research papers available for the Data Over Decades project number into the thousands once more papers in these collections have been fully digitized (see Table 1). These papers were created annually, over several decades, as the capstone project for students taking an applied research course at their respective research station. For the Taxa Project, we are using the set of open access papers from Hopkins Marine Station as our initial corpus.\n\n\n\nInstitution\nApprox. papers\nDate Range\nDigital\nOCR’d\nOpen Access\n\n\n\n\nBamfield Marine Sciences Centre (consortium)\n5,426 papers\n1973 - present\nNo\nNo\nNo\n\n\nFriday Harbor Labs, University of Washington\n5,000 papers; 2011-2020, 480 papers in hand\n1946 - present\nPre-2011 not scanned; 2011+ born-digital\n2011-2020, 480 papers\nPre-2011, No; 2011+ Yes\n\n\nHatfield Marine Science Center, Oregon State University\n140 + 170 papers\n1966 - present\nYes\nNo\nYes\n\n\nBodega Marine Laboratory, UC Davis\n3,800 papers\n1928 - present\nNo\nNo\nNo\n\n\nMoss Landing Marine Labs, San Jose State University\n690 theses\n1968 - present\nYes\nYes\nYes\n\n\nUC Berkeley (research conducted at Hopkins)\n239 papers\n1947 - 1952\nNo\nNo\nNo\n\n\nHopkins Marine Station, Stanford University\n778 papers\n1963 - 2011\nYes\nYes\n672 Yes; 106 No\n\n\nWrigley Marine Science Center, USC, UCLA, Carleton College (corpus held at HMS Library)\n300 papers\n1970s - 2000\nYes\nYes\nNo\n\n\nUC Santa Cruz (corpus held at HMS Library)\n59 papers\n1973 - 2000\nYes\nYes\nNo\n\n\n\nTable 1. A list of project partners in the Data Over Decades project, with an approximate number of papers at each site.\nGoogle Map of library partners in the Data Over Decades project.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#student-papers---from-paper-to-digital",
    "href": "index.html#student-papers---from-paper-to-digital",
    "title": "Taxa Project",
    "section": "Student Papers - From Paper to Digital",
    "text": "Student Papers - From Paper to Digital\nWe partnered with the Stanford Libraries Digital Production Group (DPG) to scan all of the Hopkins Marine Station student papers. The DPG is staffed by highly skilled professional imaging specialists and student assistants, and they have well-established workflows for capturing and processing digital content, and accessioning it into the Stanford Digital Repository (SDR). Their scanning process generated, for each page, a high-resolution JPEG 2000 for preservation, a medium resolution jpg for the catalog media viewer interface, an ALTO XML file, and a text-searchable PDF of the full paper. These files are all stored in Stanford Digital Repository (SDR) for preservation and access purposes.\nFor this phase of the project we will be working with the PDFs, but we plan to incorporate an open software image OCR step into our workflow so it will be more directly portable to our community of practice.\n\n💡 The following DPG staff contributed to the digitization and accessioning of the Hopkins Marine Station student papers: Katharine Dimitruk, Alexander Nguyen, Laura Nguyen, Linda Lam (supervisor).",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "content/Option2.html",
    "href": "content/Option2.html",
    "title": "Tiktoken Splitter",
    "section": "",
    "text": "Possible%20Architectures.png\nimport pandas as pd\nimport os\nimport openai\nimport sys, pathlib, fitz\nfrom langchain.chains import LLMChain\nfrom langchain.chains.question_answering import load_qa_chain\nfrom langchain.chains import RetrievalQA\nfrom langchain.chains import ConversationalRetrievalChain\nfrom langchain.document_loaders import PyMuPDFLoader\nfrom langchain.text_splitter import CharacterTextSplitter\nfrom langchain.text_splitter import TokenTextSplitter\nfrom langchain.embeddings.openai  import OpenAIEmbeddings\nfrom langchain.vectorstores import FAISS\nfrom langchain.retrievers import ContextualCompressionRetriever\nfrom langchain.retrievers.document_compressors import LLMChainExtractor\nfrom langchain.retrievers.document_compressors import LLMChainFilter\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.memory import VectorStoreRetrieverMemory\nfrom langchain.memory import ConversationBufferMemory\nfrom langchain import PromptTemplate\nfrom langchain.chains.qa_with_sources import load_qa_with_sources_chain\nfrom langchain.chains.conversational_retrieval.prompts import CONDENSE_QUESTION_PROMPT\n# from langchain.prompts.chat import (\n#     ChatPromptTemplate,\n#     SystemMessagePromptTemplate,\n#     AIMessagePromptTemplate,\n#     HumanMessagePromptTemplate,\n# )\n# from langchain.schema import AIMessage, HumanMessage, SystemMessage\nfrom dotenv import load_dotenv, find_dotenv\n_ = load_dotenv(find_dotenv()) # read local .env file\n\nopenai.api_key  = os.environ['OPENAI_API_KEY']\n# Helper function for printing docs\n\ndef pretty_print_docs(docs):\n    print(f\"\\n{'-' * 100}\\n\".join([f\"Document {i+1}:\\n\\n\" + d.page_content for i, d in enumerate(docs)]))\ndef has_citations(page_text):\n    # List of variations of \"citations\" to check for\n    citation_variations = [\"Citations\", \"Literature Cited\", \"Literature Citations\"]\n\n    for variation in citation_variations:\n        if variation in page_text:\n            return True\n    return False\n\ndef remove_citation_pages(pdf_path):\n    doc = fitz.open(pdf_path)\n    non_citation_pages = []\n\n    for page_num in range(doc.page_count):\n        page = doc[page_num]\n        page_text = page.get_text()\n\n        if not has_citations(page_text):\n            non_citation_pages.append(page_num)\n\n    # Create a new PDF with only non-citation pages\n    new_pdf = fitz.open()\n    for page_num in non_citation_pages:\n        new_pdf.insert_pdf(doc, from_page=page_num, to_page=page_num)\n\n    return new_pdf\n\n\ninput_pdf_path = './hms/fhl_2014_Charifson_34622 (1).pdf'\n\n# Create a new PDF with citation pages removed\nnew_pdf = remove_citation_pages(input_pdf_path)\n\n# Save the new PDF to 'output.pdf'\noutput_pdf_path = 'output.pdf'\nnew_pdf.save(output_pdf_path)\nnew_pdf.close()\ndef extract_text_from_pdf(pdf_path):\n    doc = fitz.open(pdf_path)\n    text = \"\"\n    for page in doc:\n        text += page.get_text()\n    doc.close()\n    return text\n\n# Replace 'output.pdf' with the path to the PDF you created with citation pages removed\nnew_pdf_path = 'output.pdf'\n\n# Extract text from the new PDF\nnew_pdf_text = extract_text_from_pdf(new_pdf_path)\n\n# Now you can manipulate the extracted text or perform any other actions as needed\n# For example, you can print the extracted text:\nprint(new_pdf_text)\n\nCharifson 1 \n \nSnail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species \nDifferences in Chela Size. \n \nDavid Charifson1,2 \n \nMarine Invertebrate Zoology \nSummer 2014 \n \n \n \n \n1 Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250 \n2 Department of Ecology and Evolution, Stony Brook University, Stony Brook, NY 11794-5245 \n \n \n \n \nContact information: \nDavid Charifson \nDepartment of Ecology and Evolution \nStony Brook University \n650 Life Sciences Building \nStony Brook, NY 11794-5245 \nDavid.charifson@stonybrook.edu  \n \n \n \n \nKeywords: Hemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta, \npredation, sexual dimorphism, character displacement  \n \n \nCharifson 2 \n \nAbstract: \n \nThe relationship between propus size and use of snails as prey in sympatric populations \nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \nwidth increases with body size in a predictable manner in male and female crabs of both species. \nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \nno character displacement in this trait. Both species of crabs showed a strong feeding preference \nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \ndue to the ease of consumption. There were no differences in snail consumption rates between \nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \nindividual crabs.  \n \nIntroduction: \n \nA multitude of species coexist in the marine intertidal environment. Closely related \nspecies may be sympatric and compete for resources, such as food. Two species of shore crab, \nHemigrapsus nudus (Dana 1851) and Hemigrapsus oregonensis (Dana 1851), occur in sympatry \nin the Salish Sea. Both species are sexually dimorphic, with the males having larger chelae. \nSpecies in sympatry may exhibit character displacement, the exaggeration of morphological or \nbehavioral characteristics due to competition for resources (Brown and Wilson 1956). When H. \nnudus and H. oregonensis co-occur, H. oregonensis tends to be found closer to the waterand in \nfiner sediment than the more desiccation-tolerant H. nudus (Sliger 1982). There is still \nconsiderable habitat overlap between these two species; the underside of a single rock may have \nCharifson 3 \n \nroughly equal abundances of the two crab species (personal observation). The size of the chela \nmay differ, which could allow the crabs to differentiate in food resource utilization. \nBoth species are omnivores that eat algae and small invertebrates, including snails \n(Behrens Yamada and Boulding 1996). The two shore crab species are known to eat Littorina \nsitkana (Philippi 1846) and Littorina scutulata (Gould 1849), which also occur in the rocky \nintertidal zone (Behrens Yamada and Boulding 1996). Li. scutulata moves upshore in response \nto the presence of H. nudus and crushed conspecifics, where H. nudus density is lower (Keppel \nand Scrosati 2004). This suggests that H. nudus represents an ecologically significant predation \nthreat to littorines.  \n \nThe thick shelled littorines are difficult prey for both H. nudus and H. oregonensis as \nneither crab species is a molluscivore specialists; they typically scrape or pick algae and softer \ninvertebrates off rocks using their chelae (Behrens Yamada and Boulding 1996). Behrens \nYamada and Boulding (1998) found that large H. nudus were capable of consuming Li. sitkana \nthat were less than 8 mm in length, but had only a 37% success rate of consuming snails with \nlengths between 5.5-7 mm .  \nI sought to investigate differences in propus size between between males and females of \nthese two crab species. The size of the propus of the chela is positively correlated with the \namount of force that can be produced due to greater musculature (Behrens Yamada and Boulding \n1998). A significant difference in propus size between the two species would suggest that further \ntesting of character displacement may be warranted. A disparity in propus size to body size \nbetween male and female crabs might result in different feeding rates and shell breaking \ncapabilities. I devised a test of preference by varying snail shell strength within the same size \nclass. The snail species Li. scutulata and Lacuna vincta (Montagu 1803) are both in the family \nCharifson 4 \n \nLittorinidae and have similar shell shape but different shell thickness. Lacuna vincta has a \nthinner, more fragile shell and is likely to be preferred as prey by shore crabs. I also hypothesize \nthat, if chela size is held constant, female crabs will have greater snail consumption rates than \nmale crabs. Female crabs with claws equivalent to males have a larger body mass,are likely to \nhave greater metabolic need, and are less easily satiated. \n \nStudy System: \n \nAll specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock. These closely related \ncrabs are morphologically similar, but can be distinguished by the presence of purple spots on \nthe cheliped of H. nudus and abundant setae on the pereopods of H. oregonensis (Kozloff 1987). \nLacuna vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \ncollected from the rocky intertidal zone of Fourth of July Beach.  \n \nMaterials and Methods: \nMorphometrics \n \nMale and females of H. oregonensis and H. nudus were measured with digital calipers \n(0.1 mm). Each crab was measured for carapace width, propal height and propal width. Carapace \nwidth was taken at the widest part of the carapace. Propal height was measured at the highest \nvertical distance along the propus. Propal width was measured perpendicular to propal height, \nfrom the left to right sides of the propus. All claw measurements were made on the left cheliped. \nCharifson 5 \n \nIf there was a size disparity between the left and right claws due to regeneration of a lost claw, \nthe crab was excluded from the study. Ratios of carapace width:propal height (CW:PH) and \ncarapace width:propal width (CW:PW) were calculated.  \n \nCrab Feeding Preference \n \nThree female (Fe1, Fe2, Fe3) and three male (Ma1, Ma2, Ma3) crabs of H. nudus with \npropal heights between 5-6 mm were placed in small flow-through containers. Five L. scutulata \nand five L. vincta with shell lengths between 4-6 mm were added to each container. The ranges \nof crab propal height and snail shell length were chosen based on prior studies to ensure that the \ncrabs were capable of feeding on the hard-shelled L. scutulata (Behrens Yamada and Boulding \n1998). H. oregonensis was excluded due to the rarity of female crabs of that species within the \nrange of appropriate propal heights. After approximately 15 hours the number of L. scutulata and \nL. vincta consumed was counted. Three trials were conducted for each crab. \nSnail Consumption by Hemigrapsus nudus \n \nThe crabs from the preference experiment were given five of each snail in each trial. \nAfter 1.5 to 3 hours the number of snails consumed was counted and converted to a consumption \nrate (snails consumed/hour). A total of eight feeding trials were conducted.  \n \nStatistical Analysis \n \nFor the morphometric analysis, crabs were divided into four groups based on sex and \nspecies. Standardized major axis regression was used to determine the relationship between crab \nmorphometric parameters. Arcsin transformations were used to correct for non-normality (Sokol \nand Rohlf 2011). Differences in CW:PH and CW:PW were analyzed using a two-way ANOVA \nCharifson 6 \n \nwith factors: Sex and Species. Prey selection by H. nudus was analyzed using G-tests for each \nindividual that consumed snails. An one-way ANOVA was used to determine differences in snail \nconsumption rates by H. nudus.  \n \nResults: \nMorphometrics: \n \nCarapace width was a good predictor of both propal height (Figure 1, Table 1A) and \npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \nless variation in the relationship between carapace width and propal height than with propal \nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \nrespectively.  \n \nCrab Feeding Preference:  \n \nExpected values for both the number of L. scutulata and L. vincta consumed for the G-\ntest are 0.5 multiplied by the total number of snails consumed by each individual crab. G-tests \nfor individual H. nudus that eat snails were all significant at p &lt; 0.001 with 1 degree of freedom \n(See Table 2 for statistical summary). The three crabs that did not eat either L. scutulata or L. \nvincta could not be tested for feeding preference.  \nCharifson 7 \n \n \nSnail Consumption by Hemigrapsus nudus \n \nNo significant difference in crab feeding rate (snails consumed/hour) was found (F2, 21 = \n2.52, p = 0.104) among individual H. nudus that fed on snails during the course of the \nconsumption experiment (Figure 5). Fe2  ate snails at a rate of 0.59±0.53 snails/hour (variance is \nstandard deviation), Ma1 feeding rate was 0.24±0.31 snails/hour, and Ma2 had a feeding rate of \n0.80±0.38 snails/hour. Individuals Fe1, Fe3 and Ma3 did not consume any snails during the \ncourse of the experiment.  \n \nDiscussion: \n \nA few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus \nand Hemigrapsus orogenensis. The variance in propal height or propal width explained by \ncarapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for \npropal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela \nsize parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width \nrespectively. The R2 values for propal width regressed against carapace width were consistently \nlower than propal height regressed against carapace width across species and sexes (Table 1). In \ngeneral the ability of carapace width to explain the variance in chela size parameters (i.e.: R2 \nvalues) was greater in females of both crab species (Table 1, Figures 1 and 2). Males may have \nmore variation in claw size due to trade-offs between claw size and factors like feeding \nefficiency or resource allocation. Trade-offs relating to chela size are found in fiddler crabs, \nwhich exhibit extreme sexual dimorphism. Fiddler crabs have a trade-off between the intrasexual \ncompetition and intersexual signaling functions of the dimorphic claw (Swanson et al. 2013). \nCharifson 8 \n \nThis is not to say that the particular trade-offs in fiddler crabs case are analogous to that of \nHemigrapsus, since both claws in the two shore crabs in this study are used in feeding.  \nSexual dimorphism in chela size, which is readily apparent to the eye in both \nHemigrapsus nudus and Hemigrapsus oregonensis, was detected statistically (Figures 3 and 4). \nThe two-way ANOVA with factors sex and species did not show a significant species effect, \nsuggesting that the claws of both shore crabs produce roughly the same force and are \nfunctionally equivalent (Behrens Yamada and Boulding 1998). The lack of morphological \ndifference in the size of the chelae between the crab species removes the possibility of character \ndisplacement in the trait. It should be noted that this study was not designed to test for character \ndisplacement, but to determine if this would be an interesting question for future investigations. \nTo make a compelling case for character displacement it is necessary to compare multiple \nsympatric and allopatric populations with similar abiotic and biotic conditions (Stuart and Losos \n2013). Also it must be demonstrated that the trait differs due to genetic differences between \nsympatric and allopatric populations, that the differences between the populations are not due to \nspecies sorting, that the morphological trait is correlated to differences in resource use between \nthe two sympatric species, and that the similar phenotype in allopatric populations compete for \nthe same resources (Stuart and Losos 2013). The tendency of H. nudus to occupy the upper \nintertidal zone (Sliger 1987), despite considerable overlap with H. oregonensis, may provide \nenough differential resource use to prevent exclusion in sympatry. Desiccation tolerance may be \na better trait to test for character displacement in these shore crabs.  \nH. nudus males and females clearly preferred to eat the thinner shelled Lacuna vincta \n(Table 2). During the course of the feeding preference experiment all the crabs that ate snails \nconsumed L. vincta exclusively. However, one Littorina scutuala was eaten by H. nudus when \nCharifson 9 \n \ndetermining consumption rates. The six crabs were chosen because their claws were of \nappropriate size to eat littorines with shell length between 4-6 mm, yet only half of the crabs ate \nthese snails. This could be due to insufficient time to acclimate H. nudus to lab conditions and \npossibly reduced feeding associated with molting. Male snow crabs, Chionoecetes opilio, were \nshown to cease feeding 3-6 weeks before and 3-4 weeks after molting (O’Halloran and O’Dor \n1988).  \nIt was my original intention to test for sex differences in consumption rates, but this was \nnot possible as I could not collect many crabs of the appropriate claw size for gastropod feeding \nand many of the crabs I did collect did not feed. There were no statistically significant \ndifferences in consumption rates (snails eaten/hour) among the three feeding H. nudus. These \nindividuals had highly variable feeding rates, mostly due to trials in which the crab did not feed. \nSylvia Behrens Yamada and Elizabeth Boulding (1998) found that H. nudus consumed 1.8 \nLittorina. sitkana/individual crab/day. In my study crabs fed on 13.03 Lacuna vincta/individual \ncrab/ day. The greater consumption rate in my study is likely due to the easily breakable shells of \nLa. vincta.  \nThe findings of this study suggest that there is no potential for character displacement of \nchela size in the sympatric H. nudus and H. oregonensis. This leaves the question of species co-\noccurrence open to other possibilities. H. nudus has a strong preference for La. vincta, but it \nseems as if there have been no studies that show predation on La. vincta in the field. It should be \nnoted that H. nudus and La. vincta usually occupy different portions of the intertidal and may \nhave little contact with each other, unlike the relationship between H. nudus and Li. scutulata. \nThere is some potential for overlap in the winter when La. vincta migrates up shore. Although no \ndifferences in consumption rates between male and female H. nudus were found, this might be \nCharifson 10 \n \ndue to logistical issues surrounding the experimental design and little replication. Future studies \nshould include more crabs, the exclusion of non-feeding crabs, and trial periods with longer time \nintervals. Additionally, any subsequent study should utilize multivariate and geometric \nmorphometric methods to quantify claw shape instead of using ratios, as two similar ratios may \nhave different shape.  \n \nAcknowledgements: \n \nI would like to thank Dianna Padilla, Michael LaBarbera, and Kevin Turner for advice \nrelating to the experimental design of this study. I would also like to thank the director and staff \nof Friday Harbor Laboratories for use of facilities and permission to collect organisms. Friday \nHarbor Laboratories, The Libbie Hyman Scholarship, Society for Integrative and Comparative \nBiology, and the Stony Brook Department of Ecology and Evolution provided financial support \nand have my gratitude.  \n \n \n \n \n \n \n \n \n \n \nCharifson 12 \n \nSwanson, B. O., George, M. N., Anderson, S. T., and Christy, J. H. 2013. Evolutionary variation\n \nin the mechanics of fiddler crab claws. BMC Evolutionary Biology 13: 137. \n \n \n \n \n \n \n \n \n \nCharifson 13 \n \nTable 1: SMA regressions of carapace width and propus measures.  \nA) The relationship between carapace width and propal height. x is carapace width and y is \npropal height. B) The relationship between carapace width and propal height. x is carapace width \nand y is propal width.  \n \n \n \nSMA Regression  \n \nA \n \nN \nCarapace Width vs Propal Height  \nR2 \n \nFemale H. nudus \n13 \ny = 0.273*x - 0.678 \n0.976 \n \nMale H. nudus \n13 \ny = 0.311*x - 1.385 \n0.868 \n \nFemale H. oregonensis \n9 \ny = 0.351*x - 0.833 \n0.894 \n \nMale H. oregonensis \n14 \ny = 0.39*x - 1.149 \n0.693 \n \n \n \n \n \n \n \n \nSMA Regression  \n \nB \n \nN \nCarapace Width vs Propal Width  \nR2 \n \nFemale H. nudus \n13 \ny = 0.157*x - 0.386 \n0.927 \n \nMale H. nudus \n13 \ny = 0.209*x - 1.288 \n0.859 \n \nFemale H. oregonensis \n9 \ny = 0.175*x + 0.037 \n0.724 \n \nMale H. oregonensis \n14 \ny = 0.244*x - 0.688 \n0.534 \n \n \nCharifson 14 \n \nTable 2: Size and prey preference in H. nudus.  \nSize parameters of experimental Hemigrapsus nudus and number of prey consumed in 24 hour \nintervals (three trials). Crabs Fe1, Fe3, and Ma3 did not feed on snails and were not testable (NT) \nfor preference. \nIndividual \nCarapace \nWidth (mm) \nPropal \nHeight (mm) \nNumber of \nLacuna vincta \nconsumed \nNumber of \nLittorina scutulata \nconsumed \n \nG \n \np-value \nFe1 \n23.6 \n5.9 \n0 \n0 \nNT \n \nFe2 \n23.1 \n5.5 \n15 \n0 \n20.8 \np &lt; 0.001 \nFe3 \n20.6 \n5 \n0 \n0 \nNT \n \nMa1 \n19.1 \n5.4 \n14 \n0 \n19.4 \np &lt; 0.001 \nMa2 \n18.4 \n5.4 \n15 \n0 \n20.8 \np &lt; 0.001 \nMa3 \n20.1 \n6 \n0 \n0 \nNT \n \n \n \n \nCharifson 15 \n \n \nFigure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \nC) Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 16 \n \n \nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \n \n \n \nCharifson 17 \n \n \nFigure 3: Differences in propal height:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \nError bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \n0.3 \n0.35 \nH. nudus \nH. oregonensis \nPropal Height:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 18 \n \n \nFigure 4: Differences in propal width:carapace width ratio between sex and species. \nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \n0.01). Error bars represent standard error of the mean.  \n \n \n \n0 \n0.05 \n0.1 \n0.15 \n0.2 \n0.25 \nH. nudus \nH. oregonensis \nPropal Widtht:Carapace Width \nCrab Species \nFemale \nMale \nCharifson 19 \n \n \nFigure 5: Consumption rates by individual H. nudus.  \nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \nthe mean.  \n  \n0 \n0.1 \n0.2 \n0.3 \n0.4 \n0.5 \n0.6 \n0.7 \n0.8 \n0.9 \n1 \nFe1 \nFe2 \nFe3 \nMa1 \nMa2 \nMa3 \nMean Consumption Rate  \n(Snails Consumed/Hour) \nIndividual H. nudus\n# Read in some Data\nloader = PyMuPDFLoader(\"hms/fhl_2014_Charifson_34622 (1).pdf\")\n\n# Now taht we have our PDF document loaded into a loader object, we move onto text splitters\npages = loader.load_and_split()\n# with open(\"hms/kr111tr5711.txt\",  encoding=\"utf8\") as f:\n#     text_file = f.read()"
  },
  {
    "objectID": "content/Option2.html#faiss-vectorstore",
    "href": "content/Option2.html#faiss-vectorstore",
    "title": "Tiktoken Splitter",
    "section": "FAISS Vectorstore",
    "text": "FAISS Vectorstore\nFaiss is a library for efficient similarity search and clustering of dense vectors. It contains algorithms that search in sets of vectors of any size, up to ones that possibly do not fit in RAM. It also contains supporting code for evaluation and parameter tuning.\nTo retrieve text, there are two search types you can choose:\n\nsearch_type=“similarity” uses similarity search in the retriever object where it selects text chunk vectors that are most similar to the question vector.\nsearch_type=“mmr” uses the maximum marginal relevance search where it optimizes for similarity to query AND diversity among selected documents.\n\nIn our case, we wouldnt want to much diversity in our documents as we want the most accurate information. K = 3 returns the 3 most relevant documents.\nAs you will see, there are some inconsistencies in K as some returned 1, 2, or more than 3 relevant documents.\n\nvector_store = FAISS.from_documents(docs2, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})"
  },
  {
    "objectID": "content/Option2.html#custom-prompts",
    "href": "content/Option2.html#custom-prompts",
    "title": "Tiktoken Splitter",
    "section": "Custom Prompts",
    "text": "Custom Prompts\nYou can pass in custom prompts to do question answering. These prompts are the same prompts as you can pass into the base question answering chain\n\n# Build prompt\ntemplate = \"\"\"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer. Use three sentences maximum. Keep the answer as concise as possible. \nAvoid pulling context from the literature cited section starting on page 10\n{context}\nQuestion: {question}\nHelpful Answer:\"\"\"\nQA_CHAIN_PROMPT = PromptTemplate.from_template(template)"
  },
  {
    "objectID": "content/Option2.html#conversationalretrievalchain-similarity-search-w-conversationbuffermemory",
    "href": "content/Option2.html#conversationalretrievalchain-similarity-search-w-conversationbuffermemory",
    "title": "Tiktoken Splitter",
    "section": "ConversationalRetrievalChain Similarity Search w/ ConversationBufferMemory",
    "text": "ConversationalRetrievalChain Similarity Search w/ ConversationBufferMemory\n\ntk_text_splitter = TokenTextSplitter(chunk_size = 800, chunk_overlap = 50)\n\ndocs3 = tk_text_splitter.split_text(new_pdf_text)\n\n\nvector_store2 = FAISS.from_texts(docs3, embeddings).as_retriever(search_type = \"similarity\", search_kwargs= {\"k\": 3})\n\n\nllm = ChatOpenAI(temperature=0, model_name='gpt-3.5-turbo')\n\ncompressor = LLMChainExtractor.from_llm(llm)\n\ncompression_retriever2 = ContextualCompressionRetriever(base_compressor = compressor,base_retriever=vector_store2)\n\n\ncustom_template = \"\"\"Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question. Please use a maximum of 4 sentences. If you do not know the answer reply with 'I am sorry'.\n1. SPECIES NAME: The scientific name (species name) of any plant, animal, fungus, alga or bacterium consists of two Latinized words. The first word is the name of the genus to which the organism belongs. The second word is the specific epithet or specific term of the species. Together, the genus plus the specific epithet make up the species name. The species name and scientific name are synonyms.\n2. HABITAT: A species habitat can be seen as the physical manifestation of its ecological niche.\n3. LOC: Name of any geographic location, like cities, countries, continents, districts etc.\n\nExamples:\n\n1. Sentence: Strongylocentrotus fransiscanus and S. purpuratus were obtained from the subtidal and intertidal regions, respectively, of Monterey Bay.\n\"Output: {{'SPECIES NAME': ['Strongylocentrotus fransiscanus', 'S. purpuratus'], 'HABITAT': ['subtidal', 'intertidal'], 'LOC': ['Monterey Bay']}}\n\n2. Sentence: Cucumaria curata and C. pseudocurata live and feed in the hydrodynamically stressful environment of exposed intertidal areas.\nOutput: {{'SPECIES NAME': ['Cucumaria curata', 'C. pseudocurata'], 'HABITAT': ['exposed intertidal'], 'LOC': ['None']}}\\n\"\n\nChat History:\n{chat_history}\nFollow Up Input: {question}\ninputVariables: [\"context\", \"question\", \"chat_history\"]\n\"\"\"\n\n\nCUSTOM_QUESTION_PROMPT = PromptTemplate.from_template(custom_template)\n\n\n# We can now create a memory object, which is necessary to track the\n# inputs/outputs and hold a conversation.\n\n\nfrom langchain.memory import ConversationBufferMemory\nmemory = ConversationBufferMemory(llm=llm, input_key='question', output_key='answer', memory_key=\"chat_history\", return_messages=True)\n\n\n# We now initialize the ConversationalRetrievalChain\n\n\nqa_chain_2 = ConversationalRetrievalChain.from_llm(ChatOpenAI(), \n                                                 compression_retriever2,\n                                                 memory = memory,\n                                                 return_source_documents = True,\n                                                 condense_question_prompt = CUSTOM_QUESTION_PROMPT)\n                                                \n\n\nquery = \"What is this paper about?\"\nquery1a = \"What were the significant findings on the relationship mentioned?\"\nquery2 = \"Summarize the paper concisely with reference to materials and methods.\"\nquery3 = \"Write a one sentence summary of the purpose of the paper\"\nquery4 = \"Terms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\"\nquery5 = \"Does this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\"\nquery6 = \"What are the scientific names of the collected species mentioned in this paper?\"\nquery6a = \"Were there other species collected?\"\nquery7 = \"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nquery7a = \"Please list the species collected based on their scientific names along with location of collection.\"\nquery8 = \"Can you give a more specific location?\"\nquery9 = \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nquery10 = \"In what habitat were the species found?\"\nquery10a = \"Can you give a more specific location of the habitat such as formal name of said location?\"\nquery11 = \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\nquery12 = \"Are there any maps, figures, tables or diagrams in the paper?\"\n\n\nchat_history = []\n\n\nresult1a = qa_chain_2({\"question\": query, \"chat_history\": chat_history})\n\n\n#\"What is this paper about?\"\nresult1a[\"answer\"]\n\n'This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.'\n\n\n\nresult1a[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='A few interesting patterns emerged in the morphometric analysis of Hemigrapsus nudus and Hemigrapsus orogenensis. The variance in propal height or propal width explained by carapace width was surprisingly high in female H. nudus with R2 values of 0.976 found for propal height and 0.927 for propal width. Male H. oregenensis had the greatest variation in chela size parameters, demonstrated by R2 of 0.693 and 0.534 for propal height and propal width respectively. The R2 values for propal width regressed against carapace width were consistently lower than propal height regressed against carapace width across species and sexes (Table 1). In general the ability of carapace width to explain the variance in chela size parameters (i.', metadata={}),\n Document(page_content='The relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Propal height and propal \\nwidth increases with body size in a predictable manner in male and female crabs of both species. \\nSexual dimorphism of propal height and width relationships in both shore crabs is apparent, but \\nthere was no detectible difference in chela size between H. nudus and H. oregonensis. The lack \\nof difference in chela size between sympatric H. nudus and H. oregonensis suggests that there is \\nno character displacement in this trait. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.', metadata={})]\n\n\n\nresult1a[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False)]\n\n\n\nresult1b = qa_chain_2({\"question\": query, \"chat_history\": chat_history})\n\n\n# What were the significant findings on the relationship mentioned\nresult1b[\"answer\"]\n\n'The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.'\n\n\n\nresult1b[\"source_documents\"]\n\n[Document(page_content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={}),\n Document(page_content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={}),\n Document(page_content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. It investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', metadata={})]\n\n\n\nresult1b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False)]\n\n\n\nresult2b = qa_chain_2({\"question\": query2, \"chat_history\": chat_history})\n\n\n#\"Summarize the paper concisely with reference to materials and methods.\"\n\nresult2b[\"answer\"]\n\n'The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.'\n\n\n\nresult2b[\"source_documents\"]\n\n[Document(page_content='Mean Consumption Rate  \\n(Snails Consumed/Hour) \\nIndividual H. nudus', metadata={}),\n Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n\\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.', metadata={}),\n Document(page_content='ace width was a good predictor of both propal height (Figure 1, Table 1A) and \\npropal width (Figure 2, Table 1B) in female and male H. oregonensis and H. nudus. There was \\nless variation in the relationship between carapace width and propal height than with propal \\nwidth.  Due to non-normality of CW:PH and CW:PW an arcsin transformation was used. A \\nsignificant effect for sex was found for both CW:PH (F1, 45 = 125.6, p &lt; 0.001) and CW:PW  (F1, \\n45 = 103.81, p &lt; 0.001). There was no significant difference between Hemigrapsus species for \\nCW:PH (F1, 45 &lt; 0.01, p = 0.983) and CW:PW (F1, 45 = 0.09, p = 0.764). A significant \\nsex*species interaction was detected for both CW:PH (F1, 45 4.39, p = 0.042) and CW:PW (F1, 45 \\n= 7.19, p = 0.010). Figure 3 and 4 show the means of CW:PH and CW:PW in by sex and species \\nrespectively.', metadata={})]\n\n\n\nresult2b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='Summarize the paper concisely with reference to materials and methods.', additional_kwargs={}, example=False),\n AIMessage(content='The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.', additional_kwargs={}, example=False)]\n\n\n\nresult3b = qa_chain_2({\"question\": query3, \"chat_history\": chat_history})\n\n\n#\"Write a one sentence summary of the purpose of the paper\"\n\nresult3b[\"answer\"]\n\n'Based on the provided context, it is not possible to determine the purpose or main objective of the paper.'\n\n\n\nresult3b[\"source_documents\"]\n\n[Document(page_content='Table 1: SMA regressions of carapace width and propus measures.  \\nA) The relationship between carapace width and propal height. x is carapace width and y is \\npropal height. B) The relationship between carapace width and propal height. x is carapace width \\nand y is propal width.', metadata={})]\n\n\n\nresult3b[\"chat_history\"]\n\n[HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='This paper is about the morphometric analysis of two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. The study investigates the relationship between body size and propus size in these crabs, as well as the feeding preference for different types of snails. The paper also compares the chela size (claw size) between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='What is this paper about?', additional_kwargs={}, example=False),\n AIMessage(content='The paper investigates the relationship between body size and propus size in Hemigrapsus nudus and Hemigrapsus oregonensis crabs. It also compares the chela size between the two species and explores the potential for character displacement. Additionally, the paper discusses the variation in snail consumption rates among individual crabs.', additional_kwargs={}, example=False),\n HumanMessage(content='Summarize the paper concisely with reference to materials and methods.', additional_kwargs={}, example=False),\n AIMessage(content='The materials and methods used in this study involved measuring the carapace width, propal height, and propal width of female and male H. oregonensis and H. nudus. The relationship between carapace width and propal height/width was analyzed using SMA regression. Consumption rates of individual H. nudus were also recorded in 8 trials. Statistical analyses were conducted to determine the significance of sex, species, and their interaction on the carapace width to propal height/width ratios.', additional_kwargs={}, example=False),\n HumanMessage(content='Write a one sentence summary of the purpose of the paper', additional_kwargs={}, example=False),\n AIMessage(content='Based on the provided context, it is not possible to determine the purpose or main objective of the paper.', additional_kwargs={}, example=False)]\n\n\n\nresult4b = qa_chain_2({\"question\": query4, \"chat_history\": chat_history})\n\n\n#\"Terms that may be used to identify an observation include “in the field”, \n#“this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”,\n#“harvested”, “found”, etc. Does the paper include one or more observations?\"\n\nresult4b[\"answer\"]\n\n'Yes, the paper includes multiple observations.'\n\n\n\nresult4b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='There were no detectible difference in chela size between H. nudus and H. oregonensis. Both species of crabs showed a strong feeding preference for the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata. There were no differences in snail consumption rates between male and female H. nudus of similar propal heights.', metadata={})]\n\n\n\nresult5b = qa_chain_2({\"question\": query5, \"chat_history\": chat_history})\n\n\n#\"Does this paper contain observational or experimental research conducted in the natural environment \n#or with organisms collected in nature?\"\n\nresult5b[\"answer\"]\n\n'Based on the given context, it appears that the research described in the paper involves observational research conducted in the natural environment. The researchers collected snails from different locations in the natural habitat and observed the feeding preferences of the crabs in their natural environment.'\n\n\n\nresult5b[\"source_documents\"]\n\n[Document(page_content='The relationship between propus size and use of snails as prey in sympatric populations \\nof Hemigrapsus nudus and Hemigrapsus oregonensis was investigated. Both species of crabs showed a strong feeding preference \\nfor the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely \\ndue to the ease of consumption. There were no differences in snail consumption rates between \\nmale and female H. nudus of similar propal heights, mostly due to high feeding variation among \\nindividual crabs.', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={})]\n\n\n\nresult6b = qa_chain_2({\"question\": query6, \"chat_history\": chat_history})\n\n\n# \"What are the scientific names of the collected species mentioned in this paper?\"\n\nresult6b[\"answer\"]\n\n'The scientific names of the collected species mentioned in the paper are as follows:\\n\\n- Lacuna vincta\\n- Littorina scutulata\\n- Hemigrapsus nudus\\n- Hemigrapsus oregonensis'\n\n\n\nresult6b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Hemigrapsus nudus, Hemigrapsus oregonensis, Littorina scutulata, Lacuna vincta', metadata={})]\n\n\n\nresult7b = qa_chain_2({\"question\": query7, \"chat_history\": chat_history})\n\n\n#\"Does the paper mention where the species were observed or collected, and if so, what locations are given?\"\nresult7b[\"answer\"]\n\n'Yes, the paper mentions the locations where the species were collected. Lacuna vincta was collected at False Bay and Dead Man Cove, while Littorina scutulata was collected from the rocky intertidal zone of Fourth of July Beach.'\n\n\n\nresult7b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Both species of crabs showed a strong feeding preference for the thin-shelled gastropod Lacuna vincta over the thicker shelled Littorina scutulata, likely due to the ease of consumption.', metadata={})]\n\n\n\nresult7c = qa_chain_2({\"question\": query7a, \"chat_history\": chat_history})\n\n\n# \"Can you give a more specific location?\"\n\nresult7c[\"answer\"]\n\n'- Lacuna vincta: collected at False Bay and Dead Man Cove.\\n- Littorina scutulata: collected from the rocky intertidal zone of Fourth of July Beach.\\n- Hemigrapsus nudus and Hemigrapsus oregonensis: The specific locations of collection are not mentioned in the given context.'\n\n\n\nresult8b = qa_chain_2({\"question\": query8, \"chat_history\": chat_history})\n\n\nresult8b[\"answer\"]\n\n'Yes, the una vincta gastropods were collected at False Bay and Dead Man Cove, while the Littorina scutulata gastropods were collected from the rocky intertidal zone of Fourth of July Beach.'\n\n\n\nresult8b[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={})]\n\n\n\nresult9b = qa_chain_2({\"question\": query9, \"chat_history\": chat_history})\n\n\n# \"Are any coordinate locations given in latitude / longitude, and if so, what are they?\"\nresult9b[\"answer\"]\n\n'Yes, there are coordinate locations given in latitude/longitude.'\n\n\n\nresult9b[\"source_documents\"]\n\n[]\n\n\n\nresult10b = qa_chain_2({\"question\": query10, \"chat_history\": chat_history})\n\n\n#  \"In what habitat were the species found?\"\nresult10b[\"answer\"]\n\n'The species were found in the rocky intertidal zone and adjacent intertidal areas of False Bay, Dead Man Cove, Fourth of July Beach, and the intertidal adjacent to the Friday Harbor Laboratories dock on San Juan Island, Washington.'\n\n\n\nresult10b[\"source_documents\"]\n\n[Document(page_content='There is still considerable habitat overlap between these two species; the underside of a single rock may have roughly equal abundances of the two crab species (personal observation).', metadata={}),\n Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='All specimens were collected on San Juan Island, Washington.  Two shore crabs (clade: \\nBrachyura: Family Grapsidae), Hemigrapsus oregonensis  and Hemigrapsus nudus were \\ncollected in the intertidal adjacent to the Friday Harbor Laboratories dock.', metadata={})]\n\n\n\nresult10c = qa_chain_2({\"question\": query10a, \"chat_history\": chat_history})\n\n\n# \"Can you give a more specific location of the habitat such as formal name of said location?\"\nresult10c[\"answer\"]\n\n'Yes, the specific locations mentioned in the context are False Bay, Dead Man Cove, and Fourth of July Beach, all of which are on San Juan Island, Washington. There is no mention of a formal name for these locations.'\n\n\n\nresult10c[\"source_documents\"]\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='All specimens were collected on San Juan Island, Washington. Two shore crabs (clade: Brachyura: Family Grapsidae), Hemigrapsus oregonensis and Hemigrapsus nudus were collected in the intertidal adjacent to the Friday Harbor Laboratories dock.', metadata={})]\n\n\n\nresult11b = qa_chain_2({\"question\": query11, \"chat_history\": chat_history})\n\n\n# \"Does the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\"\n\nresult11b[\"answer\"]\n\n'Yes, the paper mentions the year as \"Summer 2014\". However, it does not provide specific dates or times for when the species were collected or observed.'\n\n\n\nresult11b['source_documents']\n\n[Document(page_content='una vincta, in the Class Gastropoda and Family Littoridae, were collected at False Bay and \\nDead Man Cove. Littorina scutulata, in the Class Gastropoda and Family Littoridae, were \\ncollected from the rocky intertidal zone of Fourth of July Beach.', metadata={}),\n Document(page_content='Summer 2014', metadata={})]\n\n\n\nresult12b = qa_chain_2({\"question\": query12, \"chat_history\": chat_history})\n\n\nresult12b[\"answer\"]\n\n'Yes, there are figures and tables in the paper. Specifically, there are Figure 1, Table 1A, Figure 2, Table 1B, Figure 3, and Figure 4.'\n\n\n\n#  \"Are there any maps, figures, tables or diagrams in the paper?\"\nresult12b[\"source_documents\"]\n\n[Document(page_content='Figure 1, Table 1A, Figure 2, Table 1B, Figure 3, Figure 4', metadata={}),\n Document(page_content='Figure 1: Relationship of carapace width and propal height in Hemigrapsus. Line of best fit from \\nSMA regression. See Table 1A for descriptive statistics. A) Female H. nudus. B) Male H. nudus. \\nC) Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 2: Relationship of carapace width and propal width in Hemigrapsus.  \\nLine of best fit from SMA regression. See Table 1B for descriptive statistics. A) Female H. \\nnudus. B) Male H. nudus. C)Female H. oregonensis. D) Male H. oregonensis.  \\n\\nFigure 3: Differences in propal height:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F = 125.6. p &lt; 0.001), while the species factor was \\ninsignificant (F &gt; 0.01, p = 0.983). There was a significant interaction (F = 4.39, p = 0.042). \\nError bars represent standard error of the mean.  \\n\\nFigure 4: Differences in propal width:carapace width ratio between sex and species. \\nThe sex factor was statistically significant (F1,45 = 103.8. p &lt; 0.001), while the species factor was \\ninsignificant (F1,45  = 0.09, p = 0.764). There was a significant interaction (F1,45  = 7.19, p = \\n0.01). Error bars represent standard error of the mean.  \\n\\nFigure 5: Consumption rates by individual H. nudus.  \\nMean consumption rates (n = 8 trials) of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) H. \\nnudus. Crabs Fe1, Fe3, and Ma3 did not consume snails. The individuals that eat snails did not \\ndiffer in their consumption rates (F2,21  = 2.52, p = 0.104). Error bars represent standard error of \\nthe mean.', metadata={})]"
  },
  {
    "objectID": "content/publishing.html",
    "href": "content/publishing.html",
    "title": "Publishing",
    "section": "",
    "text": "To get your Quarto webpage to show up with the url\nyou have a few steps."
  },
  {
    "objectID": "content/publishing.html#turn-on-github-pages-for-your-repo",
    "href": "content/publishing.html#turn-on-github-pages-for-your-repo",
    "title": "Publishing",
    "section": "Turn on GitHub Pages for your repo",
    "text": "Turn on GitHub Pages for your repo\n\nTurn on GitHub Pages under Settings &gt; Pages . You will set pages to be made from the gh-pages branch and the root directory.\nTurn on GitHub Actions under Settings &gt; Actions &gt; General\n\nThe GitHub Action will automatically recreate your website when you push to GitHub after you do the initial gh-pages set-up"
  },
  {
    "objectID": "content/publishing.html#do-your-first-publish-to-gh-pages",
    "href": "content/publishing.html#do-your-first-publish-to-gh-pages",
    "title": "Publishing",
    "section": "Do your first publish to gh-pages",
    "text": "Do your first publish to gh-pages\nThe first time you publish to gh-pages, you need to do so locally.\n\nOn your local computer, open a terminal window and cd to your repo directory. Here is what that cd command looks like for me. You command will look different because your local repo will be somewhere else on your computer.\n\ncd ~/Documents/GitHub/NOAA-quarto-simple\n\nPublish to the gh-pages. In the terminal type\n\nquarto publish gh-pages\nThis is going to render your webpage and then push the _site contents to the gh-pages branch."
  },
  {
    "objectID": "content/publishing.html#dont-like-using-gh-pages",
    "href": "content/publishing.html#dont-like-using-gh-pages",
    "title": "Publishing",
    "section": "Don’t like using gh-pages?",
    "text": "Don’t like using gh-pages?\nIn some cases, you don’t want your website on the gh-pages branch. For example, if you are creating releases and you want the website pages archived in that release, then you won’t want your website pages on the gh-pages branch.\nHere are the changes you need to make if you to avoid gh-pages branch.\n\nAt the top of _quarto.yml add the following:\n\nproject: \n  type: website\n  output-dir: docs\n\nOn GitHub under Settings &gt; Pages set pages to be made from the main branch and the docs directory.\nMake sure docs is not listed in .gitignore\nPublish the site the first time locally using quarto publish from the terminal\nChange the GitHub Action because you can’t use quarto publish gh-pages. You’ll need to push to the main branch yourself (in the GitHub Action)\n\non:\n  push:\n    branches: main\n\nname: Render and Publish\n\njobs:\n  build-deploy:\n    runs-on: ubuntu-latest\n    env:\n      GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}\n\n    steps:\n      - name: Check out repository\n        uses: actions/checkout@v2 \n        \n      - name: Set up R (needed for Rmd)\n        uses: r-lib/actions/setup-r@v2\n\n      - name: Install packages (needed for Rmd)\n        run: Rscript -e 'install.packages(c(\"rmarkdown\", \"knitr\", \"jsonlite\"))'\n\n      - name: Set up Quarto\n        uses: quarto-dev/quarto-actions/setup@v2\n        with:\n          # To install LaTeX to build PDF book \n          # tinytex: true \n          # uncomment below and fill to pin a version\n          # version: 0.9.600\n      \n      - name: Render Quarto Project\n        uses: quarto-dev/quarto-actions/render@v2\n        with:\n          to: html\n\n      - name: Set up Git\n        run: |\n          git config --local user.email \"actions@github.com\"\n          git config --local user.name \"GitHub Actions\"\n\n      - name: Commit all changes and push\n        run: |\n          git add -A && git commit -m 'Build site' || echo \"No changes to commit\"\n          git push origin || echo \"No changes to commit\""
  },
  {
    "objectID": "content/ComparingResults-Options1&2.html",
    "href": "content/ComparingResults-Options1&2.html",
    "title": "Results",
    "section": "",
    "text": "import pandas as pd",
    "crumbs": [
      "Results Table - Options 1 & 2"
    ]
  },
  {
    "objectID": "content/ComparingResults-Options1&2.html#option-1",
    "href": "content/ComparingResults-Options1&2.html#option-1",
    "title": "Results",
    "section": "Option 1",
    "text": "Option 1\nHere are the results of testing out the 4 different chain types for Retrieval QA.\n\nRefine\nMap Reduce\nRe-rank\nStuff\n\nBased on the results, Refine and Stuff performed better than reduce and re-rank in terms of accuracy.\n\n\n#| label: tools-test\n#| fig-cap: &gt;\n#|  Comparing results for initial questions\n#|  across the three tools.\ndf = pd.read_excel('Recording of Results on Test Questions (1).xlsx', nrows=5, usecols=[0,1,2,3,4,5,6,7,8,9,10,11,12,13], sheet_name = \"Option #1 Exp - fhl_Charifson\")\ndf.style.set_table_styles([dict(selector=\"th\",props=[('max-width', '200px')])])\nleft_aligned_df = df.style.set_properties(**{'text-align': 'left'})\ndisplay(left_aligned_df)\n\n\n\n\n\n\n \nPaper\nRetrievalQA - Chain_Type\nWhat is this paper about?\nSummarize the paper concisely with reference to materials and methods.\nWrite a one sentence summary of the purpose of the paper\nTerms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\nDoes this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\nWhat are the scientific names of the species mentioned in this paper?\nDoes the paper mention where the species were observed or collected, and if so, what locations are given?\nCan you give a more specific location?\nAre any coordinate locations given in latitude / longitude, and if so, what are they?\nIn what habitat were the species found?\nDoes the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\nAre there any maps, figures, tables or diagrams in the paper?\n\n\n\n\n0\nfhl_2014_Charifson_34622.pdf; Snail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species Differences in Chela Size\nRefine\nthe paper is still primarily focused on the relationship between carapace width and propus measures in H. nudus and H. oregonensis crabs. The additional context provided describes consumption rates by individual H. nudus crabs, which is not directly related to the content of the paper.'\nThe paper utilized SMA regressions to examine the relationship between carapace width and propal height in Hemigrapsus species. The relationship was analyzed using a line of best fit from SMA regression, as shown in Figure 1. Descriptive statistics for female and male H. nudus and H. oregonensis can be found in Table 1a.'\nThe purpose of the paper is to analyze the relationship between carapace width (CW) and propus measures (PH and PW) in different species of crabs, specifically examining the differences in propal width: carapace width ratio between sexes and species, with the sex factor being statistically significant while the species factor was insignificant, and a significant interaction between the two factors.'\nThe additional context provided does not directly relate to the question at hand, which is whether the paper includes observations. Therefore, the original answer remains valid and does not need any refinement.'\nBased on the additional context provided, it is clear that the paper contains experimental research conducted in the natural environment or with organisms collected in nature. The mention of logistical issues surrounding the experimental design, the need for more crabs, and the acknowledgment of permission to collect organisms indicate that the research involved conducting experiments with live organisms in their natural habitats.\nBased on the additional context provided, the scientific names of the species mentioned in the paper are:\\n\\n1. Hemigrapsus nudus (female and male)\\n2. Hemigrapsus oregonensis (female and male)'\nThe new context provided does not mention anything about the locations where the species were observed or collected. Therefore, the original answer remains the same.'\nThank you for providing additional context. However, the new information does not specify the location of the study. The references you provided are book titles and do not specify a particular study or location. Therefore, the original answer remains the same: the specific location where this study took place is not mentioned.\nThe new context provided does not contain any coordinate locations given in latitude/longitude. Therefore, the original answer remains the same.'\nThe new context provided does not give any information about the habitat in which the species were found. Therefore, the original answer remains unchanged.\nBased on the new context provided, the paper does not mention a specific year, date, or time when species were collected or observed. The information provided in the new context is related to the statistical analysis of propal width: carapace width ratio between sexes and species of crabs. It does not provide any temporal information regarding the collection or observation of the species. Therefore, the original answer remains the same.'\nBased on the additional context provided, there is no mention of any maps, tables, or diagrams in the paper. However, there are figures in the paper. Figure 1, titled \"Relationship of carapace width and propal height in Hemigrapsus,\" shows the relationship between carapace width and propal height in different species and genders of Hemigrapsus. The figure includes subfigures (a, b, c, d) for female and male Hemigrapsus nudus and Hemigrapsus oregonensis. Additionally, Table 1a provides descriptive statistics related to these figures.\n\n\n1\nnan\nMap Reduce\nBased on the provided text, it is difficult to determine the exact topic of the paper. However, it appears to be discussing the consumption rates of individual H. nudus (presumably a type of crab) and their consumption of snails. The text mentions the mean consumption rates of female and male crabs, as well as the fact that some individuals did not consume snails.'\nThe paper analyzed the relationship between carapace width and propal height and width in two species of crabs, H. nudus and H. oregonensis. The authors used a two-way ANOVA to compare the differences in cw:ph and cw:pw. They conducted simple moving average (SMA) regressions and provided regression equations and R-squared values for each species and gender. The paper also included a figure showing the relationship between carapace width and propal width in different species of Hemigrapsus crabs, using a line of best fit from a SMA regression analysis. Descriptive statistics for the data can be found in Table 1a and 1b.'\nThe purpose of the paper is to analyze the relationship between carapace width and propal height/width in different species of crabs, as well as the differences in these ratios between sexes and species.'\nBased on the provided portions of the document, it does not appear to include any specific observations.'\nBased on the provided information, it is not possible to determine whether the paper contains observational or experimental research conducted in the natural environment or with organisms collected in nature.'\nThe scientific names of the species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis.\nThe provided portion of the document does not mention anything about the locations where the species were observed or collected.'\nnan\nThere is no mention of any coordinate locations or latitude/longitude in the given portion of the document.'\nThe given portion of the document does not provide any information about the habitat in which the species were found.'\nNo, the given portion of the document does not mention any specific year, date, or time related to the collection or observation of species.'\nThere is no information provided in the given portion of the document about the presence of maps, figures, tables, or diagrams in the paper.'\n\n\n2\nnan\nMap Re-Rank\nThis document is about biometry and ecological character displacement.'\nThis document provides a figure showing the relationship between carapace width and propal width in different species of Hemigrapsus crabs. The figure includes data for female and male H. nudus and H. oregonensis. The figure also includes a line of best fit from a simple linear regression analysis. For more detailed information, refer to Table 1b for descriptive statistics.\nThis document does not provide enough information to determine the purpose of the paper.'\nThis document does not answer the question'\nThis document contains experimental research conducted with organisms collected in nature.'\nh. nudus'\nThis document does not mention where the species were observed or collected.'\nnan\nNo, there are no coordinate locations given in latitude/longitude in the context.'\nThis document does not answer the question'\nNo, the paper does not mention a year, date, or time that species were collected or observed.'\nYes, there are figures in the paper. Figure 2 shows the relationship of carapace width and propal width in hemigrapsus. It includes four subfigures: a) female H. nudus, b) male H. nudus, c) female H. oregonensis, and d) male H. oregonensis. The line of best fit from sma regression is also shown. Table 1b provides descriptive statistics.\n\n\n3\nnan\nStuff\nThis paper is about the analysis of carapace width and propus measures in different species of crabs, specifically H. nudus and H. oregonensis. It also discusses the consumption rates of individual H. nudus crabs.\nThe paper analyzed the relationship between carapace width and propus measures in H. nudus and H. oregonensis crabs using a two-way ANOVA. The authors conducted SMA regressions to determine the relationship between carapace width and propal height and width, and provided descriptive statistics and line of best fit graphs for each species and sex.\nThe purpose of the paper is to analyze the relationship between carapace width and propus measures in different species of crabs and to compare the differences between sexes and species.'\nBased on the given context, it is not clear whether the paper includes one or more observations.'\nBased on the given context, it is not clear whether the paper contains observational or experimental research conducted in the natural environment or with organisms collected in nature. The context provided does not explicitly mention any observations being made or data being collected.'\nThe scientific names of the species mentioned in this paper are Hemigrapsus nudus and Hemigrapsus oregonensis.'\nBased on the given context, it is not mentioned in the paper where the species were observed or collected. No specific locations are given.'\nnan\nNo, there are no coordinate locations given in latitude/longitude in the provided context.'\nThe species were found in water and in finer sediment.'\nNo, the paper does not mention a year, date, or time that the species were collected or observed.'\nYes, there are figures in the paper. Figure 1 shows the relationship between carapace width and propal height in different species and genders of Hemigrapsus. Figure 2 shows the relationship between carapace width and propal width in the same species and genders. There are also tables mentioned in the context, such as Table 1a and Table 1b, which provide descriptive statistics.'",
    "crumbs": [
      "Results Table - Options 1 & 2"
    ]
  },
  {
    "objectID": "content/ComparingResults-Options1&2.html#option-2",
    "href": "content/ComparingResults-Options1&2.html#option-2",
    "title": "Results",
    "section": "Option 2",
    "text": "Option 2\nHere are the result from testing the ConversationalRetrievalQA with “Stuff” chain type with and without Contextual Compression.\nOne challenge with retrieval is that usually you don’t know the specific queries your document storage system will face when you ingest data into the system. This means that the information most relevant to a query may be buried in a document with a lot of irrelevant text. Passing that full document through your application can lead to more expensive LLM calls and poorer responses.\nContextual compression is meant to fix this. The idea is simple: instead of immediately returning retrieved documents as-is, you can compress them using the context of the given query, so that only the relevant information is returned. “Compressing” here refers to both compressing the contents of an individual document and filtering out documents wholesale.\n\ndf = pd.read_excel('Recording of Results on Test Questions (1).xlsx', nrows=5, usecols=[0,1,2,3,4,5,6,7,8,9,10,11,12,13], sheet_name = \"Option #2 Exp - fhl_Charifson\")\ndf.style.set_table_styles([dict(selector=\"th\",props=[('max-width', '200px')])])\nleft_aligned_df = df.style.set_properties(**{'text-align': 'left'})\ndisplay(left_aligned_df)\n\n\n\n\n\n\n \nPaper\nConversationalRetrievalQA - Chain_Type\nWhat is this paper about?\nSummarize the paper concisely with reference to materials and methods.\nWrite a one sentence summary of the purpose of the paper\nTerms that may be used to identify an observation include “in the field”, “this study”, “observed”, “taken”, “collected”, “sampled”, “collection”, “seen”, “harvested”, “found”, etc. Does the paper include one or more observations?\nDoes this paper contain observational or experimental research conducted in the natural environment or with organisms collected in nature?\nWhat are the scientific names of the species mentioned in this paper?\nDoes the paper mention where the species were observed or collected, and if so, what locations are given?\nCan you give a more specific location?\nAre any coordinate locations given in latitude / longitude, and if so, what are they?\nIn what habitat were the species found?\nDoes the paper mention a year, date and/or time that species were collected or observed, and if so, what was mentioned?\nAre there any maps, figures, tables or diagrams in the paper?\n\n\n\n\n0\nfhl_2014_Charifson_34622.pdf; Snail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species Differences in Chela Size\nStuff\nThis paper is about the differences in chela size between Hemigrapsus nudus and Hemigrapsus oregonensis and how it relates to snail predation.'\nThe paper discusses the limitations of a previous study due to logistical issues and lack of replication. It suggests that future studies should include more crabs, exclude non-feeding crabs, and have longer trial periods. Additionally, it recommends using multivariate and geometric morphometric methods to quantify claw shape instead of ratios.\nThe purpose of the paper is to address the limitations of a previous study and propose improvements for future studies on crab feeding behavior and claw shape.'\nYes, the paper includes one or more observations.'\nThis paper contains both observational and experimental research conducted in the natural environment or with organisms collected in nature.'\nHemigrapsus nudus and Hemigrapsus oregonensis.'\nThe paper mentions that the species were observed and collected in Elkhorn Slough, Monterey County, California.' (INCORRECT - Pulling from Citation Section)\nThe study was conducted in a rural area in northern California.'\nNo, there are no coordinate locations given in latitude/longitude in the provided context.'\nThe species Lacuna vincta were found in False Bay and Dead Man Cove. The species Littorina scutulata were found in the rocky intertidal zone of Fourth of July Beach.\nThe paper does not mention a year, date, or time that species were collected or observed.'\nYes, there are figures in the paper.'\n\n\n1\nnan\nStuff w/o Contextual Compression\nThis paper is about the mechanics of fiddler crab claws and the need for future studies to improve experimental design and methodology.'\nThe paper discusses the need for future studies to address logistical issues and increase replication. It also suggests using multivariate and geometric morphometric methods to quantify claw shape instead of ratios. The acknowledgements section mentions individuals and organizations that provided advice and financial support for the study.'\nThe purpose of the paper is to discuss the logistical issues and limitations of a previous study on fiddler crab claw shape and suggest improvements for future studies.'\n\"I don't know.\"\nThis paper contains experimental research conducted with organisms collected in nature.'\nHemigrapsus nudus, Hemigrapsus orogenensis, Littorina scutulata, Lacuna vincta.'\nThe paper mentions that the study was conducted at Friday Harbor Laboratories, University of Washington, Friday Harbor, WA 98250.'\nNo, the specific location is not provided in the given context.'\nNo, there are no coordinate locations given in latitude/longitude.'\nThe species were found in the rocky intertidal zone.'\nNo, the paper does not mention a year, date, or time that species were collected or observed.'\nYes, there is a figure in the paper.'\n\n\n2\nnan\nStuff w/ Contextual Compression\nThis paper is about the differences in chela size between Hemigrapsus nudus and Hemigrapsus oregonensis and how it relates to snail predation.'\nThe paper discusses the limitations of a previous study due to logistical issues and lack of replication. It suggests that future studies should include more crabs, exclude non-feeding crabs, and have longer trial periods. Additionally, it recommends using multivariate and geometric morphometric methods to quantify claw shape instead of ratios.\nThe purpose of the paper is to address the limitations of a previous study and propose improvements for future studies on crab feeding behavior and claw shape.'\nYes, the paper includes one or more observations.'\nThis paper contains both observational and experimental research conducted in the natural environment or with organisms collected in nature.'\nHemigrapsus nudus and Hemigrapsus oregonensis.'\nThe paper mentions that the species were observed and collected in Elkhorn Slough, Monterey County, California.'\n\"I don't know.\"\nNo, there are no coordinate locations given in latitude/longitude.'\nThe species Lacuna vincta were found in False Bay and Dead Man Cove. The species Littorina scutulata were found in the rocky intertidal zone of Fourth of July Beach.'\nThe paper does not mention a year, date, or time that species were collected or observed.'\nYes, there are figures (Figure 1 and Figure 2) and tables (Table 1A and Table 1B) in the paper.'",
    "crumbs": [
      "Results Table - Options 1 & 2"
    ]
  },
  {
    "objectID": "content/image_gallery.html",
    "href": "content/image_gallery.html",
    "title": "Text Difference Checker",
    "section": "",
    "text": "We wanted to compare the outputs between our private model and Print 0.3 (public) model on Transkribus. Our private model was trained using 70 pages of student papers with the Print 0.3 as our base model. Consequently, our private model perform significantly worse than the Print 0.3M model.\nUpon further research and guidance from Transkribus’s support team, our results was an example of overfitting. Overfitting is a common problem in machine learning where a model learns the details and noise in the training data to such an extent that it negatively impacts the performance of the model on new data. In essence, an overfitted model performs very well on training data but poorly on validation or test data.\nAs a result, the print 0.3 was deemed effective enough with an character error rate (CER) of 1.6%. CER measures the number of characters that were incorrectly predicted compared to the ground truth, normalized by the total number of characters in the ground truth.",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#motivation-for-checker",
    "href": "content/image_gallery.html#motivation-for-checker",
    "title": "Text Difference Checker",
    "section": "",
    "text": "We wanted to compare the outputs between our private model and Print 0.3 (public) model on Transkribus. Our private model was trained using 70 pages of student papers with the Print 0.3 as our base model. Consequently, our private model perform significantly worse than the Print 0.3M model.\nUpon further research and guidance from Transkribus’s support team, our results was an example of overfitting. Overfitting is a common problem in machine learning where a model learns the details and noise in the training data to such an extent that it negatively impacts the performance of the model on new data. In essence, an overfitted model performs very well on training data but poorly on validation or test data.\nAs a result, the print 0.3 was deemed effective enough with an character error rate (CER) of 1.6%. CER measures the number of characters that were incorrectly predicted compared to the ground truth, normalized by the total number of characters in the ground truth.",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#tools-used",
    "href": "content/image_gallery.html#tools-used",
    "title": "Text Difference Checker",
    "section": "Tools Used",
    "text": "Tools Used\n\nPython\nDifflib (comparing differences between sequences and calculating similarity)\nJupyter Notebook",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#compare-character-sequences",
    "href": "content/image_gallery.html#compare-character-sequences",
    "title": "Text Difference Checker",
    "section": "Compare Character sequences",
    "text": "Compare Character sequences\nSequenceMatcher is a class in difflib that can be used to compare the similarity between two sequences (such as strings). It uses the Ratcliff/Obershelp algorithm to calculate the similarity between two sequences.",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#create-a-difference-report",
    "href": "content/image_gallery.html#create-a-difference-report",
    "title": "Text Difference Checker",
    "section": "Create a difference report",
    "text": "Create a difference report\nHtmlDiff is a class that can be used to create an HTML table, howing a side by side, line by line comparison of text with inter-line and intra-line change highlights.",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#below-is-the-gallery-of-text-comparisons",
    "href": "content/image_gallery.html#below-is-the-gallery-of-text-comparisons",
    "title": "Text Difference Checker",
    "section": "Below is the gallery of text comparisons:",
    "text": "Below is the gallery of text comparisons:\n\nLeft: Print 0.3\nRight: Private model",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#bv172tc9618_0002",
    "href": "content/image_gallery.html#bv172tc9618_0002",
    "title": "Text Difference Checker",
    "section": "bv172tc9618_0002",
    "text": "bv172tc9618_0002",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#cp967xz4450",
    "href": "content/image_gallery.html#cp967xz4450",
    "title": "Text Difference Checker",
    "section": "cp967xz4450",
    "text": "cp967xz4450",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#dr894zh9418",
    "href": "content/image_gallery.html#dr894zh9418",
    "title": "Text Difference Checker",
    "section": "dr894zh9418",
    "text": "dr894zh9418",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#kr104zb7305",
    "href": "content/image_gallery.html#kr104zb7305",
    "title": "Text Difference Checker",
    "section": "kr104zb7305",
    "text": "kr104zb7305",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#wp009br6936",
    "href": "content/image_gallery.html#wp009br6936",
    "title": "Text Difference Checker",
    "section": "wp009br6936",
    "text": "wp009br6936",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#yw206cp4709",
    "href": "content/image_gallery.html#yw206cp4709",
    "title": "Text Difference Checker",
    "section": "yw206cp4709",
    "text": "yw206cp4709",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/image_gallery.html#zz472cp8582",
    "href": "content/image_gallery.html#zz472cp8582",
    "title": "Text Difference Checker",
    "section": "zz472cp8582",
    "text": "zz472cp8582",
    "crumbs": [
      "Text Checker Outputs"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html",
    "href": "content/PyTesseract_OCR.html",
    "title": "Issue with Tesseract in PATH",
    "section": "",
    "text": "import cv2\nimport pytesseract\nimport difflib\nimport glob\nimport os\nfrom IPython.display import Image\nimport matplotlib.pyplot as plt\n%matplotlib inline\npytesseract.pytesseract.tesseract_cmd = r'C:\\Users\\USER\\AppData\\Local\\Programs\\Tesseract-OCR\\tesseract.exe'\nImage(filename='./tesseract PATH.png')\nImage(filename='./Fix OCR Papers/bg870mr8040/bg870mr8040_0001.jpg')",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#reading-images-using-opencv",
    "href": "content/PyTesseract_OCR.html#reading-images-using-opencv",
    "title": "Issue with Tesseract in PATH",
    "section": "Reading Images Using OpenCV",
    "text": "Reading Images Using OpenCV\nOpenCV allows reading different types of images (JPG, PNG, etc). You can load grayscale images, color images or you can also load images with Alpha channel. It uses the cv2.imread() function which has the following syntax:\nimage = cv2.imread(filename[,flags])\nThe function has 1 required input argument and one optional flag:\nfilename: This can be an absolute or relative path. This is a mandatory argument.\nFlags: These flags are used to read an image in a particular format (for example, grayscale/color/with alpha channel). This is an optional argument with a default value of cv2.IMREAD_COLOR or 1 which loads the image as a color image.\nFlags\n\ncv2.IMREAD_GRAYSCALE or 0: Loads image in grayscale mode\ncv2.IMREAD_COLOR or 1: Loads a color image. Any transparency of image will be neglected. It is the default flag.\ncv2.IMREAD_UNCHANGED or -1: Loads image as such including alpha channel.\n\n\nimage_example = cv2.imread(\"./Fix OCR Papers/bg870mr8040/bg870mr8040_0001.jpg\")\n\nprint(\"Image size (H, W) is:\", image_example.shape)\n\n'''3301 is the height of the image in pixels. 2521 is the width of the image in pixels.\n3 denotes that the image has 3 channels. This suggests that the image is a standard RGB (Red, Green, Blue) image, \nwhere each pixel is represented by a combination of three values corresponding to the intensity of the red, green, and blue channels, respectively. \nTherefore, each pixel in the image requires three values to represent its color information.'''\n\nImage size (H, W) is: (3301, 2521, 3)\n\n\n'3301 is the height of the image in pixels. 2521 is the width of the image in pixels.\\n3 denotes that the image has 3 channels. This suggests that the image is a standard RGB (Red, Green, Blue) image, \\nwhere each pixel is represented by a combination of three values corresponding to the intensity of the red, green, and blue channels, respectively. \\nTherefore, each pixel in the image requires three values to represent its color information.'\n\n\n\nplt.imshow(image_example)\n\n\n\n\n\n\n\n\n\ncropped_title = image_example[200:650, 200:2500]\nplt.imshow(cropped_title)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#resizing-images",
    "href": "content/PyTesseract_OCR.html#resizing-images",
    "title": "Issue with Tesseract in PATH",
    "section": "Resizing Images",
    "text": "Resizing Images\nThe function resize resizes the image src down to or up to the specified size. The size and type are derived from the src,dsize,fx, and fy.\nFunction Syntax\nresize_img = resize( src, dsize[, dst[, fx[, fy[, interpolation]]]] ) - resize_img: output image; it has the size dsize (when it is non-zero) or the size computed from src.size(), fx, and fy; the type of dst is the same as of src.\nThe function has 2 required arguments:\n\nsrc: input image\ndsize: output image size. If it equals zero, it is computed as: dsize = Size(round(fx * src.cols), round(fy * src.rows))\n\nOptional arguments that are often used include:\n\nfx: Scale factor along the horizontal axis; when it equals 0, it is computed as (𝚍𝚘𝚞𝚋𝚕𝚎)𝚍𝚜𝚒𝚣𝚎.𝚠𝚒𝚍𝚝𝚑/𝚜𝚛𝚌.𝚌𝚘𝚕𝚜\nfy: Scale factor along the vertical axis; when it equals 0, it is computed as (𝚍𝚘𝚞𝚋𝚕𝚎)𝚍𝚜𝚒𝚣𝚎.𝚑𝚎𝚒𝚐𝚑𝚝/𝚜𝚛𝚌.𝚛𝚘𝚠𝚜",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#specifying-scaling-factor-using-fx-and-fy",
    "href": "content/PyTesseract_OCR.html#specifying-scaling-factor-using-fx-and-fy",
    "title": "Issue with Tesseract in PATH",
    "section": "#1: Specifying Scaling Factor using fx and fy",
    "text": "#1: Specifying Scaling Factor using fx and fy\n\nresized_cropped_img = cv2.resize(cropped_title, None, fx=2, fy=2)\nprint(\"Image size (H, W) once doubled:\", resized_cropped_img.shape)\nplt.imshow(resized_cropped_img)\n\nImage size (H, W) once doubled: (900, 4600, 3)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#specify-exact-size-of-output-image",
    "href": "content/PyTesseract_OCR.html#specify-exact-size-of-output-image",
    "title": "Issue with Tesseract in PATH",
    "section": "#2 Specify exact size of output image",
    "text": "#2 Specify exact size of output image\n\ndesired_width = 3000\ndesired_height = 1000\ndim = (desired_width, desired_height)\n\nresized_cropped_img2 = cv2.resize(cropped_title, dsize = dim, interpolation= cv2.INTER_AREA)\nplt.imshow(resized_cropped_img2)\n\n\n\n\n\n\n\n\n\ncv2.imwrite(\"./Fix OCR Papers/bg870mr8040/bg870mr8040_0001-cropped.jpg\", resized_cropped_img2)\n\nTrue",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#converting-to-different-color-spaces",
    "href": "content/PyTesseract_OCR.html#converting-to-different-color-spaces",
    "title": "Issue with Tesseract in PATH",
    "section": "Converting to different Color Spaces",
    "text": "Converting to different Color Spaces\ncv2.cvtColor() Converts an image from one color space to another. The function converts an input image from one color space to another. In case of a transformation to-from RGB color space, the order of the channels should be specified explicitly (RGB or BGR). Note that the default color format in OpenCV is often referred to as RGB but it is actually BGR (the bytes are reversed). So the first byte in a standard (24-bit) color image will be an 8-bit Blue component, the second byte will be Green, and the third byte will be Red. The fourth, fifth, and sixth bytes would then be the second pixel (Blue, then Green, then Red), and so on.\nFunction Syntax\ndst = cv2.cvtColor( src, code )\n\ndst: Is the output image of the same size and depth as src.\n\nThe function has 2 required arguments:\n\nsrc input image: 8-bit unsigned, 16-bit unsigned ( CV_16UC… ), or single-precision floating-point.\ncode color space conversion code (see ColorConversionCodes).\n\n\nimage_example = cv2.imread(\"./Fix OCR Papers/bg870mr8040/bg870mr8040_0001.jpg\")\n\ngray = cv2.cvtColor(image_example, cv2.COLOR_BGR2GRAY)\n\n\n\nplt.imshow(gray)\n\n\n\n\n\n\n\n\n\nimg_rgb = cv2.cvtColor(image_example, cv2.COLOR_BGR2RGB)\n\nplt.imshow(img_rgb)",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#image-denoising-in-opencv",
    "href": "content/PyTesseract_OCR.html#image-denoising-in-opencv",
    "title": "Issue with Tesseract in PATH",
    "section": "Image Denoising in OpenCV",
    "text": "Image Denoising in OpenCV\n\nTheory\n\nDenoising refers to the process of removing noise from an image, where noise is random variations in brightness or color that can obscure the underlying structure of the image.\nDenoising is essential in various image processing tasks to improve the quality of images and enhance subsequent analysis or visualization.\n\nOpenCV provides four variations of this technique:\n\ncv.fastNlMeansDenoising() - works with a single grayscale images\ncv.fastNlMeansDenoisingColored() - works with a color image.\ncv.fastNlMeansDenoisingMulti() - works with image sequence captured in short period of time (grayscale images)\ncv.fastNlMeansDenoisingColoredMulti() - same as above, but for color images.\n\nFunction Syntax\ndenoised = cv2.fastNlMeansDenoising(src, None, h=10, templateWindowSize=7, searchWindowSize=21)\n\nsrc: Imput image- should be an 8-bit or 16-bit single channel image\nNone: This parameter is a placeholder for the output denoised image. Since we want to obtain the denoised image as the output, we pass None, and the function will allocate memory for the output automatically.\nh: Parameter regulating filter strength. A larger h value leads to stronger denoising. Typically, h should be between 5 and 20. (10 is ok)\nA larger h value will result in stronger filtering, which means more noise reduction but also more potential blurring of edges and details in the image. Conversely, a smaller h value will result in weaker filtering, preserving more details but potentially leaving more noise in the image.\ntemplateWindowSize: size in pixels of the window used to compute the weighted average for a given pixel. It should be an odd value, typically in the range of 3 to 21. (recommended 7)\nsearchWindowSize: Size in pixels of the window used to search for similar patches. It should be an odd value, typically larger than templateWindowSize (recommended 21)\n\nPurpose of each parameter\n\nh: Controls the amount of denoising. Higher values of “h” will result in stronger denoising\ntemplateWindowSize: Determines the size of the pixel neighborhood used to compute the weighted average for denoising. Larger values will result in smoother output but may remove finer details.\nsearchWindowSize: Determines the size of the neighborhood to search for similar patches. Larger values will consider a larger region for similarity, which may increase computational cost but can provide better denoising.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#denoising-h-28-29-manipulating-templatewindowsize-and-searchwindowsize",
    "href": "content/PyTesseract_OCR.html#denoising-h-28-29-manipulating-templatewindowsize-and-searchwindowsize",
    "title": "Issue with Tesseract in PATH",
    "section": "Denoising @ H = 28 & 29; manipulating templateWindowSize and searchWindowSize",
    "text": "Denoising @ H = 28 & 29; manipulating templateWindowSize and searchWindowSize\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    '''By denoising the image before applying adaptive thresholding, we aim to enhance the quality of the image \n    by reducing noise, which can improve the accuracy of the thresholding process. This can lead to better \n    segmentation of the foreground (text) from the background.'''\n    \n    #Apply image denoising.\n    #Noise is a random variation of brightness or color in an image, it is usually added when we scan documents.\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=28, templateWindowSize=7, searchWindowSize=19)\n    \n    # Apply adaptive thresholding to binarize the image. \n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=2, fy=2, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text\n\n# Example usage:\nimage_path = './Fix OCR Papers/bg870mr8040/bg870mr8040_0001-cropped.jpg'\nextracted_text = enhance_ocr_quality(image_path)\nprint(\"Extracted Text with Denoising H = 28, templateWindowSize = 7, searchWindowSize = 19\")\nprint(extracted_text)\n\nExtracted Text with Denoising H = 28, templateWindowSize = 7, searchWindowSize = 19\n——\n\nRNA SYNTHESIS DURING EMBRYOGENESIS AND LATER DEVELOPMENT\n\nIN THR BARNACLE POLLICIPES POLYNERUS",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#thresholding",
    "href": "content/PyTesseract_OCR.html#thresholding",
    "title": "Issue with Tesseract in PATH",
    "section": "Thresholding",
    "text": "Thresholding\n\nFor every pixel, the same threshold value is applied. If the pixel value is smaller than the threshold, it is set to 0, otherwise it is set to a maximum value.\nThe function cv.threshold is used to apply the thresholding.\n\n\nBasic Method for Global Threshold\n\ncv2.threshold function returns two values:\n\nretval: The computed threshold values, which can be useful if the threshold method is adaptive\ndst: The output binary image after applying thresholding\n\n\nretval, dst = cv2.threshold(src, thresh, maxval, type[, dst])\n\nsrc: Input image, a single-channel (grayscale) image of type uint8 or float32.\nthresh: Threshold value. Pixel values greater than the threshold will be set to maxval, and values less than or equal to the threshold will be set to 0.\nmaxval: Maximum value to use with the cv2.THRESH_BINARY and cv2.THRESH_BINARY_INV thresholding types. It is typically set to 255.\ntype: Type of thresholding to apply. It can be one of the following:\n\ncv2.THRESH_BINARY: Binary thresholding. Pixels with values greater than the threshold are set to maxval, and the rest are set to 0.\ncv2.THRESH_BINARY_INV: Inverse binary thresholding. Pixels with values greater than the threshold are set to 0, and the rest are set to maxval.\ncv2.THRESH_TRUNC: Truncated thresholding. Pixels with values greater than the threshold are set to the threshold value, and the rest remain unchanged.\ncv2.THRESH_TOZERO: Thresholding to zero. Pixels with values less than the threshold are set to 0, and the rest remain unchanged.\ncv2.THRESH_TOZERO_INV: Inverse thresholding to zero. Pixels with values greater than the threshold are set to 0, and the rest remain unchanged.\n\ndst (optional): Output image of the same size and type as the input image (src). If not specified, the function modifies the input image in place.\n\n\n\nAdaptive Threshold\ndst = cv2.adaptiveThreshold(src, maxValue, adaptiveMethod, thresholdType, blockSize, C[, dst])\n\nsrc: input image\nUnlike cv2.threshold which uses a single global threshold value, cv2.adaptiveThreshold computes the threshold for each pixel based on the local neighborhood of the pixel.\nadaptiveMethod parameter specifies the method used to compute which can either:\n\ncv2.ADAPTIVE_THRESH_MEAN_C\ncv2.ADAPTIVE_THRESH_GAUSSIAN_C\n\nblockSize: determines the size of the local neighborhood for computing the threshold. Should be an odd number, Since the neighborhood size must be symmetric around the pixel of interest, an odd blockSize ensures that there is a central pixel. If blockSize were even, there would be no exact center pixel, which could lead to complications in the computation.\nc: a constant subtracted from the mean or weighted mean calculated by the adaptive method. It adjusts the threshold value.\n\n\nimg = cv2.imread('./Fix OCR Papers/bg870mr8040/bg870mr8040_0001.jpg', cv2.IMREAD_GRAYSCALE)\n# assert img is not None, \"file could not be read, check with os.path.exists()\"\nret,thresh1 = cv2.threshold(img,127,255,cv2.THRESH_BINARY)\nret,thresh2 = cv2.threshold(img,127,255,cv2.THRESH_BINARY_INV)\nret,thresh3 = cv2.threshold(img,127,255,cv2.THRESH_TRUNC)\nret,thresh4 = cv2.threshold(img,127,255,cv2.THRESH_TOZERO)\nret,thresh5 = cv2.threshold(img,127,255,cv2.THRESH_TOZERO_INV)\ntitles = ['Original Image','BINARY','BINARY_INV','TRUNC','TOZERO','TOZERO_INV']\nimages = [img, thresh1, thresh2, thresh3, thresh4, thresh5]\nfor i in range(6):\n plt.subplot(2,3,i+1),plt.imshow(images[i],'gray',vmin=0,vmax=255)\n plt.title(titles[i])\n plt.xticks([]),plt.yticks([])\nplt.show()",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#adaptive-thresholding",
    "href": "content/PyTesseract_OCR.html#adaptive-thresholding",
    "title": "Issue with Tesseract in PATH",
    "section": "Adaptive Thresholding",
    "text": "Adaptive Thresholding\n\nAdjusting adaptiveMethod\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    '''By denoising the image before applying adaptive thresholding, we aim to enhance the quality of the image \n    by reducing noise, which can improve the accuracy of the thresholding process. This can lead to better \n    segmentation of the foreground (text) from the background.'''\n    \n    #Apply image denoising.\n    #Noise is a random variation of brightness or color in an image, it is usually added when we scan documents.\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=28, templateWindowSize=7, searchWindowSize=19)\n    \n    # Apply adaptive thresholding to binarize the image. \n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=2, fy=2, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text\n\n# Example usage:\nimage_path = './Fix OCR Papers/bg870mr8040/bg870mr8040_0001-cropped.jpg'\nextracted_text = enhance_ocr_quality(image_path)\nprint(\"Extracted Text with Denoising H = 30 & AdaptiveThreshold cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY:\")\nprint(extracted_text)\n\nExtracted Text with Denoising H = 30 & AdaptiveThreshold cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY:\n——\n\nRNA SYNTHESIS DURING EMBRYOGENESIS AND LATER DEVELOPMENT\n\nIN THR BARNACLE POLLICIPES POLYNERUS\n\n\n\n\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    '''By denoising the image before applying adaptive thresholding, we aim to enhance the quality of the image \n    by reducing noise, which can improve the accuracy of the thresholding process. This can lead to better \n    segmentation of the foreground (text) from the background.'''\n    \n    #Apply image denoising.\n    #Noise is a random variation of brightness or color in an image, it is usually added when we scan documents.\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=30, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image. \n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=2, fy=2, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text\n\n# Example usage:\nimage_path = './Fix OCR Papers/bg870mr8040/bg870mr8040_0001-cropped.jpg'\nextracted_text = enhance_ocr_quality(image_path)\nprint(\"Extracted Text with Denoising H = 30 & cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY :\")\nprint(extracted_text)\n\nExtracted Text with Denoising H = 30 & cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY :\nRid SYNTHESIS DURING EMBRYOGENESIS AND LATER DEVELOPMENT\n\nIN THE BARNACLE POLLICIPES POLYMERUS\n\n\n\n\nraw_image = cv2.imread(\"./Fix OCR Papers/bg870mr8040/bg870mr8040_0002.jp2\")",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---ch792bx6307",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---ch792bx6307",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - ch792bx6307",
    "text": "Read in Directory of Images - ch792bx6307\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/ch792bx6307/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0014_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0015_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/ch792bx6307/output_h10\\ch792bx6307_0016_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---cj258ns3486",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---cj258ns3486",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - cj258ns3486",
    "text": "Read in Directory of Images - cj258ns3486\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=20, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h20')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/cj258ns3486/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0014_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0015_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0016_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0017_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0018_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0019_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0020_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0021_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0022_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0023_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0024_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0025_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/cj258ns3486/output_h20\\cj258ns3486_0026_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---dj224jp8743",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---dj224jp8743",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - dj224jp8743",
    "text": "Read in Directory of Images - dj224jp8743\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/dj224jp8743/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dj224jp8743/output_h10\\dj224jp8743_0014_sidebyside.jpg\n\n\n\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\nCell In[41], line 68\n     66 # Example usage:\n     67 folder_path = '../Fix OCR Papers/dj224jp8743/'\n---&gt; 68 process_images_in_folder(folder_path)\n\nCell In[41], line 61, in process_images_in_folder(folder_path)\n     58 plt.axis('off')\n     60 # Save the side-by-side image\n---&gt; 61 plt.savefig(output_image_path)\n     62 plt.close()\n     64 print(f\"Processed and saved: {output_image_path}\")\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\pyplot.py:1023, in savefig(*args, **kwargs)\n   1020 @_copy_docstring_and_deprecators(Figure.savefig)\n   1021 def savefig(*args, **kwargs):\n   1022     fig = gcf()\n-&gt; 1023     res = fig.savefig(*args, **kwargs)\n   1024     fig.canvas.draw_idle()  # Need this if 'transparent=True', to reset colors.\n   1025     return res\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\figure.py:3343, in Figure.savefig(self, fname, transparent, **kwargs)\n   3339     for ax in self.axes:\n   3340         stack.enter_context(\n   3341             ax.patch._cm_set(facecolor='none', edgecolor='none'))\n-&gt; 3343 self.canvas.print_figure(fname, **kwargs)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backend_bases.py:2366, in FigureCanvasBase.print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, pad_inches, bbox_extra_artists, backend, **kwargs)\n   2362 try:\n   2363     # _get_renderer may change the figure dpi (as vector formats\n   2364     # force the figure dpi to 72), so we need to set it again here.\n   2365     with cbook._setattr_cm(self.figure, dpi=dpi):\n-&gt; 2366         result = print_method(\n   2367             filename,\n   2368             facecolor=facecolor,\n   2369             edgecolor=edgecolor,\n   2370             orientation=orientation,\n   2371             bbox_inches_restore=_bbox_inches_restore,\n   2372             **kwargs)\n   2373 finally:\n   2374     if bbox_inches and restore_bbox:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backend_bases.py:2232, in FigureCanvasBase._switch_canvas_and_return_print_method.&lt;locals&gt;.&lt;lambda&gt;(*args, **kwargs)\n   2228     optional_kws = {  # Passed by print_figure for other renderers.\n   2229         \"dpi\", \"facecolor\", \"edgecolor\", \"orientation\",\n   2230         \"bbox_inches_restore\"}\n   2231     skip = optional_kws - {*inspect.signature(meth).parameters}\n-&gt; 2232     print_method = functools.wraps(meth)(lambda *args, **kwargs: meth(\n   2233         *args, **{k: v for k, v in kwargs.items() if k not in skip}))\n   2234 else:  # Let third-parties do as they see fit.\n   2235     print_method = meth\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:526, in FigureCanvasAgg.print_jpg(self, filename_or_obj, pil_kwargs)\n    521 def print_jpg(self, filename_or_obj, *, pil_kwargs=None):\n    522     # savefig() has already applied savefig.facecolor; we now set it to\n    523     # white to make imsave() blend semi-transparent figures against an\n    524     # assumed white background.\n    525     with mpl.rc_context({\"savefig.facecolor\": \"white\"}):\n--&gt; 526         self._print_pil(filename_or_obj, \"jpeg\", pil_kwargs)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:457, in FigureCanvasAgg._print_pil(self, filename_or_obj, fmt, pil_kwargs, metadata)\n    452 def _print_pil(self, filename_or_obj, fmt, pil_kwargs, metadata=None):\n    453     \"\"\"\n    454     Draw the canvas, then save it using `.image.imsave` (to which\n    455     *pil_kwargs* and *metadata* are forwarded).\n    456     \"\"\"\n--&gt; 457     FigureCanvasAgg.draw(self)\n    458     mpl.image.imsave(\n    459         filename_or_obj, self.buffer_rgba(), format=fmt, origin=\"upper\",\n    460         dpi=self.figure.dpi, metadata=metadata, pil_kwargs=pil_kwargs)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:400, in FigureCanvasAgg.draw(self)\n    396 # Acquire a lock on the shared font cache.\n    397 with RendererAgg.lock, \\\n    398      (self.toolbar._wait_cursor_for_draw_cm() if self.toolbar\n    399       else nullcontext()):\n--&gt; 400     self.figure.draw(self.renderer)\n    401     # A GUI class may be need to update a window using this draw, so\n    402     # don't forget to call the superclass.\n    403     super().draw()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:95, in _finalize_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer, *args, **kwargs)\n     93 @wraps(draw)\n     94 def draw_wrapper(artist, renderer, *args, **kwargs):\n---&gt; 95     result = draw(artist, renderer, *args, **kwargs)\n     96     if renderer._rasterizing:\n     97         renderer.stop_rasterizing()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\figure.py:3140, in Figure.draw(self, renderer)\n   3137         # ValueError can occur when resizing a window.\n   3139 self.patch.draw(renderer)\n-&gt; 3140 mimage._draw_list_compositing_images(\n   3141     renderer, self, artists, self.suppressComposite)\n   3143 for sfig in self.subfigs:\n   3144     sfig.draw(renderer)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\image.py:131, in _draw_list_compositing_images(renderer, parent, artists, suppress_composite)\n    129 if not_composite or not has_images:\n    130     for a in artists:\n--&gt; 131         a.draw(renderer)\n    132 else:\n    133     # Composite any adjacent images together\n    134     image_group = []\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\axes\\_base.py:3064, in _AxesBase.draw(self, renderer)\n   3061 if artists_rasterized:\n   3062     _draw_rasterized(self.figure, artists_rasterized, renderer)\n-&gt; 3064 mimage._draw_list_compositing_images(\n   3065     renderer, self, artists, self.figure.suppressComposite)\n   3067 renderer.close_group('axes')\n   3068 self.stale = False\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\image.py:131, in _draw_list_compositing_images(renderer, parent, artists, suppress_composite)\n    129 if not_composite or not has_images:\n    130     for a in artists:\n--&gt; 131         a.draw(renderer)\n    132 else:\n    133     # Composite any adjacent images together\n    134     image_group = []\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:752, in Text.draw(self, renderer)\n    749 renderer.open_group('text', self.get_gid())\n    751 with self._cm_set(text=self._get_wrapped_text()):\n--&gt; 752     bbox, info, descent = self._get_layout(renderer)\n    753     trans = self.get_transform()\n    755     # don't use self.get_position here, which refers to text\n    756     # position in Text:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:386, in Text._get_layout(self, renderer)\n    384 clean_line, ismath = self._preprocess_math(line)\n    385 if clean_line:\n--&gt; 386     w, h, d = _get_text_metrics_with_cache(\n    387         renderer, clean_line, self._fontproperties,\n    388         ismath=ismath, dpi=self.figure.dpi)\n    389 else:\n    390     w = h = d = 0\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:97, in _get_text_metrics_with_cache(renderer, text, fontprop, ismath, dpi)\n     94 \"\"\"Call ``renderer.get_text_width_height_descent``, caching the results.\"\"\"\n     95 # Cached based on a copy of fontprop so that later in-place mutations of\n     96 # the passed-in argument do not mess up the cache.\n---&gt; 97 return _get_text_metrics_with_cache_impl(\n     98     weakref.ref(renderer), text, fontprop.copy(), ismath, dpi)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:105, in _get_text_metrics_with_cache_impl(renderer_ref, text, fontprop, ismath, dpi)\n    101 @functools.lru_cache(4096)\n    102 def _get_text_metrics_with_cache_impl(\n    103         renderer_ref, text, fontprop, ismath, dpi):\n    104     # dpi is unused, but participates in cache invalidation (via the renderer).\n--&gt; 105     return renderer_ref().get_text_width_height_descent(text, fontprop, ismath)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:230, in RendererAgg.get_text_width_height_descent(self, s, prop, ismath)\n    226     return super().get_text_width_height_descent(s, prop, ismath)\n    228 if ismath:\n    229     ox, oy, width, height, descent, font_image = \\\n--&gt; 230         self.mathtext_parser.parse(s, self.dpi, prop)\n    231     return width, height, descent\n    233 font = self._prepare_font(prop)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\mathtext.py:226, in MathTextParser.parse(self, s, dpi, prop)\n    222 # lru_cache can't decorate parse() directly because prop\n    223 # is mutable; key the cache using an internal copy (see\n    224 # text._get_text_metrics_with_cache for a similar case).\n    225 prop = prop.copy() if prop is not None else None\n--&gt; 226 return self._parse_cached(s, dpi, prop)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\mathtext.py:247, in MathTextParser._parse_cached(self, s, dpi, prop)\n    244 if self._parser is None:  # Cache the parser globally.\n    245     self.__class__._parser = _mathtext.Parser()\n--&gt; 247 box = self._parser.parse(s, fontset, fontsize, dpi)\n    248 output = _mathtext.ship(box)\n    249 if self._output_type == \"vector\":\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\_mathtext.py:1995, in Parser.parse(self, s, fonts_object, fontsize, dpi)\n   1992     result = self._expression.parseString(s)\n   1993 except ParseBaseException as err:\n   1994     # explain becomes a plain method on pyparsing 3 (err.explain(0)).\n-&gt; 1995     raise ValueError(\"\\n\" + ParseException.explain(err, 0)) from None\n   1996 self._state_stack = None\n   1997 self._in_subscript_or_superscript = False\n\nValueError: \n$$0\n^\nParseException: Expected end of text, found '$'  (at char 0), (line:1, col:1)\n\n\n\nError in callback &lt;function _draw_all_if_interactive at 0x000001D7D439FB00&gt; (for post_execute):\n\n\n\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\pyplot.py:120, in _draw_all_if_interactive()\n    118 def _draw_all_if_interactive():\n    119     if matplotlib.is_interactive():\n--&gt; 120         draw_all()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\_pylab_helpers.py:132, in Gcf.draw_all(cls, force)\n    130 for manager in cls.get_all_fig_managers():\n    131     if force or manager.canvas.figure.stale:\n--&gt; 132         manager.canvas.draw_idle()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backend_bases.py:2082, in FigureCanvasBase.draw_idle(self, *args, **kwargs)\n   2080 if not self._is_idle_drawing:\n   2081     with self._idle_draw_cntx():\n-&gt; 2082         self.draw(*args, **kwargs)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:400, in FigureCanvasAgg.draw(self)\n    396 # Acquire a lock on the shared font cache.\n    397 with RendererAgg.lock, \\\n    398      (self.toolbar._wait_cursor_for_draw_cm() if self.toolbar\n    399       else nullcontext()):\n--&gt; 400     self.figure.draw(self.renderer)\n    401     # A GUI class may be need to update a window using this draw, so\n    402     # don't forget to call the superclass.\n    403     super().draw()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:95, in _finalize_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer, *args, **kwargs)\n     93 @wraps(draw)\n     94 def draw_wrapper(artist, renderer, *args, **kwargs):\n---&gt; 95     result = draw(artist, renderer, *args, **kwargs)\n     96     if renderer._rasterizing:\n     97         renderer.stop_rasterizing()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\figure.py:3140, in Figure.draw(self, renderer)\n   3137         # ValueError can occur when resizing a window.\n   3139 self.patch.draw(renderer)\n-&gt; 3140 mimage._draw_list_compositing_images(\n   3141     renderer, self, artists, self.suppressComposite)\n   3143 for sfig in self.subfigs:\n   3144     sfig.draw(renderer)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\image.py:131, in _draw_list_compositing_images(renderer, parent, artists, suppress_composite)\n    129 if not_composite or not has_images:\n    130     for a in artists:\n--&gt; 131         a.draw(renderer)\n    132 else:\n    133     # Composite any adjacent images together\n    134     image_group = []\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\axes\\_base.py:3064, in _AxesBase.draw(self, renderer)\n   3061 if artists_rasterized:\n   3062     _draw_rasterized(self.figure, artists_rasterized, renderer)\n-&gt; 3064 mimage._draw_list_compositing_images(\n   3065     renderer, self, artists, self.figure.suppressComposite)\n   3067 renderer.close_group('axes')\n   3068 self.stale = False\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\image.py:131, in _draw_list_compositing_images(renderer, parent, artists, suppress_composite)\n    129 if not_composite or not has_images:\n    130     for a in artists:\n--&gt; 131         a.draw(renderer)\n    132 else:\n    133     # Composite any adjacent images together\n    134     image_group = []\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:752, in Text.draw(self, renderer)\n    749 renderer.open_group('text', self.get_gid())\n    751 with self._cm_set(text=self._get_wrapped_text()):\n--&gt; 752     bbox, info, descent = self._get_layout(renderer)\n    753     trans = self.get_transform()\n    755     # don't use self.get_position here, which refers to text\n    756     # position in Text:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:386, in Text._get_layout(self, renderer)\n    384 clean_line, ismath = self._preprocess_math(line)\n    385 if clean_line:\n--&gt; 386     w, h, d = _get_text_metrics_with_cache(\n    387         renderer, clean_line, self._fontproperties,\n    388         ismath=ismath, dpi=self.figure.dpi)\n    389 else:\n    390     w = h = d = 0\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:97, in _get_text_metrics_with_cache(renderer, text, fontprop, ismath, dpi)\n     94 \"\"\"Call ``renderer.get_text_width_height_descent``, caching the results.\"\"\"\n     95 # Cached based on a copy of fontprop so that later in-place mutations of\n     96 # the passed-in argument do not mess up the cache.\n---&gt; 97 return _get_text_metrics_with_cache_impl(\n     98     weakref.ref(renderer), text, fontprop.copy(), ismath, dpi)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:105, in _get_text_metrics_with_cache_impl(renderer_ref, text, fontprop, ismath, dpi)\n    101 @functools.lru_cache(4096)\n    102 def _get_text_metrics_with_cache_impl(\n    103         renderer_ref, text, fontprop, ismath, dpi):\n    104     # dpi is unused, but participates in cache invalidation (via the renderer).\n--&gt; 105     return renderer_ref().get_text_width_height_descent(text, fontprop, ismath)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:230, in RendererAgg.get_text_width_height_descent(self, s, prop, ismath)\n    226     return super().get_text_width_height_descent(s, prop, ismath)\n    228 if ismath:\n    229     ox, oy, width, height, descent, font_image = \\\n--&gt; 230         self.mathtext_parser.parse(s, self.dpi, prop)\n    231     return width, height, descent\n    233 font = self._prepare_font(prop)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\mathtext.py:226, in MathTextParser.parse(self, s, dpi, prop)\n    222 # lru_cache can't decorate parse() directly because prop\n    223 # is mutable; key the cache using an internal copy (see\n    224 # text._get_text_metrics_with_cache for a similar case).\n    225 prop = prop.copy() if prop is not None else None\n--&gt; 226 return self._parse_cached(s, dpi, prop)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\mathtext.py:247, in MathTextParser._parse_cached(self, s, dpi, prop)\n    244 if self._parser is None:  # Cache the parser globally.\n    245     self.__class__._parser = _mathtext.Parser()\n--&gt; 247 box = self._parser.parse(s, fontset, fontsize, dpi)\n    248 output = _mathtext.ship(box)\n    249 if self._output_type == \"vector\":\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\_mathtext.py:1995, in Parser.parse(self, s, fonts_object, fontsize, dpi)\n   1992     result = self._expression.parseString(s)\n   1993 except ParseBaseException as err:\n   1994     # explain becomes a plain method on pyparsing 3 (err.explain(0)).\n-&gt; 1995     raise ValueError(\"\\n\" + ParseException.explain(err, 0)) from None\n   1996 self._state_stack = None\n   1997 self._in_subscript_or_superscript = False\n\nValueError: \n$$0\n^\nParseException: Expected end of text, found '$'  (at char 0), (line:1, col:1)\n\n\n\n\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\IPython\\core\\formatters.py:340, in BaseFormatter.__call__(self, obj)\n    338     pass\n    339 else:\n--&gt; 340     return printer(obj)\n    341 # Finally look for special method names\n    342 method = get_real_method(obj, self.print_method)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\IPython\\core\\pylabtools.py:152, in print_figure(fig, fmt, bbox_inches, base64, **kwargs)\n    149     from matplotlib.backend_bases import FigureCanvasBase\n    150     FigureCanvasBase(fig)\n--&gt; 152 fig.canvas.print_figure(bytes_io, **kw)\n    153 data = bytes_io.getvalue()\n    154 if fmt == 'svg':\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backend_bases.py:2342, in FigureCanvasBase.print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, pad_inches, bbox_extra_artists, backend, **kwargs)\n   2336     renderer = _get_renderer(\n   2337         self.figure,\n   2338         functools.partial(\n   2339             print_method, orientation=orientation)\n   2340     )\n   2341     with getattr(renderer, \"_draw_disabled\", nullcontext)():\n-&gt; 2342         self.figure.draw(renderer)\n   2344 if bbox_inches:\n   2345     if bbox_inches == \"tight\":\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:95, in _finalize_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer, *args, **kwargs)\n     93 @wraps(draw)\n     94 def draw_wrapper(artist, renderer, *args, **kwargs):\n---&gt; 95     result = draw(artist, renderer, *args, **kwargs)\n     96     if renderer._rasterizing:\n     97         renderer.stop_rasterizing()\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\figure.py:3140, in Figure.draw(self, renderer)\n   3137         # ValueError can occur when resizing a window.\n   3139 self.patch.draw(renderer)\n-&gt; 3140 mimage._draw_list_compositing_images(\n   3141     renderer, self, artists, self.suppressComposite)\n   3143 for sfig in self.subfigs:\n   3144     sfig.draw(renderer)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\image.py:131, in _draw_list_compositing_images(renderer, parent, artists, suppress_composite)\n    129 if not_composite or not has_images:\n    130     for a in artists:\n--&gt; 131         a.draw(renderer)\n    132 else:\n    133     # Composite any adjacent images together\n    134     image_group = []\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\axes\\_base.py:3064, in _AxesBase.draw(self, renderer)\n   3061 if artists_rasterized:\n   3062     _draw_rasterized(self.figure, artists_rasterized, renderer)\n-&gt; 3064 mimage._draw_list_compositing_images(\n   3065     renderer, self, artists, self.figure.suppressComposite)\n   3067 renderer.close_group('axes')\n   3068 self.stale = False\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\image.py:131, in _draw_list_compositing_images(renderer, parent, artists, suppress_composite)\n    129 if not_composite or not has_images:\n    130     for a in artists:\n--&gt; 131         a.draw(renderer)\n    132 else:\n    133     # Composite any adjacent images together\n    134     image_group = []\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\artist.py:72, in allow_rasterization.&lt;locals&gt;.draw_wrapper(artist, renderer)\n     69     if artist.get_agg_filter() is not None:\n     70         renderer.start_filter()\n---&gt; 72     return draw(artist, renderer)\n     73 finally:\n     74     if artist.get_agg_filter() is not None:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:752, in Text.draw(self, renderer)\n    749 renderer.open_group('text', self.get_gid())\n    751 with self._cm_set(text=self._get_wrapped_text()):\n--&gt; 752     bbox, info, descent = self._get_layout(renderer)\n    753     trans = self.get_transform()\n    755     # don't use self.get_position here, which refers to text\n    756     # position in Text:\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:386, in Text._get_layout(self, renderer)\n    384 clean_line, ismath = self._preprocess_math(line)\n    385 if clean_line:\n--&gt; 386     w, h, d = _get_text_metrics_with_cache(\n    387         renderer, clean_line, self._fontproperties,\n    388         ismath=ismath, dpi=self.figure.dpi)\n    389 else:\n    390     w = h = d = 0\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:97, in _get_text_metrics_with_cache(renderer, text, fontprop, ismath, dpi)\n     94 \"\"\"Call ``renderer.get_text_width_height_descent``, caching the results.\"\"\"\n     95 # Cached based on a copy of fontprop so that later in-place mutations of\n     96 # the passed-in argument do not mess up the cache.\n---&gt; 97 return _get_text_metrics_with_cache_impl(\n     98     weakref.ref(renderer), text, fontprop.copy(), ismath, dpi)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\text.py:105, in _get_text_metrics_with_cache_impl(renderer_ref, text, fontprop, ismath, dpi)\n    101 @functools.lru_cache(4096)\n    102 def _get_text_metrics_with_cache_impl(\n    103         renderer_ref, text, fontprop, ismath, dpi):\n    104     # dpi is unused, but participates in cache invalidation (via the renderer).\n--&gt; 105     return renderer_ref().get_text_width_height_descent(text, fontprop, ismath)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\backends\\backend_agg.py:230, in RendererAgg.get_text_width_height_descent(self, s, prop, ismath)\n    226     return super().get_text_width_height_descent(s, prop, ismath)\n    228 if ismath:\n    229     ox, oy, width, height, descent, font_image = \\\n--&gt; 230         self.mathtext_parser.parse(s, self.dpi, prop)\n    231     return width, height, descent\n    233 font = self._prepare_font(prop)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\mathtext.py:226, in MathTextParser.parse(self, s, dpi, prop)\n    222 # lru_cache can't decorate parse() directly because prop\n    223 # is mutable; key the cache using an internal copy (see\n    224 # text._get_text_metrics_with_cache for a similar case).\n    225 prop = prop.copy() if prop is not None else None\n--&gt; 226 return self._parse_cached(s, dpi, prop)\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\mathtext.py:247, in MathTextParser._parse_cached(self, s, dpi, prop)\n    244 if self._parser is None:  # Cache the parser globally.\n    245     self.__class__._parser = _mathtext.Parser()\n--&gt; 247 box = self._parser.parse(s, fontset, fontsize, dpi)\n    248 output = _mathtext.ship(box)\n    249 if self._output_type == \"vector\":\n\nFile ~\\AppData\\Local\\anaconda3\\Lib\\site-packages\\matplotlib\\_mathtext.py:1995, in Parser.parse(self, s, fonts_object, fontsize, dpi)\n   1992     result = self._expression.parseString(s)\n   1993 except ParseBaseException as err:\n   1994     # explain becomes a plain method on pyparsing 3 (err.explain(0)).\n-&gt; 1995     raise ValueError(\"\\n\" + ParseException.explain(err, 0)) from None\n   1996 self._state_stack = None\n   1997 self._in_subscript_or_superscript = False\n\nValueError: \n$$0\n^\nParseException: Expected end of text, found '$'  (at char 0), (line:1, col:1)\n\n\n\n&lt;Figure size 2000x1000 with 2 Axes&gt;",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---dq995jh3669",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---dq995jh3669",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - dq995jh3669",
    "text": "Read in Directory of Images - dq995jh3669\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=20, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h20')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/dq995jh3669/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/dq995jh3669/output_h20\\dq995jh3669_0010_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---fy246vw6211",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---fy246vw6211",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - fy246vw6211",
    "text": "Read in Directory of Images - fy246vw6211\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/fy246vw6211/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0014_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0015_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0016_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0017_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0018_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/fy246vw6211/output_h10\\fy246vw6211_0019_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---gp441gd9761",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---gp441gd9761",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - gp441gd9761",
    "text": "Read in Directory of Images - gp441gd9761\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/gp441gd9761/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gp441gd9761/output_h10\\gp441gd9761_0012_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---gv579hx3954",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---gv579hx3954",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - gv579hx3954",
    "text": "Read in Directory of Images - gv579hx3954\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/gv579hx3954/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0014_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0015_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0016_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0017_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0018_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0019_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0020_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0021_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0022_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0023_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0024_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0025_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0026_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0027_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0028_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0029_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0030_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0031_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0032_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0033_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0034_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0035_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0036_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0037_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0038_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0039_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0040_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0041_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0042_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0043_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gv579hx3954/output_h10\\gv579hx3954_0044_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---gx021jv8425",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---gx021jv8425",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - gx021jv8425",
    "text": "Read in Directory of Images - gx021jv8425\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/gx021jv8425/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0014_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0015_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0016_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0017_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0018_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0019_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0020_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0021_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0022_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0023_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0024_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0025_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gx021jv8425/output_h10\\gx021jv8425_0026_sidebyside.jpg",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/PyTesseract_OCR.html#read-in-directory-of-images---gz293yq4738",
    "href": "content/PyTesseract_OCR.html#read-in-directory-of-images---gz293yq4738",
    "title": "Issue with Tesseract in PATH",
    "section": "Read in Directory of Images - gz293yq4738",
    "text": "Read in Directory of Images - gz293yq4738\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=10, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text, image\n\ndef process_images_in_folder(folder_path):\n    # Ensure the folder path exists\n    if not os.path.exists(folder_path):\n        print(f\"Error: The folder {folder_path} does not exist.\")\n        return\n    \n    # Create an output directory if it doesn't exist\n    output_dir = os.path.join(folder_path, 'output_h10')\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n\n    # Loop through all .jpg files in the specified folder\n    for filename in os.listdir(folder_path):\n        if filename.endswith('.jpg'):\n            image_path = os.path.join(folder_path, filename)\n            \n            # Enhance OCR quality and get the raw image\n            extracted_text, raw_image = enhance_ocr_quality(image_path)\n            \n            # Prepare the output file names\n            base_filename = os.path.splitext(filename)[0]\n            output_image_path = os.path.join(output_dir, f\"{base_filename}_sidebyside.jpg\")\n            \n            # Display and save the raw image and extracted text\n            plt.figure(figsize=(20, 10))\n\n            # Display the raw image\n            plt.subplot(1, 2, 1)\n            plt.imshow(cv2.cvtColor(raw_image, cv2.COLOR_BGR2RGB))\n            plt.title('Raw Image')\n            plt.axis('off')\n\n            # Display the extracted text\n            plt.subplot(1, 2, 2)\n            plt.text(0.5, 0.5, extracted_text, fontsize=12, ha='center', va='center')\n            plt.title('Extracted Text')\n            plt.axis('off')\n\n            # Save the side-by-side image\n            plt.savefig(output_image_path)\n            plt.close()\n\n            print(f\"Processed and saved: {output_image_path}\")\n\n# Example usage:\nfolder_path = '../Fix OCR Papers/gz293yq4738/'\nprocess_images_in_folder(folder_path)\n\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0001_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0002_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0003_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0004_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0005_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0006_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0007_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0008_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0009_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0010_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0011_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0012_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0013_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0014_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0015_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0016_sidebyside.jpg\nProcessed and saved: ../Fix OCR Papers/gz293yq4738/output_h10\\gz293yq4738_0017_sidebyside.jpg\n\n\n\ndef enhance_ocr_quality(image_path, h_range, template_range, search_range):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    results = {}\n    \n    # Loop over h_range, template_range, and search_range\n    for h in h_range:\n        for template_size in template_range:\n            for search_size in search_range:\n                # Apply image denoising\n                denoised = cv2.fastNlMeansDenoising(gray, None, h=h, templateWindowSize=template_size, searchWindowSize=search_size)\n                \n                # Apply adaptive thresholding to binarize the image\n                threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n                \n                # Resize image to improve OCR accuracy and speed\n                resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n                \n                # Perform OCR using PyTesseract\n                extracted_text = pytesseract.image_to_string(resized_img)\n                \n                # Store the extracted text along with the parameters used\n                results[(h, template_size, search_size)] = extracted_text\n    \n    return results\n\n# Define parameter ranges\nh_range = list(range(10, 20))\ntemplate_range = [size for size in range(7, 12) if size % 2 != 0]\nsearch_range = [size for size in range(17, 23) if size % 2 != 0]\n\n# Folder containing .jp2 files\nfolder_path = './Fix OCR Papers/bg870mr8040/'\n\n# Get list of .jp2 file paths\njp2_files = glob.glob(os.path.join(folder_path, '*.jp2'))\n\n# Iterate through each .jp2 file\nfor jp2_file in jp2_files:\n    # Extract file name for distinction purposes\n    file_name = os.path.splitext(os.path.basename(jp2_file))[0]\n    \n    # Perform OCR quality enhancement\n    results = enhance_ocr_quality(jp2_file, h_range, template_range, search_range)\n    \n    # Display the original image and extracted text side by side\n    plt.figure(figsize=(20, 10))\n    \n    # Display the original image\n    original_image = cv2.imread(jp2_file)\n    plt.subplot(1, 2, 1)\n    plt.imshow(cv2.cvtColor(original_image, cv2.COLOR_BGR2RGB))\n    plt.title('Original Image')\n    plt.axis('off')\n    \n    # Display the extracted text with parameter values\n    plt.subplot(1, 2, 2)\n    extracted_text = ''\n    for params, text in results.items():\n        h, template_size, search_size = params\n        extracted_text += f'h={h}, tw={template_size}, sw={search_size}:\\n{text}\\n\\n'\n    plt.text(0.05, 0.95, extracted_text, fontsize=12, ha='left', va='top')\n    plt.title('Extracted Text with Parameters')\n    plt.axis('off')\n    \n    # Save the combined display as an image file with abbreviated file name\n    abbreviated_name = '_'.join(file_name.split('_')[:2])\n    plt.savefig(f'{abbreviated_name}_combined_img_text.jpg')\n    print(f\"Combined image with extracted text for {file_name} saved as '{abbreviated_name}_combined_img_text.jpg'\")\n    \n    plt.close()\n\n\ndef enhance_ocr_quality(image_path, h_range, template_range, search_range):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    results = {}\n    \n    # Loop over h_range, template_range, and search_range\n    for h in h_range:\n        for template_size in template_range:\n            for search_size in search_range:\n                # Apply image denoising\n                denoised = cv2.fastNlMeansDenoising(gray, None, h=h, templateWindowSize=template_size, searchWindowSize=search_size)\n                \n                # Apply adaptive thresholding to binarize the image\n                threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n                \n                # Resize image to improve OCR accuracy and speed\n                resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n                \n                # Perform OCR using PyTesseract\n                extracted_text = pytesseract.image_to_string(resized_img)\n                \n                # Store the extracted text along with the parameters used\n                results[(h, template_size, search_size)] = extracted_text\n    \n    return results\n\n# Define parameter ranges\nh_range = list(range(10, 20))\ntemplate_range = [size for size in range(7, 12) if size % 2 != 0]\nsearch_range = [size for size in range(17, 23) if size % 2 != 0]\n\n# Folder containing .jp2 files\nfolder_path = './Fix OCR Papers/bg870mr8040/'\n\n# Get list of .jp2 file paths\njp2_files = glob.glob(os.path.join(folder_path, '*.jp2'))\n\n# Iterate through each .jp2 file\nfor jp2_file in jp2_files:\n    # Extract file name for distinction purposes\n    file_name = os.path.splitext(os.path.basename(jp2_file))[0]\n    \n    # Perform OCR quality enhancement\n    results = enhance_ocr_quality(jp2_file, h_range, template_range, search_range)\n    \n    # Display the original image and extracted text side by side\n    plt.figure(figsize=(20, 10))\n    \n    # Display the original image\n    original_image = cv2.imread(jp2_file)\n    plt.subplot(1, 2, 1)\n    plt.imshow(cv2.cvtColor(original_image, cv2.COLOR_BGR2RGB))\n    plt.title('Original Image')\n    plt.axis('off')\n    \n    # Display the extracted text with parameter values\n    plt.subplot(1, 2, 2)\n    extracted_text = ''\n    for params, text in results.items():\n        h, template_size, search_size = params\n        extracted_text += f'h={h}, tw={template_size}, sw={search_size}:\\n{text}\\n\\n'\n    plt.text(0.05, 0.95, extracted_text, fontsize=12, ha='left', va='top')\n    plt.title('Extracted Text with Parameters')\n    plt.axis('off')\n    \n    # Save the combined display as an image file with abbreviated file name\n    abbreviated_name = '_'.join(file_name.split('_')[:2])\n    plt.savefig(f'{abbreviated_name}_combined_img_text.jpg')\n    print(f\"Combined image with extracted text for {file_name} saved as '{abbreviated_name}_combined_img_text.jpg'\")\n    \n    plt.close()\n\nCombined image with extracted text for bg870mr8040_0001 saved as 'bg870mr8040_0001_combined_img_text.jpg'\nCombined image with extracted text for bg870mr8040_0002 saved as 'bg870mr8040_0002_combined_img_text.jpg'\nCombined image with extracted text for bg870mr8040_0003 saved as 'bg870mr8040_0003_combined_img_text.jpg'\nCombined image with extracted text for bg870mr8040_0004 saved as 'bg870mr8040_0004_combined_img_text.jpg'\nCombined image with extracted text for bg870mr8040_0005 saved as 'bg870mr8040_0005_combined_img_text.jpg'\nCombined image with extracted text for bg870mr8040_0006 saved as 'bg870mr8040_0006_combined_img_text.jpg'\nCombined image with extracted text for bg870mr8040_0007 saved as 'bg870mr8040_0007_combined_img_text.jpg'\n\n\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    '''By denoising the image before applying adaptive thresholding, we aim to enhance the quality of the image \n    by reducing noise, which can improve the accuracy of the thresholding process. This can lead to better \n    segmentation of the foreground (text) from the background.'''\n    \n    #Apply image denoising. \n    #Noise is a random variation of brightness or color in an image, it is usually added when we scan documents.\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=30, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image. This converts the image to black and white only.\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=2, fy=2, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text\n\n# Example usage:\nimage_path = './Fix OCR Papers/bg870mr8040/bg870mr8040_0001.jp2'\nextracted_text = enhance_ocr_quality(image_path)\nprint(\"Extracted Text:\")\nprint(extracted_text)\n\nExtracted Text:\n©\n\nRNA SYNTHESIS DURING EMBRYOGENESIS AND LATER DEVELOPMBNT\n\nIN THE BARNACLE POLLICIPHS POLYMERUS\n\nTom Raffin\nHOPKINS MARINE STATION\n\nLELAND STANFORD JUNIOR UNIVERSITY\n\nSune 6, 1967\n\n96\n\n\n\n\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=30, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=2, fy=2, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text\n\n# Example usage:\nimage_path = './Fix OCR Papers/bg870mr8040/bg870mr8040_0007.jpg'\nextracted_text = enhance_ocr_quality(image_path)\nprint(\"Extracted Text:\")\nprint(extracted_text)\n\nExtracted Text:\n3.6\nLy.\n\n(FE\n\nACKNOWLEDGEMENTS\n\nMyCock and his manuel dexterity in boring\nout plastic.\nBlige Bertha whose indigestion from mixing\nGyes with sugar lost me 240 hours.\nWelncd do\nCorky Weaver who(l_ soothe my neurosis.\nThe Men for endless hours of aid, supervision...\nmand of course=\n\nTo atl tne Anthoplcuras in the world.\n\n\n\n\ndef enhance_ocr_quality(image_path):\n    # Read the image\n    image = cv2.imread(image_path)\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Apply image denoising\n    denoised = cv2.fastNlMeansDenoising(gray, None, h=30, templateWindowSize=7, searchWindowSize=21)\n    \n    # Apply adaptive thresholding to binarize the image\n    threshold_img = cv2.adaptiveThreshold(denoised, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 11, 2)\n    \n    # Resize image to improve OCR accuracy and speed\n    resized_img = cv2.resize(threshold_img, None, fx=1.5, fy=1.5, interpolation=cv2.INTER_CUBIC)\n        \n    # Perform OCR using PyTesseract\n    extracted_text = pytesseract.image_to_string(resized_img)\n    \n    return extracted_text\n\n# Example usage:\nimage_path = './Fix OCR Papers/bg870mr8040/bg870mr8040_0007.jpg'\nextracted_text = enhance_ocr_quality(image_path)\nprint(\"Extracted Text:\")\nprint(extracted_text)\n\nExtracted Text:\n3 0\nLy,\n\n(GE\n\nACKNOWLEDGEMENTS\n\nMyCock and his manuel dexterity in boring\nout plastic.\nBig Bertha whose indigestion from mixing\néyes wivta sugar lost me 240 hours.\nhelped +o .\nCorky Weaver who soothe my neurosis.\nThe Men for endless hours of aid, supervision...\n“and of course=\n\nTo all the Anthopleures in the world.",
    "crumbs": [
      "PyTesseract - Improving OCR'd Papers",
      "PyTesseract_OCR Notebook"
    ]
  },
  {
    "objectID": "content/Global_Biodiversity_Information_Facility_(GBIF)_API.html",
    "href": "content/Global_Biodiversity_Information_Facility_(GBIF)_API.html",
    "title": "TAXA Project",
    "section": "",
    "text": "import requests\nimport os\nfrom langchain.chains import APIChain\nfrom langchain.chat_models import ChatOpenAI\n\n\nos.environ[\"OPENAI_API_KEY\"] = \"API KEY\"\n\n\nllm = ChatOpenAI(temperature= 0, model_name=\"gpt-3.5-turbo\", max_tokens = 256, verbose =True)\n\n\napiSpecs = \"\"\"API Documentation\nbase_url: https://api.gbif.org/v1/\nEndpoint: occurrence/search\nExample API call: https://www.gbif.org/occurrence/search?q=Hemigrapsus%20nudus\n\"\"\"\n\n\nchain_new = APIChain.from_llm_and_api_docs(llm, apiSpecs, verbose=True)\nresponse = chain_new.run('Please list the most recent occurrence with Tonicella lineata')\nprint(response)\n\n\n\n&gt; Entering new APIChain chain...\nhttps://api.gbif.org/v1/occurrence/search?q=Tonicella%20lineata&limit=1&sort=occurrenceDate desc\n{\"offset\":0,\"limit\":1,\"endOfRecords\":false,\"count\":457899,\"results\":[{\"key\":1989898085,\"datasetKey\":\"965bbbd8-f762-11e1-a439-00145eb45e9a\",\"publishingOrgKey\":\"c76cf030-2a95-11da-9cc1-b8a03c50a862\",\"networkKeys\":[\"17abcf75-2f1e-46dd-bf75-a5b21dd02655\"],\"installationKey\":\"60383ab8-f762-11e1-a439-00145eb45e9a\",\"hostingOrganizationKey\":\"c76cf030-2a95-11da-9cc1-b8a03c50a862\",\"publishingCountry\":\"DE\",\"protocol\":\"BIOCASE\",\"lastCrawled\":\"2023-07-14T22:44:48.042+00:00\",\"lastParsed\":\"2023-07-15T07:20:55.169+00:00\",\"crawlId\":224,\"extensions\":{},\"basisOfRecord\":\"PRESERVED_SPECIMEN\",\"occurrenceStatus\":\"PRESENT\",\"taxonKey\":2306813,\"kingdomKey\":1,\"phylumKey\":52,\"classKey\":346,\"orderKey\":8278247,\"familyKey\":3246305,\"genusKey\":2306809,\"speciesKey\":2306813,\"acceptedTaxonKey\":2306813,\"scientificName\":\"Tonicella lineata (Wood, 1815)\",\"acceptedScientificName\":\"Tonicella lineata (Wood, 1815)\",\"kingdom\":\"Animalia\",\"phylum\":\"Mollusca\",\"order\":\"Chitonida\",\"family\":\"Tonicellidae\",\"genus\":\"Tonicella\",\"species\":\"Tonicella lineata\",\"genericName\":\"Tonicella\",\"specificEpithet\":\"lineata\",\"taxonRank\":\"SPECIES\",\"taxonomicStatus\":\"ACCEPTED\",\"iucnRedListCategory\":\"NE\",\"gadm\":{},\"issues\":[\"COLLECTION_MATCH_NONE\",\"INSTITUTION_MATCH_FUZZY\"],\"lastInterpreted\":\"2023-07-15T07:20:55.169+00:00\",\"license\":\"http://creativecommons.org/licenses/by/4.0/legalcode\",\"identifiers\":[{\"identifier\":\"urn:catalog:SMF:Collection Mollusca:350221\"}],\"media\":[],\"facts\":[],\"relations\":[],\"institutionKey\":\"16946ec1-8db3-45b8-b084-7644384cc5f5\",\"isInCluster\":false,\"class\":\"Polyplacophora\",\"recordedByIDs\":[],\"identifiedByIDs\":[],\"catalogNumber\":\"350221\",\"institutionCode\":\"SMF\",\"collectionCode\":\"Collection Mollusca\",\"gbifID\":\"1989898085\"}],\"facets\":[]}\n\n&gt; Finished chain.\nThe most recent occurrence of Tonicella lineata is recorded in the dataset with the key \"965bbbd8-f762-11e1-a439-00145eb45e9a\". The occurrence is a preserved specimen and is present. The scientific name of the species is \"Tonicella lineata (Wood, 1815)\" and it belongs to the kingdom Animalia, phylum Mollusca, order Chitonida, family Tonicellidae, genus Tonicella, and species Tonicella lineata. The occurrence was last crawled on July 14, 2023, and last parsed on July 15, 2023. The occurrence is associated with the catalog number \"350221\" in the institution with the code \"SMF\" and the collection code \"Collection Mollusca\".\n\n\n\nchain_new = APIChain.from_llm_and_api_docs(llm, apiSpecs, verbose=True)\nresponse = chain_new.run('Please list the first occurrence with Hemigrapsus nudus')\nprint(response)\n\nError in on_chain_start callback: 'name'\n\n\nhttps://api.gbif.org/v1/occurrence/search?q=Hemigrapsus%20nudus&limit=1\n{\"offset\":0,\"limit\":1,\"endOfRecords\":false,\"count\":40113,\"results\":[{\"key\":1065135676,\"datasetKey\":\"005eb8d8-ed94-41be-89cf-e3115a9058e4\",\"publishingOrgKey\":\"7b8aff00-a9f8-11d8-944b-b8a03c50a862\",\"installationKey\":\"3b84ff5b-79ce-427c-acb7-b4004e160f66\",\"hostingOrganizationKey\":\"7b8aff00-a9f8-11d8-944b-b8a03c50a862\",\"publishingCountry\":\"US\",\"protocol\":\"EML\",\"lastCrawled\":\"2023-06-01T04:23:12.378+00:00\",\"lastParsed\":\"2023-06-07T20:20:50.103+00:00\",\"crawlId\":310,\"extensions\":{},\"basisOfRecord\":\"PRESERVED_SPECIMEN\",\"individualCount\":2,\"occurrenceStatus\":\"PRESENT\",\"taxonKey\":2225773,\"kingdomKey\":1,\"phylumKey\":54,\"classKey\":229,\"orderKey\":637,\"familyKey\":11368965,\"genusKey\":2225769,\"speciesKey\":2225773,\"acceptedTaxonKey\":2225773,\"scientificName\":\"Hemigrapsus nudus (Dana, 1851)\",\"acceptedScientificName\":\"Hemigrapsus nudus (Dana, 1851)\",\"kingdom\":\"Animalia\",\"phylum\":\"Arthropoda\",\"order\":\"Decapoda\",\"family\":\"Varunidae\",\"genus\":\"Hemigrapsus\",\"species\":\"Hemigrapsus nudus\",\"genericName\":\"Hemigrapsus\",\"specificEpithet\":\"nudus\",\"taxonRank\":\"SPECIES\",\"taxonomicStatus\":\"ACCEPTED\",\"iucnRedListCategory\":\"NE\",\"continent\":\"NORTH_AMERICA\",\"stateProvince\":\"British Columbia\",\"gadm\":{},\"issues\":[\"OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT\",\"INSTITUTION_MATCH_FUZZY\",\"INSTITUTION_COLLECTION_MISMATCH\"],\"modified\":\"2023-03-01T09:11:00.000+00:00\",\"lastInterpreted\":\"2023-06-07T20:20:50.103+00:00\",\"license\":\"http://creativecommons.org/publicdomain/zero/1.0/legalcode\",\"identifiers\":[{\"identifier\":\"f059351b-c94c-4ddc-82be-6d6d900c381c\"}],\"media\":[],\"facts\":[],\"relations\":[],\"institutionKey\":\"e71f36f1-e271-4720-a604-3c5a1418e7aa\",\"isInCluster\":false,\"datasetID\":\"invertebrates-25-Apr-2023\",\"class\":\"Malacostraca\",\"countryCode\":\"CA\",\"recordedByIDs\":[],\"identifiedByIDs\":[],\"country\":\"Canada\",\"rightsHolder\":\"The Field Museum of Natural History\",\"identifier\":\"f059351b-c94c-4ddc-82be-6d6d900c381c\",\"nomenclaturalCode\":\"ICZN\",\"higherGeography\":\"North America, Canada: Barelay Sound, British Colombia\",\"institutionID\":\"FMNH\",\"locality\":\"Barelay Sound, British Colombia\",\"fieldNumber\":\"ALB-1701\",\"collectionCode\":\"Invertebrate Zoology\",\"gbifID\":\"1065135676\",\"occurrenceID\":\"f059351b-c94c-4ddc-82be-6d6d900c381c\",\"catalogNumber\":\"1701\",\"organismID\":\"560837\",\"institutionCode\":\"FMNH\",\"locationID\":\"a56e1046-139d-4125-9045-2f6fd51661e0\",\"ownerInstitutionCode\":\"FMNH\",\"accessRights\":\"https://www.fieldmuseum.org/about/copyright-information\",\"collectionID\":\"Invertebrate Zoology\",\"higherClassification\":\"Animalia Arthropoda Malacostraca Decapoda Varunidae\"}],\"facets\":[]}\n\n&gt; Finished chain.\nThe first occurrence of Hemigrapsus nudus is found in the dataset with the key \"005eb8d8-ed94-41be-89cf-e3115a9058e4\". It was published by the organization with the key \"7b8aff00-a9f8-11d8-944b-b8a03c50a862\" and hosted by the same organization. The occurrence is a preserved specimen with a count of 2 individuals. The taxonomic classification of the occurrence is as follows: kingdom - Animalia, phylum - Arthropoda, class - Malacostraca, order - Decapoda, family - Varunidae, genus - Hemigrapsus, species - Hemigrapsus nudus. The occurrence is considered present and the taxonomic status is accepted. It was recorded in Barelay Sound, British Columbia, Canada. The occurrence is associated with the identifier \"f059351b-c94c-4ddc-82be-6d6d900c381c\" and has a catalog number of \"1701\". The occurrence is part of the Invertebrate Zoology collection at The Field Museum of Natural History.\n\n\n\nimport requests\nimport json\n\n# GBIF API base URL\nbase_url = 'https://api.gbif.org/v1/'\n\n# Function to search occurrences of a species\ndef search_species_occurrences(species_name, year = None):\n    # GBIF Occurrence Search API endpoint\n    url = f'{base_url}occurrence/search'\n\n    # Parameters for the API request\n    params = {\n        'scientificName': species_name,\n        'limit': 5 # Number of results to retrieve (adjust as needed)\n    }\n    \n    if year:\n        #Add year parameter if provided\n        params[\"year\"] = year\n    \n    try:\n        # Set get request to GBIF API\n        response = requests.get(url, params=params)\n        response.raise_for_status()\n\n        # Extract the repsonse data as JSON\n        data = response.json()\n        \n        if \"results\" in data:\n            results = data[\"results\"]\n            if results:\n                occurrences = []\n                for result in results:\n#                     if all(attr in result for attr in [\"key\", \"eventDate\", \"locality\", \"decimalLatitude\", \"decimalLongitude\", \"recordedBy\", \"kingdomKey\",\"phylumKey\", \"waterBody\"]):\n                        occurrence_id = result.get(\"key\", \"N/A\")\n                        occurrence_sciName = result.get(\"scientificName\", \"N/A\")\n                        occurrence_record = result.get(\"recordedBy\", \"N/A\")\n                        occurrence_date = result.get(\"eventDate\", \"N/A\")\n                        occurrence_locality = result.get(\"locality\", \"N/A\")\n                        occurrence_bodywater = result.get(\"waterBody\", \"N/A\")\n                        occurrence_depth = result.get(\"depth\", \"N/A\")\n                        occurrence_elevation = result.get(\"elevation\", \"N/A\")\n                        occurrence_lat = result.get(\"decimalLatitude\", \"N/A\")\n                        occurrence_long = result.get(\"decimalLongitude\", \"N/A\")\n                        occurrence_kingdom = result.get(\"kingdomKey\", \"N/A\")\n                        occurrence_phylum = result.get(\"phylumKey\", \"N/A\")\n                \n\n                        #Create a dictionary for the occurrences\n                        occurrence = {\n                            \"occurrence_id\": occurrence_id,\n                            \"occurrence_sciName\": occurrence_sciName,\n                            \"occurrence_date\": occurrence_date,\n                            \"location\": occurrence_locality,\n                            \"latitude\": occurrence_lat,\n                            \"longitude\": occurrence_long,\n                            \"collected by\": occurrence_record,\n                            \"kingdom\": occurrence_kingdom,\n                            \"phylum\": occurrence_phylum,\n                            \"body_water\": occurrence_bodywater,\n                            \"depth\": occurrence_depth,\n                            \"elevation\": occurrence_elevation\n                        }\n\n                        #Add the occurrence to the list\n                        occurrences.append(occurrence)\n                return occurrences\n            else:\n                return []\n        else:\n            print(\"Error: Invalid reponse from GBIF API\")\n            return []\n        \n    except requests.exceptions.HTTPError as err:\n        print(f\"HTTP error occurred: {err}\")\n    except requests.exceptions.RequestException as err:\n        print(f\"An error occurred: {err}\")\n          \n\n\n# Example usage\nspecies_name = \"Tonicella lineata\"  # Replace with your desired species name\nyear = 2014 #replace with year of article\noccurrences = search_species_occurrences(species_name, year)\n\n\n# Print or process the occurrences as needed\nfor occurrence in occurrences:\n    print(f\"Occurrence ID: {occurrence['occurrence_id']}\")\n    print(f\"Scientific Name: {occurrence['occurrence_sciName']}\")\n    print(f\"Occurrence Date: {occurrence['occurrence_date']}\")\n    print(f\"Recorded by: {occurrence['collected by']}\")\n    print(f\"Location: {occurrence['location']}\")\n    print(f\"Depth: {occurrence['depth']}\")\n    print(f\"Elevation: {occurrence['elevation']}\")\n    print(f\"Body of Water: {occurrence['body_water']}\")\n    print(f\"Latitude: {occurrence['latitude']}\")\n    print(f\"Longitude: {occurrence['longitude']}\")\n    print(f\"Kingdom: {occurrence['kingdom']}\")\n    print(f\"Phylum: {occurrence['phylum']}\")\n    print(\"-\" * 20)\n\nOccurrence ID: 4039335302\nScientific Name: Tonicella lineata (Wood, 1815)\nOccurrence Date: 2014-01-11T13:38:33\nRecorded by: Kris Liang\nLocation: N/A\nDepth: N/A\nElevation: N/A\nBody of Water: N/A\nLatitude: 37.520271\nLongitude: -122.515915\nKingdom: 1\nPhylum: 52\n--------------------\nOccurrence ID: 3357460927\nScientific Name: Tonicella lineata (Wood, 1815)\nOccurrence Date: 2014-01-03T00:00:00\nRecorded by: Andy Lamb\nLocation: Baines Point\nDepth: N/A\nElevation: N/A\nBody of Water: N/A\nLatitude: 49.007465\nLongitude: -123.587784\nKingdom: 1\nPhylum: 52\n--------------------\nOccurrence ID: 891052717\nScientific Name: Tonicella lineata (Wood, 1815)\nOccurrence Date: 2014-02-27T15:09:28\nRecorded by: Liam O'Brien\nLocation: N/A\nDepth: N/A\nElevation: N/A\nBody of Water: N/A\nLatitude: 37.494351\nLongitude: -122.498529\nKingdom: 1\nPhylum: 52\n--------------------\nOccurrence ID: 1837784847\nScientific Name: Tonicella lineata (Wood, 1815)\nOccurrence Date: 2014-03-23T12:03:00\nRecorded by: Donna Pomeroy\nLocation: N/A\nDepth: N/A\nElevation: N/A\nBody of Water: N/A\nLatitude: 37.495017\nLongitude: -122.499231\nKingdom: 1\nPhylum: 52\n--------------------\nOccurrence ID: 1453541336\nScientific Name: Tonicella lineata (Wood, 1815)\nOccurrence Date: 2014-03-23T11:39:02\nRecorded by: Robin Gwen Agarwal\nLocation: N/A\nDepth: N/A\nElevation: N/A\nBody of Water: N/A\nLatitude: 37.494806\nLongitude: -122.499397\nKingdom: 1\nPhylum: 52\n--------------------",
    "crumbs": [
      "GBIF API Test"
    ]
  },
  {
    "objectID": "content/experiments_1.html",
    "href": "content/experiments_1.html",
    "title": "Experiments",
    "section": "",
    "text": "A foundational element of using LangChain as a wrapper for large language models (LLMs) like GPT4 is the prompt. A prompt in the LLM context is just like a prompt in the usual context: it’s a thoughtfully designed question meant to elicit a response. If you want to use an LLM to explore text, it is critically important to design an effective prompt that will help the model generate accurate and helpful responses. We are exploring the use of LLMs to help us “read” undergraduate student research papers in marine science and figure out if the paper contains a species occurrence. That is, did the student observe or collect a given species at a given place during the course of their research? If they did, that kind of information is a species occurrence (species + place + date).\nTo explore the potential for using LLMs in this work, we selected a few online tools that are designed to help the user ask questions about text provided to the application. We picked a few student papers at random (all open access) and iterated on a series of questions to learn how to engineer prompts that might give us the information we need to determine if a paper includes a species occurrence. This was our process and what we found."
  },
  {
    "objectID": "content/experiments_1.html#getting-to-know-llms-and-langchain",
    "href": "content/experiments_1.html#getting-to-know-llms-and-langchain",
    "title": "Experiments",
    "section": "",
    "text": "A foundational element of using LangChain as a wrapper for large language models (LLMs) like GPT4 is the prompt. A prompt in the LLM context is just like a prompt in the usual context: it’s a thoughtfully designed question meant to elicit a response. If you want to use an LLM to explore text, it is critically important to design an effective prompt that will help the model generate accurate and helpful responses. We are exploring the use of LLMs to help us “read” undergraduate student research papers in marine science and figure out if the paper contains a species occurrence. That is, did the student observe or collect a given species at a given place during the course of their research? If they did, that kind of information is a species occurrence (species + place + date).\nTo explore the potential for using LLMs in this work, we selected a few online tools that are designed to help the user ask questions about text provided to the application. We picked a few student papers at random (all open access) and iterated on a series of questions to learn how to engineer prompts that might give us the information we need to determine if a paper includes a species occurrence. This was our process and what we found."
  },
  {
    "objectID": "content/experiments_1.html#tools-we-tried",
    "href": "content/experiments_1.html#tools-we-tried",
    "title": "Experiments",
    "section": "Tools we tried",
    "text": "Tools we tried\n\nChat My Data 📝 ChatPDF 📝 Ask My PDF\n\nChat My Data is here: https://blog.langchain.dev/tutorial-chatgpt-over-your-data/\nChatPDF is here: https://www.chatpdf.com/\nAsk My PDF is here: https://ask-my-pdf.streamlit.app/\n\nThe first question we gave to each chat tool was, “What is this paper about?”\n\n\n\n\n\n\n\n\n \nModel\nPaper\nWhat is this paper about?\nSummarize the paper concisely with reference to materials and methods.\n\n\n\n\n0\nPDF GPT\nfhl_2014_Charifson_34622.pdf; Snail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species Differences in Chela Size\nThis paper is about the potential for character displacement in the chela size of two sympatric shore crab species, Hemigrapsus nudus and Hemigrapsus oregonensis. It was found that the two-way ANOVA with factors sex and species did not show a significant species effect, suggesting that the claws of both shore crabs produce roughly the same force and are functionally equivalent (Behrens Yamada and Boulding 1998). Additionally, the consumption rates of H. nudus for Littorina sitkana and Lacuna vincta were found to be 1.8 and 13.03/individual crab/day respectively, and there was no potential for character displacement of chela size in the sympatric species. There were also no differences in consumption rates between male and female H. nudus. [Page no. 8], [Page no. 10], [Page no. 14].\nThe paper discussed the morphometrics and consumption rates of Hemigrapsus oregonensis and Hemigrapsus nudus, two closely related crabs that can be distinguished by external features. Male and female crabs were measured with digital calipers for carapace width, propal height and propal width [Page no. 5]. Consumption rates of 3 female (Fe1 to Fe3) and 3 male (Ma1 to Ma3) crabs were also calculated [Page no. 21]. SMA regressions of carapace width and propus measures were also presented in a Table [Page no. 11].\n\n\n1\nChat Your Data\nfhl_2014_Charifson_34622.pdf; Snail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species Differences in Chela Size\nThe paper is about an experimental study that investigates the role of highly mobile crab predators in the intertidal zonation of their gastropod prey. It also examines claw morphology, prey size selection, and foraging efficiency in generalist and specialist shell-breaking crabs. The study received financial support from various organizations and was conducted at Friday Harbor Laboratories with permission to collect organisms\nThe paper acknowledges the support and facilities provided by Friday Harbor Laboratories, The Libbie Hyman Scholarship, Society for Integrative and Comparative Biology, and the Stony Brook Department of Ecology and Evolution. However, the specific materials and methods used in the study are not mentioned in the provided context\n\n\n2\nAsk My PDF\nfhl_2014_Charifson_34622.pdf; Snail Predation by Hemigrapsus nudus and Hemigrapsus oregonensis: Sex and Species Differences in Chela Size\nThe paper is about the relationship between propus size and the use of snails as prey in two species of crabs, Hemigrapsus nudus and Hemigrapsus oregonensis. It also investigates the potential for character displacement in chela size between the two species. (Page 2)\nThe paper investigates the relationship between propus size and snail predation in Hemigrapsus nudus and Hemigrapsus oregonensis. The study uses standardized major axis regression to analyze the morphometric parameters of the crabs. The researchers also analyze prey selection by H. nudus using G-tests and one-way ANOVA. The results show that carapace width is a good predictor of propal height and width in both male and female crabs of both species. There is sexual dimorphism in chela size, but no detectable difference in chela size between the two species. The study suggests that there is no potential for character displacement in chela size between H. nudus and H. oregonensis.\n\n\n\nComparing results for initial questions across the three tools.\n\n\nSource: experiments"
  },
  {
    "objectID": "content/experiments_1.html#testing-architectures",
    "href": "content/experiments_1.html#testing-architectures",
    "title": "Experiments",
    "section": "Testing Architectures",
    "text": "Testing Architectures\nHaving experimented with prompts across some pre-made conversational tools, the next step is to explore different combinations of tools/methods for 1. Load, 2. Transform (Text splitting), 3. Embed, 4. Store, 5. Retrieve (Vector store query). We came up with four main options (below) with some possible variations (see the yellow arrows).\n\n\nCode\nneato`\ndigraph {\n    labelloc = \"b\"\n    fontname = Arial\n    node [\n        shape = rectangle\n        width = 1.5\n        color= lightgray\n        style = filled\n        fontname=\"Helvetica,Arial,sans-serif\"\n    ]\n    edge [\n    len = 2\n    penwidth = 1.5\n    arrowhead=open\n    color= darkgray\n  ]\n    start = regular\n    normalize = 0\n\n    subgraph cluster_0 {\n        style=filled;\n        color= deepskyblue;\n        node [style=filled,color=white];\n        SentenceTransformers -&gt; SentenceTransformerEmbeddings -&gt; Annoy -&gt; MultiQueryRetriever;\n        label = \"Option #1\";\n    }\n\n    subgraph cluster_1 {\n        style=filled;\n        color= yellowgreen;\n        node [style=filled,color=white];\n        TikToken -&gt; OpenAIEmbeddings -&gt; FAISS -&gt; ContextualCompression;\n        label = \"Option #2\";\n    }\n\nsubgraph cluster_2 {\n        style=filled;\n        color= orange;\n        node [style=filled,color=white];\n        NLTK -&gt; LlamaCCP -&gt; Chroma -&gt; ChromaSelfQuerying;\n        label = \"Option #3\";\n    }\n\nsubgraph cluster_3 {\n        style=filled;\n        color= deeppink;\n        node [style=filled,color=white];\n        SpaCY -&gt; SpaCYEmbeddings;\n        label = \"Option #4\";\n    }\n\n\n    source -&gt; PyMuPDF;\n  PyMuPDF -&gt; SentenceTransformers;\n  PyMuPDF -&gt; TikToken;\n  PyMuPDF -&gt; NLTK;\n  PyMuPDF -&gt; SpaCY;\n    FAISS -&gt; MultiQueryRetriever [color = yellow]\n  Annoy -&gt; ContextualCompression [color = yellow]\n  LlamaCCP -&gt; FAISS [color = yellow]\n  SpaCYEmbeddings -&gt; Chroma [color = yellow]\n  OpenAIEmbeddings -&gt; Annoy [color = yellow]\n\n    source [shape=Msquare];\n}\n`\n\n\n\n\n\n\n\n\n\nCode\nneato = require(\"@observablehq/graphviz@0.2\")"
  },
  {
    "objectID": "content/plan.html",
    "href": "content/plan.html",
    "title": "Plan of Action (updated June 28, 2023)",
    "section": "",
    "text": "Read the student papers and collect ground truth data (10 each)\nConversational Experiment making use of transformer LLM process for “assisted reading” of the papers\nIdentify entities & verify against authorities/knowledge bases\nInterface for validation of each species occurrence\nOCR process for other papers\n\n\n\nWe all develop a shared understanding of the papers and how they are structured (or not). Gather a list of questions that we can use to guide a conversational model.\n\n\n\nBuild an experiment with already OCR’d set of papers based on how we identified SPOCs in step 1.\n\n\n\nIndex all of the documents, ask for all the species occurrences across all the docs, in a list, with citation in the paper (paper ID, page). A button next to each one shows the excerpts from the paper with the evidence, highlighted. Link to review the full highlighted paper if necessary. \nComplex prompt to return dense chunks of information with species name, location, depth, habitat, etc. with explanation of the information source. \nConversational verification, one paper at a time. Prompt for the first best guess at SPOCs from the given paper, further interrogation (memory required) to verify.\n\n\n\n\n\nOur early experiments with OpenAI model to identify entities was very successful. We think this additional step will help us in the verification process by: 1. Making sure that the entities align with results of assisted reading 2. Allow us access to alternate name forms, visual verification (pictures!) and geo-location\n\n\n\nThis step brings together the assisted reading with the entity (species, place, habitat, etc.) identification to help with the verification of the species occurrence.",
    "crumbs": [
      "Project Plan"
    ]
  },
  {
    "objectID": "content/plan.html#read-student-papers",
    "href": "content/plan.html#read-student-papers",
    "title": "Plan of Action (updated June 28, 2023)",
    "section": "",
    "text": "We all develop a shared understanding of the papers and how they are structured (or not). Gather a list of questions that we can use to guide a conversational model.",
    "crumbs": [
      "Project Plan"
    ]
  },
  {
    "objectID": "content/plan.html#conversational-experiment",
    "href": "content/plan.html#conversational-experiment",
    "title": "Plan of Action (updated June 28, 2023)",
    "section": "",
    "text": "Build an experiment with already OCR’d set of papers based on how we identified SPOCs in step 1.\n\n\n\nIndex all of the documents, ask for all the species occurrences across all the docs, in a list, with citation in the paper (paper ID, page). A button next to each one shows the excerpts from the paper with the evidence, highlighted. Link to review the full highlighted paper if necessary. \nComplex prompt to return dense chunks of information with species name, location, depth, habitat, etc. with explanation of the information source. \nConversational verification, one paper at a time. Prompt for the first best guess at SPOCs from the given paper, further interrogation (memory required) to verify.",
    "crumbs": [
      "Project Plan"
    ]
  },
  {
    "objectID": "content/plan.html#identify-entities",
    "href": "content/plan.html#identify-entities",
    "title": "Plan of Action (updated June 28, 2023)",
    "section": "",
    "text": "Our early experiments with OpenAI model to identify entities was very successful. We think this additional step will help us in the verification process by: 1. Making sure that the entities align with results of assisted reading 2. Allow us access to alternate name forms, visual verification (pictures!) and geo-location",
    "crumbs": [
      "Project Plan"
    ]
  },
  {
    "objectID": "content/plan.html#interface-for-validation",
    "href": "content/plan.html#interface-for-validation",
    "title": "Plan of Action (updated June 28, 2023)",
    "section": "",
    "text": "This step brings together the assisted reading with the entity (species, place, habitat, etc.) identification to help with the verification of the species occurrence.",
    "crumbs": [
      "Project Plan"
    ]
  },
  {
    "objectID": "content/customizing.html",
    "href": "content/customizing.html",
    "title": "Customization",
    "section": "",
    "text": "Quarto allow many bells and whistles to make nice output. Read the documentation here Quarto documentation."
  },
  {
    "objectID": "content/customizing.html#quarto-documentation",
    "href": "content/customizing.html#quarto-documentation",
    "title": "Customization",
    "section": "",
    "text": "Quarto allow many bells and whistles to make nice output. Read the documentation here Quarto documentation."
  },
  {
    "objectID": "content/customizing.html#examples",
    "href": "content/customizing.html#examples",
    "title": "Customization",
    "section": "Examples",
    "text": "Examples\nLooking at other people’s Quarto code is a great way to figure out how to do stuff. Most will have a link to a GitHub repo where you can see the raw code. Look for a link to edit page or see source code. This will usually be on the right. Or look for the GitHub icon somewhere.\n\nQuarto gallery\nnmfs-openscapes\nFaye lab manual\nquarto-titlepages Note the link to edit is broken. Go to repo and look in documentation directory."
  }
]